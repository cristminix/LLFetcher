{
  "version": 3,
  "sources": ["../src/content_scripts_inject/create_data_codes.js"],
  "sourcesContent": ["function getM3Rec(){\r\n    try{\r\n        let app = Ember.Namespace.NAMESPACES.find(namespace => namespace instanceof Ember.Application)\r\n        let routeCourseVideo = app.__container__.lookup('route:course/video');\r\n        return routeCourseVideo.store._globalM3RecordDataCache;\r\n    }catch(e){\r\n    }\r\n    return null;\r\n}\r\nconst getM3RecByType = (type,m3Rec)=>{\r\n    let results = [];\r\n    for(let m in m3Rec){\r\n        \r\n        if('undefined' !== typeof m3Rec[m]._data.$type){\r\n            if(m3Rec[m]._data.$type == type){\r\n                results.push( [m, m3Rec[m]._data]);\r\n            }\r\n        }\r\n    }\r\n    return results;\r\n};\r\nconst findProp = (key, src) => {\r\n    const regexObj = new RegExp('^'+key, \"g\");\r\n    for(let k in src){\r\n        if(k.match(regexObj)){\r\n            return src[k];\r\n        }\r\n    }\r\n    return null;\r\n};\r\nfunction getCourseInfo(){\r\n    const m3Rec = getM3Rec();\r\n\r\n    if(m3Rec === null){\r\n        return null;\r\n    }\r\n\r\n    let results = getM3RecByType('com.linkedin.learning.api.deco.content.Course',m3Rec);\r\n  \r\n    let course = {\r\n        title : '',\r\n        slug : '',\r\n        duration : 0,\r\n        sourceCodeRepository : '',\r\n        subtitle : '',\r\n        description : '',\r\n        urn : '',\r\n        authors:[]\r\n    };\r\n\r\n    if(results.length>0){\r\n        const [urn, courseTmp] = results[0];\r\n        course.title = courseTmp.title;\r\n        course.duration = courseTmp.duration.duration;\r\n        course.sourceCodeRepository = courseTmp.sourceCodeRepository;\r\n        course.subtitle = courseTmp.subtitle; \r\n        course.slug = courseTmp.slug;\r\n        course.urn = urn;\r\n        try{\r\n            course.description = courseTmp.descriptionV2.text;\r\n        }catch(e){}\r\n    }\r\n\r\n    results = getM3RecByType('com.linkedin.learning.api.deco.content.Author',m3Rec);\r\n\r\n    for(let authorIndex in results){\r\n        const [urn,authorTmp] = results[authorIndex];\r\n        const author = {\r\n            biography : authorTmp.biographyV2.text,\r\n            shortBiography : authorTmp.shortBiographyV2.text,\r\n            slug : authorTmp.slug,\r\n            urn : urn\r\n        };\r\n\r\n        course.authors.push(author);\r\n    }\r\n\r\n    return course;\r\n}\r\nfunction getCourseSections(){\r\n    const m3Rec = getM3Rec();\r\n    let lac_key = 'urn:li:learningApiCourse:';\r\n    let lac = findProp(lac_key,m3Rec);\r\n    let secs_ = lac.__data.contents;\r\n    let secs = []\r\n    for(let i in secs_){\r\n        let sec_urn = secs_[i]['*section'];\r\n        let sec = {items:[]};\r\n        let sec_ = m3Rec[sec_urn].__data;\r\n        sec.title = sec_.title;\r\n\r\n        for(let j in sec_['*items']){\r\n            let si_urn = sec_['*items'][j];\r\n            try{\r\n                let si_ = m3Rec[m3Rec[si_urn].__data.content.video].__data;\r\n                let si = {\r\n                    duration : si_.duration.duration,\r\n                    slug : m3Rec[si_.entityUrn].__data.slug,\r\n                    title : si_.title\r\n                };\r\n                sec.items.push(si);\r\n            }catch(e){\r\n                console.log(e);\r\n            }\r\n            \r\n        }\r\n        secs.push(sec);\r\n        \r\n    }\r\n    return secs;\r\n}\r\nfunction createDataCodes(){\r\n\r\n\r\n    const courseInfo = {\r\n\t\tcourse : getCourseInfo(),\r\n\t\tsections : getCourseSections(),\r\n\t};\r\n\tconsole.log(courseInfo);\r\n\t\r\n\tlet code = document.createElement('code');\r\n    code.id = 'dataCodes';\r\n    code.setAttribute('data', JSON.stringify(courseInfo));\t\r\n\tlet node = document.getElementsByTagName('body')[0];\r\n    node.appendChild(code);\r\n}\r\n\r\n\r\nwindow.onload = ()=>{\r\n    try{\r\n        createDataCodes();\r\n    }catch(e){\r\n        console.log(e);\r\n    }\r\n    const replacedContent = '<h1>@replaced</h1>';\r\n    try{\r\n        document.querySelector('.linkedin-logo').innerHTML = replacedContent;\r\n    }catch(e){\r\n        console.log(e);\r\n    }\r\n    try{\r\n        document.getElementById('replacedContent').innerHTML = replacedContent;\r\n    }catch(e){\r\n        console.log(e);\r\n    }\r\n    // setTimeout(()=>{\r\n    //     console.log('Hello');\r\n    // });\r\n    //\r\n    // chrome.runtime.onMessage.addListener(function(msg, sender, sendResponse) {\r\n    //\r\n    //     console.log(msg,sender,sendResponse);\r\n    // });\r\n};\r\n"],
  "mappings": "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",
  "names": ["getM3Rec", "namespace", "getM3RecByType", "type", "m3Rec", "results", "m", "findProp", "key", "src", "regexObj", "k", "getCourseInfo", "course", "urn", "courseTmp", "authorIndex", "authorTmp", "author", "getCourseSections", "secs_", "secs", "sec_urn", "sec", "sec_", "j", "si_urn", "si_", "si", "e", "createDataCodes", "courseInfo", "code", "replacedContent"]
}
