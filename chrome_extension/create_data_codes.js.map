{
  "version": 3,
  "sources": ["../../src/content_scripts_inject/create_data_codes.js"],
  "sourcesContent": ["function getM3Rec(){\r\n    try{\r\n        let app = Ember.Namespace.NAMESPACES.find(namespace => namespace instanceof Ember.Application)\r\n        let routeCourseVideo = app.__container__.lookup('route:course/video');\r\n        return routeCourseVideo.store._globalM3RecordDataCache;\r\n    }catch(e){\r\n    }\r\n    return null;\r\n}\r\nconst getM3RecByType = (type,m3Rec)=>{\r\n    let results = [];\r\n    for(let m in m3Rec){\r\n        \r\n        if('undefined' !== typeof m3Rec[m]._data.$type){\r\n            if(m3Rec[m]._data.$type == type){\r\n                results.push( [m, m3Rec[m]._data]);\r\n            }\r\n        }\r\n    }\r\n    return results;\r\n};\r\nconst findProp = (key, src) => {\r\n    const regexObj = new RegExp('^'+key, \"g\");\r\n    for(let k in src){\r\n        if(k.match(regexObj)){\r\n            return src[k];\r\n        }\r\n    }\r\n    return null;\r\n};\r\nfunction getCourseInfo(){\r\n    const m3Rec = getM3Rec();\r\n\r\n    if(m3Rec === null){\r\n        return null;\r\n    }\r\n\r\n    let results = getM3RecByType('com.linkedin.learning.api.deco.content.Course',m3Rec);\r\n  \r\n    let course = {\r\n        title : '',\r\n        slug : '',\r\n        duration : 0,\r\n        sourceCodeRepository : '',\r\n        subtitle : '',\r\n        description : '',\r\n        urn : '',\r\n        authors:[]\r\n    };\r\n\r\n    if(results.length>0){\r\n        const [urn, courseTmp] = results[0];\r\n        course.title = courseTmp.title;\r\n        course.duration = courseTmp.duration.duration;\r\n        course.sourceCodeRepository = courseTmp.sourceCodeRepository;\r\n        course.subtitle = courseTmp.subtitle; \r\n        course.slug = courseTmp.slug;\r\n        course.urn = urn;\r\n        try{\r\n            course.description = courseTmp.descriptionV2.text;\r\n        }catch(e){}\r\n    }\r\n\r\n    results = getM3RecByType('com.linkedin.learning.api.deco.content.Author',m3Rec);\r\n\r\n    for(let authorIndex in results){\r\n        const [urn,authorTmp] = results[authorIndex];\r\n        const author = {\r\n            biography : authorTmp.biographyV2.text,\r\n            shortBiography : authorTmp.shortBiographyV2.text,\r\n            slug : authorTmp.slug,\r\n            urn : urn\r\n        };\r\n\r\n        course.authors.push(author);\r\n    }\r\n\r\n    return course;\r\n}\r\nfunction getCourseSections(){\r\n    const m3Rec = getM3Rec();\r\n    let lac_key = 'urn:li:learningApiCourse:';\r\n    let lac = findProp(lac_key,m3Rec);\r\n    let secs_ = lac.__data.contents;\r\n    let secs = []\r\n    for(let i in secs_){\r\n        let sec_urn = secs_[i]['*section'];\r\n        let sec = {items:[]};\r\n        let sec_ = m3Rec[sec_urn].__data;\r\n        sec.title = sec_.title;\r\n\r\n        for(let j in sec_['*items']){\r\n            let si_urn = sec_['*items'][j];\r\n            try{\r\n                let si_ = m3Rec[m3Rec[si_urn].__data.content.video].__data;\r\n                let si = {\r\n                    duration : si_.duration.duration,\r\n                    slug : m3Rec[si_.entityUrn].__data.slug,\r\n                    title : si_.title\r\n                };\r\n                sec.items.push(si);\r\n            }catch(e){\r\n                console.log(e);\r\n            }\r\n            \r\n        }\r\n        secs.push(sec);\r\n        \r\n    }\r\n    return secs;\r\n}\r\nfunction createDataCodes(){\r\n\r\n\r\n    const courseInfo = {\r\n\t\tcourse : getCourseInfo(),\r\n\t\tsections : getCourseSections(),\r\n\t};\r\n\tconsole.log(courseInfo);\r\n\t\r\n\tlet code = document.createElement('code');\r\n    code.id = 'dataCodes';\r\n    code.setAttribute('data', JSON.stringify(courseInfo));\t\r\n\tlet node = document.getElementsByTagName('body')[0];\r\n    node.appendChild(code);\r\n}\r\n\r\n\r\nwindow.onload = ()=>{\r\n    console.log(\"fuck you\")\r\n    try{\r\n        createDataCodes();\r\n    }catch(e){\r\n        console.log(e);\r\n    }\r\n    const replacedContent = '<h1>@replaced</h1>';\r\n    try{\r\n        document.querySelector('.linkedin-logo').innerHTML = replacedContent;\r\n    }catch(e){\r\n        console.log(e);\r\n    }\r\n    try{\r\n        document.getElementById('replacedContent').innerHTML = replacedContent;\r\n    }catch(e){\r\n        console.log(e);\r\n    }\r\n    // setTimeout(()=>{\r\n    //     console.log('Hello');\r\n    // });\r\n    //\r\n    // chrome.runtime.onMessage.addListener(function(msg, sender, sendResponse) {\r\n    //\r\n    //     console.log(msg,sender,sendResponse);\r\n    // });\r\n};\r\n"],
  "mappings": "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",
  "names": []
}
