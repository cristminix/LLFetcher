var st=Object.defineProperty;var rt=(t,e,s)=>e in t?st(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Q=(t,e,s)=>(rt(t,typeof e!="symbol"?e+"":e,s),s);import{a as appLogo,B as Button,D as DropdownSelect,v as v4,S as Store}from"./font-awesome.min-TSCjFFnw.js";import{r as reactExports,d as React,e as ReactDOM,j as jsxRuntimeExports,R as React$1,f as formatBytes,t as timeout,g as calculateSpeed,h as createDownloadFile,m as makeDelay,b as client}from"./index-H9g6PPaV.js";import{j as jQuery}from"./index-default-FtYdW2tD.js";/**
 * @remix-run/router v1.13.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},_extends$a.apply(this,arguments)}var Action;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createHashHistory(t){t===void 0&&(t={});function e(n,a){let{pathname:o="/",search:l="",hash:i=""}=parsePath(n.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),createLocation("",{pathname:o,search:l,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){let o=n.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let i=n.location.href,c=i.indexOf("#");l=c===-1?i:i.slice(0,c)}return l+"#"+(typeof a=="string"?a:createPath(a))}function r(n,a){warning(n.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return getUrlBasedHistory(e,s,r,t)}function invariant(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function warning(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,s,r){return s===void 0&&(s=null),_extends$a({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:s,key:e&&e.key||r||createKey()})}function createPath(t){let{pathname:e="/",search:s="",hash:r=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function parsePath(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,s,r){r===void 0&&(r={});let{window:n=document.defaultView,v5Compat:a=!1}=r,o=n.history,l=Action.Pop,i=null,c=u();c==null&&(c=0,o.replaceState(_extends$a({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){l=Action.Pop;let E=u(),p=E==null?null:E-c;c=E,i&&i({action:l,location:m.location,delta:p})}function h(E,p){l=Action.Push;let b=createLocation(m.location,E,p);s&&s(b,E),c=u()+1;let v=getHistoryState(b,c),d=m.createHref(b);try{o.pushState(v,"",d)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;n.location.assign(d)}a&&i&&i({action:l,location:m.location,delta:1})}function R(E,p){l=Action.Replace;let b=createLocation(m.location,E,p);s&&s(b,E),c=u();let v=getHistoryState(b,c),d=m.createHref(b);o.replaceState(v,"",d),a&&i&&i({action:l,location:m.location,delta:0})}function g(E){let p=n.location.origin!=="null"?n.location.origin:n.location.href,b=typeof E=="string"?E:createPath(E);return invariant(p,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,p)}let m={get action(){return l},get location(){return t(n,o)},listen(E){if(i)throw new Error("A history only accepts one active listener");return n.addEventListener(PopStateEventType,f),i=E,()=>{n.removeEventListener(PopStateEventType,f),i=null}},createHref(E){return e(n,E)},createURL:g,encodeLocation(E){let p=g(E);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:R,go(E){return o.go(E)}};return m}var ResultType;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ResultType||(ResultType={}));const immutableRouteKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isIndexRoute(t){return t.index===!0}function convertRoutesToDataRoutes(t,e,s,r){return s===void 0&&(s=[]),r===void 0&&(r={}),t.map((n,a)=>{let o=[...s,a],l=typeof n.id=="string"?n.id:o.join("-");if(invariant(n.index!==!0||!n.children,"Cannot specify children on an index route"),invariant(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),isIndexRoute(n)){let i=_extends$a({},n,e(n),{id:l});return r[l]=i,i}else{let i=_extends$a({},n,e(n),{id:l,children:void 0});return r[l]=i,n.children&&(i.children=convertRoutesToDataRoutes(n.children,e,o,r)),i}})}function matchRoutes(t,e,s){s===void 0&&(s="/");let r=typeof e=="string"?parsePath(e):e,n=stripBasename(r.pathname||"/",s);if(n==null)return null;let a=flattenRoutes(t);rankRouteBranches(a);let o=null;for(let l=0;o==null&&l<a.length;++l)o=matchRouteBranch(a[l],safelyDecodeURI(n));return o}function convertRouteMatchToUiMatch(t,e){let{route:s,pathname:r,params:n}=t;return{id:s.id,pathname:r,params:n,data:e[s.id],handle:s.handle}}function flattenRoutes(t,e,s,r){e===void 0&&(e=[]),s===void 0&&(s=[]),r===void 0&&(r="");let n=(a,o,l)=>{let i={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};i.relativePath.startsWith("/")&&(invariant(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),i.relativePath=i.relativePath.slice(r.length));let c=joinPaths([r,i.relativePath]),u=s.concat(i);a.children&&a.children.length>0&&(invariant(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),flattenRoutes(a.children,e,u,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:computeScore(c,a.index),routesMeta:u})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))n(a,o);else for(let i of explodeOptionalSegments(a.path))n(a,o,i)}),e}function explodeOptionalSegments(t){let e=t.split("/");if(e.length===0)return[];let[s,...r]=e,n=s.endsWith("?"),a=s.replace(/\?$/,"");if(r.length===0)return n?[a,""]:[a];let o=explodeOptionalSegments(r.join("/")),l=[];return l.push(...o.map(i=>i===""?a:[a,i].join("/"))),n&&l.push(...o),l.map(i=>t.startsWith("/")&&i===""?"/":i)}function rankRouteBranches(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:compareIndexes(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,e){let s=t.split("/"),r=s.length;return s.some(isSplat)&&(r+=splatPenalty),e&&(r+=indexRouteValue),s.filter(n=>!isSplat(n)).reduce((n,a)=>n+(paramRe.test(a)?dynamicSegmentValue:a===""?emptySegmentValue:staticSegmentValue),r)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every((r,n)=>r===e[n])?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e){let{routesMeta:s}=t,r={},n="/",a=[];for(let o=0;o<s.length;++o){let l=s[o],i=o===s.length-1,c=n==="/"?e:e.slice(n.length)||"/",u=matchPath({path:l.relativePath,caseSensitive:l.caseSensitive,end:i},c);if(!u)return null;Object.assign(r,u.params);let f=l.route;a.push({params:r,pathname:joinPaths([n,u.pathname]),pathnameBase:normalizePathname(joinPaths([n,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(n=joinPaths([n,u.pathnameBase]))}return a}function matchPath(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=compilePath(t.path,t.caseSensitive,t.end),n=e.match(s);if(!n)return null;let a=n[0],o=a.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:r.reduce((c,u,f)=>{let{paramName:h,isOptional:R}=u;if(h==="*"){let m=l[f]||"";o=a.slice(0,a.length-m.length).replace(/(.)\/+$/,"$1")}const g=l[f];return R&&!g?c[h]=void 0:c[h]=safelyDecodeURIComponent(g||"",h),c},{}),pathname:a,pathnameBase:o,pattern:t}}function compilePath(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),warning(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(o,l,i)=>(r.push({paramName:l,isOptional:i!=null}),i?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),r]}function safelyDecodeURI(t){try{return decodeURI(t)}catch(e){return warning(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function safelyDecodeURIComponent(t,e){try{return decodeURIComponent(t)}catch(s){return warning(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+s+").")),t}}function stripBasename(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}function resolvePath(t,e){e===void 0&&(e="/");let{pathname:s,search:r="",hash:n=""}=typeof t=="string"?parsePath(t):t;return{pathname:s?s.startsWith("/")?s:resolvePathname(s,e):e,search:normalizeSearch(r),hash:normalizeHash(n)}}function resolvePathname(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?s.length>1&&s.pop():n!=="."&&s.push(n)}),s.length>1?s.join("/"):"/"}function getInvalidPathError(t,e,s,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function resolveTo(t,e,s,r){r===void 0&&(r=!1);let n;typeof t=="string"?n=parsePath(t):(n=_extends$a({},t),invariant(!n.pathname||!n.pathname.includes("?"),getInvalidPathError("?","pathname","search",n)),invariant(!n.pathname||!n.pathname.includes("#"),getInvalidPathError("#","pathname","hash",n)),invariant(!n.search||!n.search.includes("#"),getInvalidPathError("#","search","hash",n)));let a=t===""||n.pathname==="",o=a?"/":n.pathname,l;if(o==null)l=s;else if(r){let f=e[e.length-1].replace(/^\//,"").split("/");if(o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f.pop();n.pathname=h.join("/")}l="/"+f.join("/")}else{let f=e.length-1;if(o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;n.pathname=h.join("/")}l=f>=0?e[f]:"/"}let i=resolvePath(n,l),c=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&s.endsWith("/");return!i.pathname.endsWith("/")&&(c||u)&&(i.pathname+="/"),i}const joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class ErrorResponseImpl{constructor(e,s,r,n){n===void 0&&(n=!1),this.status=e,this.statusText=s||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX$1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,defaultMapRouteProperties=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY="remix-router-transitions";function createRouter(t){const e=t.window?t.window:typeof window<"u"?window:void 0,s=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!s;invariant(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let n;if(t.mapRouteProperties)n=t.mapRouteProperties;else if(t.detectErrorBoundary){let x=t.detectErrorBoundary;n=j=>({hasErrorBoundary:x(j)})}else n=defaultMapRouteProperties;let a={},o=convertRoutesToDataRoutes(t.routes,n,void 0,a),l,i=t.basename||"/",c=_extends$a({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_prependBasename:!1},t.future),u=null,f=new Set,h=null,R=null,g=null,m=t.hydrationData!=null,E=matchRoutes(o,t.history.location,i),p=null;if(E==null){let x=getInternalRouterError(404,{pathname:t.history.location.pathname}),{matches:j,route:y}=getShortCircuitMatches(o);E=j,p={[y.id]:x}}let b=!E.some(x=>x.route.lazy)&&(!E.some(x=>x.route.loader)||t.hydrationData!=null),v,d={historyAction:t.history.action,location:t.history.location,matches:E,initialized:b,navigation:IDLE_NAVIGATION,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||p,fetchers:new Map,blockers:new Map},w=Action.Pop,C=!1,S,L=!1,T=new Map,k=null,P=!1,N=!1,_=[],K=[],A=new Map,O=0,V=-1,Y=new Map,le=new Set,he=new Map,H=new Map,ee=new Set,ae=new Map,ne=new Map,q=!1;function te(){if(u=t.history.listen(x=>{let{action:j,location:y,delta:D}=x;if(q){q=!1;return}warning(ne.size===0||D!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let M=Ke({currentLocation:d.location,nextLocation:y,historyAction:j});if(M&&D!=null){q=!0,t.history.go(D*-1),Ne(M,{state:"blocked",location:y,proceed(){Ne(M,{state:"proceeding",proceed:void 0,reset:void 0,location:y}),t.history.go(D)},reset(){let B=new Map(d.blockers);B.set(M,IDLE_BLOCKER),G({blockers:B})}});return}return fe(j,y)}),s){restoreAppliedTransitions(e,T);let x=()=>persistAppliedTransitions(e,T);e.addEventListener("pagehide",x),k=()=>e.removeEventListener("pagehide",x)}return d.initialized||fe(Action.Pop,d.location),v}function se(){u&&u(),k&&k(),f.clear(),S&&S.abort(),d.fetchers.forEach((x,j)=>De(j)),d.blockers.forEach((x,j)=>He(j))}function oe(x){return f.add(x),()=>f.delete(x)}function G(x,j){j===void 0&&(j={}),d=_extends$a({},d,x);let y=[],D=[];c.v7_fetcherPersist&&d.fetchers.forEach((M,B)=>{M.state==="idle"&&(ee.has(B)?D.push(B):y.push(B))}),[...f].forEach(M=>M(d,{deletedFetchers:D,unstable_viewTransitionOpts:j.viewTransitionOpts,unstable_flushSync:j.flushSync===!0})),c.v7_fetcherPersist&&(y.forEach(M=>d.fetchers.delete(M)),D.forEach(M=>De(M)))}function ce(x,j,y){var D,M;let{flushSync:B}=y===void 0?{}:y,$=d.actionData!=null&&d.navigation.formMethod!=null&&isMutationMethod(d.navigation.formMethod)&&d.navigation.state==="loading"&&((D=x.state)==null?void 0:D._isRedirect)!==!0,I;j.actionData?Object.keys(j.actionData).length>0?I=j.actionData:I=null:$?I=d.actionData:I=null;let F=j.loaderData?mergeLoaderData(d.loaderData,j.loaderData,j.matches||[],j.errors):d.loaderData,z=d.blockers;z.size>0&&(z=new Map(z),z.forEach((X,J)=>z.set(J,IDLE_BLOCKER)));let re=C===!0||d.navigation.formMethod!=null&&isMutationMethod(d.navigation.formMethod)&&((M=x.state)==null?void 0:M._isRedirect)!==!0;l&&(o=l,l=void 0),P||w===Action.Pop||(w===Action.Push?t.history.push(x,x.state):w===Action.Replace&&t.history.replace(x,x.state));let U;if(w===Action.Pop){let X=T.get(d.location.pathname);X&&X.has(x.pathname)?U={currentLocation:d.location,nextLocation:x}:T.has(x.pathname)&&(U={currentLocation:x,nextLocation:d.location})}else if(L){let X=T.get(d.location.pathname);X?X.add(x.pathname):(X=new Set([x.pathname]),T.set(d.location.pathname,X)),U={currentLocation:d.location,nextLocation:x}}G(_extends$a({},j,{actionData:I,loaderData:F,historyAction:w,location:x,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:Xe(x,j.matches||d.matches),preventScrollReset:re,blockers:z}),{viewTransitionOpts:U,flushSync:B===!0}),w=Action.Pop,C=!1,L=!1,P=!1,N=!1,_=[],K=[]}async function Te(x,j){if(typeof x=="number"){t.history.go(x);return}let y=normalizeTo(d.location,d.matches,i,c.v7_prependBasename,x,j==null?void 0:j.fromRouteId,j==null?void 0:j.relative),{path:D,submission:M,error:B}=normalizeNavigateOptions(c.v7_normalizeFormMethod,!1,y,j),$=d.location,I=createLocation(d.location,D,j&&j.state);I=_extends$a({},I,t.history.encodeLocation(I));let F=j&&j.replace!=null?j.replace:void 0,z=Action.Push;F===!0?z=Action.Replace:F===!1||M!=null&&isMutationMethod(M.formMethod)&&M.formAction===d.location.pathname+d.location.search&&(z=Action.Replace);let re=j&&"preventScrollReset"in j?j.preventScrollReset===!0:void 0,U=(j&&j.unstable_flushSync)===!0,X=Ke({currentLocation:$,nextLocation:I,historyAction:z});if(X){Ne(X,{state:"blocked",location:I,proceed(){Ne(X,{state:"proceeding",proceed:void 0,reset:void 0,location:I}),Te(x,j)},reset(){let J=new Map(d.blockers);J.set(X,IDLE_BLOCKER),G({blockers:J})}});return}return await fe(z,I,{submission:M,pendingError:B,preventScrollReset:re,replace:j&&j.replace,enableViewTransition:j&&j.unstable_viewTransition,flushSync:U})}function be(){if(_e(),G({revalidation:"loading"}),d.navigation.state!=="submitting"){if(d.navigation.state==="idle"){fe(d.historyAction,d.location,{startUninterruptedRevalidation:!0});return}fe(w||d.historyAction,d.navigation.location,{overrideNavigation:d.navigation})}}async function fe(x,j,y){S&&S.abort(),S=null,w=x,P=(y&&y.startUninterruptedRevalidation)===!0,Ye(d.location,d.matches),C=(y&&y.preventScrollReset)===!0,L=(y&&y.enableViewTransition)===!0;let D=l||o,M=y&&y.overrideNavigation,B=matchRoutes(D,j,i),$=(y&&y.flushSync)===!0;if(!B){let J=getInternalRouterError(404,{pathname:j.pathname}),{matches:ie,route:xe}=getShortCircuitMatches(D);$e(),ce(j,{matches:ie,loaderData:{},errors:{[xe.id]:J}},{flushSync:$});return}if(d.initialized&&!N&&isHashChangeOnly(d.location,j)&&!(y&&y.submission&&isMutationMethod(y.submission.formMethod))){ce(j,{matches:B},{flushSync:$});return}S=new AbortController;let I=createClientSideRequest(t.history,j,S.signal,y&&y.submission),F,z;if(y&&y.pendingError)z={[findNearestBoundary(B).route.id]:y.pendingError};else if(y&&y.submission&&isMutationMethod(y.submission.formMethod)){let J=await Me(I,j,y.submission,B,{replace:y.replace,flushSync:$});if(J.shortCircuited)return;F=J.pendingActionData,z=J.pendingActionError,M=getLoadingNavigation(j,y.submission),$=!1,I=new Request(I.url,{signal:I.signal})}let{shortCircuited:re,loaderData:U,errors:X}=await ke(I,j,B,M,y&&y.submission,y&&y.fetcherSubmission,y&&y.replace,$,F,z);re||(S=null,ce(j,_extends$a({matches:B},F?{actionData:F}:{},{loaderData:U,errors:X})))}async function Me(x,j,y,D,M){M===void 0&&(M={}),_e();let B=getSubmittingNavigation(j,y);G({navigation:B},{flushSync:M.flushSync===!0});let $,I=getTargetMatch(D,j);if(!I.route.action&&!I.route.lazy)$={type:ResultType.error,error:getInternalRouterError(405,{method:x.method,pathname:j.pathname,routeId:I.route.id})};else if($=await callLoaderOrAction("action",x,I,D,a,n,i),x.signal.aborted)return{shortCircuited:!0};if(isRedirectResult($)){let F;return M&&M.replace!=null?F=M.replace:F=$.location===d.location.pathname+d.location.search,await Re(d,$,{submission:y,replace:F}),{shortCircuited:!0}}if(isErrorResult($)){let F=findNearestBoundary(D,I.route.id);return(M&&M.replace)!==!0&&(w=Action.Push),{pendingActionData:{},pendingActionError:{[F.route.id]:$.error}}}if(isDeferredResult($))throw getInternalRouterError(400,{type:"defer-action"});return{pendingActionData:{[I.route.id]:$.data}}}async function ke(x,j,y,D,M,B,$,I,F,z){let re=D||getLoadingNavigation(j,M),U=M||B||getSubmissionFromNavigation(re),X=l||o,[J,ie]=getMatchesToLoad(t.history,d,y,U,j,N,_,K,ee,he,le,X,i,F,z);if($e(W=>!(y&&y.some(ue=>ue.route.id===W))||J&&J.some(ue=>ue.route.id===W)),V=++O,J.length===0&&ie.length===0){let W=ze();return ce(j,_extends$a({matches:y,loaderData:{},errors:z||null},F?{actionData:F}:{},W?{fetchers:new Map(d.fetchers)}:{}),{flushSync:I}),{shortCircuited:!0}}if(!P){ie.forEach(ue=>{let Z=d.fetchers.get(ue.key),Ee=getLoadingFetcher(void 0,Z?Z.data:void 0);d.fetchers.set(ue.key,Ee)});let W=F||d.actionData;G(_extends$a({navigation:re},W?Object.keys(W).length===0?{actionData:null}:{actionData:W}:{},ie.length>0?{fetchers:new Map(d.fetchers)}:{}),{flushSync:I})}ie.forEach(W=>{A.has(W.key)&&je(W.key),W.controller&&A.set(W.key,W.controller)});let xe=()=>ie.forEach(W=>je(W.key));S&&S.signal.addEventListener("abort",xe);let{results:we,loaderResults:Pe,fetcherResults:ve}=await Ce(d.matches,y,J,ie,x);if(x.signal.aborted)return{shortCircuited:!0};S&&S.signal.removeEventListener("abort",xe),ie.forEach(W=>A.delete(W.key));let de=findRedirect(we);if(de){if(de.idx>=J.length){let W=ie[de.idx-J.length].key;le.add(W)}return await Re(d,de.result,{replace:$}),{shortCircuited:!0}}let{loaderData:Le,errors:Ae}=processLoaderData(d,y,J,Pe,z,ie,ve,ae);ae.forEach((W,ue)=>{W.subscribe(Z=>{(Z||W.done)&&ae.delete(ue)})});let Oe=ze(),Be=Qe(V),ye=Oe||Be||ie.length>0;return _extends$a({loaderData:Le,errors:Ae},ye?{fetchers:new Map(d.fetchers)}:{})}function Fe(x,j,y,D){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");A.has(x)&&je(x);let M=(D&&D.unstable_flushSync)===!0,B=l||o,$=normalizeTo(d.location,d.matches,i,c.v7_prependBasename,y,j,D==null?void 0:D.relative),I=matchRoutes(B,$,i);if(!I){Se(x,j,getInternalRouterError(404,{pathname:$}),{flushSync:M});return}let{path:F,submission:z,error:re}=normalizeNavigateOptions(c.v7_normalizeFormMethod,!0,$,D);if(re){Se(x,j,re,{flushSync:M});return}let U=getTargetMatch(I,F);if(C=(D&&D.preventScrollReset)===!0,z&&isMutationMethod(z.formMethod)){Ie(x,j,F,U,I,M,z);return}he.set(x,{routeId:j,path:F}),me(x,j,F,U,I,M,z)}async function Ie(x,j,y,D,M,B,$){if(_e(),he.delete(x),!D.route.action&&!D.route.lazy){let Z=getInternalRouterError(405,{method:$.formMethod,pathname:y,routeId:j});Se(x,j,Z,{flushSync:B});return}let I=d.fetchers.get(x);ge(x,getSubmittingFetcher($,I),{flushSync:B});let F=new AbortController,z=createClientSideRequest(t.history,y,F.signal,$);A.set(x,F);let re=O,U=await callLoaderOrAction("action",z,D,M,a,n,i);if(z.signal.aborted){A.get(x)===F&&A.delete(x);return}if(ee.has(x)){ge(x,getDoneFetcher(void 0));return}if(isRedirectResult(U))if(A.delete(x),V>re){ge(x,getDoneFetcher(void 0));return}else return le.add(x),ge(x,getLoadingFetcher($)),Re(d,U,{fetcherSubmission:$});if(isErrorResult(U)){Se(x,j,U.error);return}if(isDeferredResult(U))throw getInternalRouterError(400,{type:"defer-action"});let X=d.navigation.location||d.location,J=createClientSideRequest(t.history,X,F.signal),ie=l||o,xe=d.navigation.state!=="idle"?matchRoutes(ie,d.navigation.location,i):d.matches;invariant(xe,"Didn't find any matches after fetcher action");let we=++O;Y.set(x,we);let Pe=getLoadingFetcher($,U.data);d.fetchers.set(x,Pe);let[ve,de]=getMatchesToLoad(t.history,d,xe,$,X,N,_,K,ee,he,le,ie,i,{[D.route.id]:U.data},void 0);de.filter(Z=>Z.key!==x).forEach(Z=>{let Ee=Z.key,We=d.fetchers.get(Ee),tt=getLoadingFetcher(void 0,We?We.data:void 0);d.fetchers.set(Ee,tt),A.has(Ee)&&je(Ee),Z.controller&&A.set(Ee,Z.controller)}),G({fetchers:new Map(d.fetchers)});let Le=()=>de.forEach(Z=>je(Z.key));F.signal.addEventListener("abort",Le);let{results:Ae,loaderResults:Oe,fetcherResults:Be}=await Ce(d.matches,xe,ve,de,J);if(F.signal.aborted)return;F.signal.removeEventListener("abort",Le),Y.delete(x),A.delete(x),de.forEach(Z=>A.delete(Z.key));let ye=findRedirect(Ae);if(ye){if(ye.idx>=ve.length){let Z=de[ye.idx-ve.length].key;le.add(Z)}return Re(d,ye.result)}let{loaderData:W,errors:ue}=processLoaderData(d,d.matches,ve,Oe,void 0,de,Be,ae);if(d.fetchers.has(x)){let Z=getDoneFetcher(U.data);d.fetchers.set(x,Z)}Qe(we),d.navigation.state==="loading"&&we>V?(invariant(w,"Expected pending action"),S&&S.abort(),ce(d.navigation.location,{matches:xe,loaderData:W,errors:ue,fetchers:new Map(d.fetchers)})):(G({errors:ue,loaderData:mergeLoaderData(d.loaderData,W,xe,ue),fetchers:new Map(d.fetchers)}),N=!1)}async function me(x,j,y,D,M,B,$){let I=d.fetchers.get(x);ge(x,getLoadingFetcher($,I?I.data:void 0),{flushSync:B});let F=new AbortController,z=createClientSideRequest(t.history,y,F.signal);A.set(x,F);let re=O,U=await callLoaderOrAction("loader",z,D,M,a,n,i);if(isDeferredResult(U)&&(U=await resolveDeferredData(U,z.signal,!0)||U),A.get(x)===F&&A.delete(x),!z.signal.aborted){if(ee.has(x)){ge(x,getDoneFetcher(void 0));return}if(isRedirectResult(U))if(V>re){ge(x,getDoneFetcher(void 0));return}else{le.add(x),await Re(d,U);return}if(isErrorResult(U)){Se(x,j,U.error);return}invariant(!isDeferredResult(U),"Unhandled fetcher deferred data"),ge(x,getDoneFetcher(U.data))}}async function Re(x,j,y){let{submission:D,fetcherSubmission:M,replace:B}=y===void 0?{}:y;j.revalidate&&(N=!0);let $=createLocation(x.location,j.location,{_isRedirect:!0});if(invariant($,"Expected a location on the redirect navigation"),s){let X=!1;if(j.reloadDocument)X=!0;else if(ABSOLUTE_URL_REGEX$1.test(j.location)){const J=t.history.createURL(j.location);X=J.origin!==e.location.origin||stripBasename(J.pathname,i)==null}if(X){B?e.location.replace(j.location):e.location.assign(j.location);return}}S=null;let I=B===!0?Action.Replace:Action.Push,{formMethod:F,formAction:z,formEncType:re}=x.navigation;!D&&!M&&F&&z&&re&&(D=getSubmissionFromNavigation(x.navigation));let U=D||M;if(redirectPreserveMethodStatusCodes.has(j.status)&&U&&isMutationMethod(U.formMethod))await fe(I,$,{submission:_extends$a({},U,{formAction:j.location}),preventScrollReset:C});else{let X=getLoadingNavigation($,D);await fe(I,$,{overrideNavigation:X,fetcherSubmission:M,preventScrollReset:C})}}async function Ce(x,j,y,D,M){let B=await Promise.all([...y.map(F=>callLoaderOrAction("loader",M,F,j,a,n,i)),...D.map(F=>F.matches&&F.match&&F.controller?callLoaderOrAction("loader",createClientSideRequest(t.history,F.path,F.controller.signal),F.match,F.matches,a,n,i):{type:ResultType.error,error:getInternalRouterError(404,{pathname:F.path})})]),$=B.slice(0,y.length),I=B.slice(y.length);return await Promise.all([resolveDeferredResults(x,y,$,$.map(()=>M.signal),!1,d.loaderData),resolveDeferredResults(x,D.map(F=>F.match),I,D.map(F=>F.controller?F.controller.signal:null),!0)]),{results:B,loaderResults:$,fetcherResults:I}}function _e(){N=!0,_.push(...$e()),he.forEach((x,j)=>{A.has(j)&&(K.push(j),je(j))})}function ge(x,j,y){y===void 0&&(y={}),d.fetchers.set(x,j),G({fetchers:new Map(d.fetchers)},{flushSync:(y&&y.flushSync)===!0})}function Se(x,j,y,D){D===void 0&&(D={});let M=findNearestBoundary(d.matches,j);De(x),G({errors:{[M.route.id]:y},fetchers:new Map(d.fetchers)},{flushSync:(D&&D.flushSync)===!0})}function Ue(x){return c.v7_fetcherPersist&&(H.set(x,(H.get(x)||0)+1),ee.has(x)&&ee.delete(x)),d.fetchers.get(x)||IDLE_FETCHER}function De(x){let j=d.fetchers.get(x);A.has(x)&&!(j&&j.state==="loading"&&Y.has(x))&&je(x),he.delete(x),Y.delete(x),le.delete(x),ee.delete(x),d.fetchers.delete(x)}function Ge(x){if(c.v7_fetcherPersist){let j=(H.get(x)||0)-1;j<=0?(H.delete(x),ee.add(x)):H.set(x,j)}else De(x);G({fetchers:new Map(d.fetchers)})}function je(x){let j=A.get(x);invariant(j,"Expected fetch controller: "+x),j.abort(),A.delete(x)}function Ve(x){for(let j of x){let y=Ue(j),D=getDoneFetcher(y.data);d.fetchers.set(j,D)}}function ze(){let x=[],j=!1;for(let y of le){let D=d.fetchers.get(y);invariant(D,"Expected fetcher: "+y),D.state==="loading"&&(le.delete(y),x.push(y),j=!0)}return Ve(x),j}function Qe(x){let j=[];for(let[y,D]of Y)if(D<x){let M=d.fetchers.get(y);invariant(M,"Expected fetcher: "+y),M.state==="loading"&&(je(y),Y.delete(y),j.push(y))}return Ve(j),j.length>0}function Je(x,j){let y=d.blockers.get(x)||IDLE_BLOCKER;return ne.get(x)!==j&&ne.set(x,j),y}function He(x){d.blockers.delete(x),ne.delete(x)}function Ne(x,j){let y=d.blockers.get(x)||IDLE_BLOCKER;invariant(y.state==="unblocked"&&j.state==="blocked"||y.state==="blocked"&&j.state==="blocked"||y.state==="blocked"&&j.state==="proceeding"||y.state==="blocked"&&j.state==="unblocked"||y.state==="proceeding"&&j.state==="unblocked","Invalid blocker state transition: "+y.state+" -> "+j.state);let D=new Map(d.blockers);D.set(x,j),G({blockers:D})}function Ke(x){let{currentLocation:j,nextLocation:y,historyAction:D}=x;if(ne.size===0)return;ne.size>1&&warning(!1,"A router only supports one blocker at a time");let M=Array.from(ne.entries()),[B,$]=M[M.length-1],I=d.blockers.get(B);if(!(I&&I.state==="proceeding")&&$({currentLocation:j,nextLocation:y,historyAction:D}))return B}function $e(x){let j=[];return ae.forEach((y,D)=>{(!x||x(D))&&(y.cancel(),j.push(D),ae.delete(D))}),j}function Ze(x,j,y){if(h=x,g=j,R=y||null,!m&&d.navigation===IDLE_NAVIGATION){m=!0;let D=Xe(d.location,d.matches);D!=null&&G({restoreScrollPosition:D})}return()=>{h=null,g=null,R=null}}function qe(x,j){return R&&R(x,j.map(D=>convertRouteMatchToUiMatch(D,d.loaderData)))||x.key}function Ye(x,j){if(h&&g){let y=qe(x,j);h[y]=g()}}function Xe(x,j){if(h){let y=qe(x,j),D=h[y];if(typeof D=="number")return D}return null}function et(x){a={},l=convertRoutesToDataRoutes(x,n,void 0,a)}return v={get basename(){return i},get state(){return d},get routes(){return o},get window(){return e},initialize:te,subscribe:oe,enableScrollRestoration:Ze,navigate:Te,fetch:Fe,revalidate:be,createHref:x=>t.history.createHref(x),encodeLocation:x=>t.history.encodeLocation(x),getFetcher:Ue,deleteFetcher:Ge,dispose:se,getBlocker:Je,deleteBlocker:He,_internalFetchControllers:A,_internalActiveDeferreds:ae,_internalSetRoutes:et},v}function isSubmissionNavigation(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function normalizeTo(t,e,s,r,n,a,o){let l,i;if(a){l=[];for(let u of e)if(l.push(u),u.route.id===a){i=u;break}}else l=e,i=e[e.length-1];let c=resolveTo(n||".",getPathContributingMatches(l).map(u=>u.pathnameBase),stripBasename(t.pathname,s)||t.pathname,o==="path");return n==null&&(c.search=t.search,c.hash=t.hash),(n==null||n===""||n===".")&&i&&i.route.index&&!hasNakedIndexQuery(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r&&s!=="/"&&(c.pathname=c.pathname==="/"?s:joinPaths([s,c.pathname])),createPath(c)}function normalizeNavigateOptions(t,e,s,r){if(!r||!isSubmissionNavigation(r))return{path:s};if(r.formMethod&&!isValidMethod(r.formMethod))return{path:s,error:getInternalRouterError(405,{method:r.formMethod})};let n=()=>({path:s,error:getInternalRouterError(400,{type:"invalid-body"})}),a=r.formMethod||"get",o=t?a.toUpperCase():a.toLowerCase(),l=stripHashFromPath(s);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!isMutationMethod(o))return n();let h=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((R,g)=>{let[m,E]=g;return""+R+m+"="+E+`
`},""):String(r.body);return{path:s,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:h}}}else if(r.formEncType==="application/json"){if(!isMutationMethod(o))return n();try{let h=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:s,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch{return n()}}}invariant(typeof FormData=="function","FormData is not available in this environment");let i,c;if(r.formData)i=convertFormDataToSearchParams(r.formData),c=r.formData;else if(r.body instanceof FormData)i=convertFormDataToSearchParams(r.body),c=r.body;else if(r.body instanceof URLSearchParams)i=r.body,c=convertSearchParamsToFormData(i);else if(r.body==null)i=new URLSearchParams,c=new FormData;else try{i=new URLSearchParams(r.body),c=convertSearchParamsToFormData(i)}catch{return n()}let u={formMethod:o,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(isMutationMethod(u.formMethod))return{path:s,submission:u};let f=parsePath(s);return e&&f.search&&hasNakedIndexQuery(f.search)&&i.append("index",""),f.search="?"+i,{path:createPath(f),submission:u}}function getLoaderMatchesUntilBoundary(t,e){let s=t;if(e){let r=t.findIndex(n=>n.route.id===e);r>=0&&(s=t.slice(0,r))}return s}function getMatchesToLoad(t,e,s,r,n,a,o,l,i,c,u,f,h,R,g){let m=g?Object.values(g)[0]:R?Object.values(R)[0]:void 0,E=t.createURL(e.location),p=t.createURL(n),b=g?Object.keys(g)[0]:void 0,d=getLoaderMatchesUntilBoundary(s,b).filter((C,S)=>{if(C.route.lazy)return!0;if(C.route.loader==null)return!1;if(isNewLoader(e.loaderData,e.matches[S],C)||o.some(k=>k===C.route.id))return!0;let L=e.matches[S],T=C;return shouldRevalidateLoader(C,_extends$a({currentUrl:E,currentParams:L.params,nextUrl:p,nextParams:T.params},r,{actionResult:m,defaultShouldRevalidate:a||E.pathname+E.search===p.pathname+p.search||E.search!==p.search||isNewRouteInstance(L,T)}))}),w=[];return c.forEach((C,S)=>{if(!s.some(N=>N.route.id===C.routeId)||i.has(S))return;let L=matchRoutes(f,C.path,h);if(!L){w.push({key:S,routeId:C.routeId,path:C.path,matches:null,match:null,controller:null});return}let T=e.fetchers.get(S),k=getTargetMatch(L,C.path),P=!1;u.has(S)?P=!1:l.includes(S)?P=!0:T&&T.state!=="idle"&&T.data===void 0?P=a:P=shouldRevalidateLoader(k,_extends$a({currentUrl:E,currentParams:e.matches[e.matches.length-1].params,nextUrl:p,nextParams:s[s.length-1].params},r,{actionResult:m,defaultShouldRevalidate:a})),P&&w.push({key:S,routeId:C.routeId,path:C.path,matches:L,match:k,controller:new AbortController})}),[d,w]}function isNewLoader(t,e,s){let r=!e||s.route.id!==e.route.id,n=t[s.route.id]===void 0;return r||n}function isNewRouteInstance(t,e){let s=t.route.path;return t.pathname!==e.pathname||s!=null&&s.endsWith("*")&&t.params["*"]!==e.params["*"]}function shouldRevalidateLoader(t,e){if(t.route.shouldRevalidate){let s=t.route.shouldRevalidate(e);if(typeof s=="boolean")return s}return e.defaultShouldRevalidate}async function loadLazyRouteModule(t,e,s){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let n=s[t.id];invariant(n,"No route found in manifest");let a={};for(let o in r){let i=n[o]!==void 0&&o!=="hasErrorBoundary";warning(!i,'Route "'+n.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!i&&!immutableRouteKeys.has(o)&&(a[o]=r[o])}Object.assign(n,a),Object.assign(n,_extends$a({},e(n),{lazy:void 0}))}async function callLoaderOrAction(t,e,s,r,n,a,o,l){l===void 0&&(l={});let i,c,u,f=g=>{let m,E=new Promise((p,b)=>m=b);return u=()=>m(),e.signal.addEventListener("abort",u),Promise.race([g({request:e,params:s.params,context:l.requestContext}),E])};try{let g=s.route[t];if(s.route.lazy)if(g){let m,E=await Promise.all([f(g).catch(p=>{m=p}),loadLazyRouteModule(s.route,a,n)]);if(m)throw m;c=E[0]}else if(await loadLazyRouteModule(s.route,a,n),g=s.route[t],g)c=await f(g);else if(t==="action"){let m=new URL(e.url),E=m.pathname+m.search;throw getInternalRouterError(405,{method:e.method,pathname:E,routeId:s.route.id})}else return{type:ResultType.data,data:void 0};else if(g)c=await f(g);else{let m=new URL(e.url),E=m.pathname+m.search;throw getInternalRouterError(404,{pathname:E})}invariant(c!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+s.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(g){i=ResultType.error,c=g}finally{u&&e.signal.removeEventListener("abort",u)}if(isResponse(c)){let g=c.status;if(redirectStatusCodes.has(g)){let p=c.headers.get("Location");if(invariant(p,"Redirects returned/thrown from loaders/actions must have a Location header"),!ABSOLUTE_URL_REGEX$1.test(p))p=normalizeTo(new URL(e.url),r.slice(0,r.indexOf(s)+1),o,!0,p);else if(!l.isStaticRequest){let b=new URL(e.url),v=p.startsWith("//")?new URL(b.protocol+p):new URL(p),d=stripBasename(v.pathname,o)!=null;v.origin===b.origin&&d&&(p=v.pathname+v.search+v.hash)}if(l.isStaticRequest)throw c.headers.set("Location",p),c;return{type:ResultType.redirect,status:g,location:p,revalidate:c.headers.get("X-Remix-Revalidate")!==null,reloadDocument:c.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:i===ResultType.error?ResultType.error:ResultType.data,response:c};let m,E=c.headers.get("Content-Type");return E&&/\bapplication\/json\b/.test(E)?m=await c.json():m=await c.text(),i===ResultType.error?{type:i,error:new ErrorResponseImpl(g,c.statusText,m),headers:c.headers}:{type:ResultType.data,data:m,statusCode:c.status,headers:c.headers}}if(i===ResultType.error)return{type:i,error:c};if(isDeferredData(c)){var h,R;return{type:ResultType.deferred,deferredData:c,statusCode:(h=c.init)==null?void 0:h.status,headers:((R=c.init)==null?void 0:R.headers)&&new Headers(c.init.headers)}}return{type:ResultType.data,data:c}}function createClientSideRequest(t,e,s,r){let n=t.createURL(stripHashFromPath(e)).toString(),a={signal:s};if(r&&isMutationMethod(r.formMethod)){let{formMethod:o,formEncType:l}=r;a.method=o.toUpperCase(),l==="application/json"?(a.headers=new Headers({"Content-Type":l}),a.body=JSON.stringify(r.json)):l==="text/plain"?a.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?a.body=convertFormDataToSearchParams(r.formData):a.body=r.formData}return new Request(n,a)}function convertFormDataToSearchParams(t){let e=new URLSearchParams;for(let[s,r]of t.entries())e.append(s,typeof r=="string"?r:r.name);return e}function convertSearchParamsToFormData(t){let e=new FormData;for(let[s,r]of t.entries())e.append(s,r);return e}function processRouteLoaderData(t,e,s,r,n){let a={},o=null,l,i=!1,c={};return s.forEach((u,f)=>{let h=e[f].route.id;if(invariant(!isRedirectResult(u),"Cannot handle redirect results in processLoaderData"),isErrorResult(u)){let R=findNearestBoundary(t,h),g=u.error;r&&(g=Object.values(r)[0],r=void 0),o=o||{},o[R.route.id]==null&&(o[R.route.id]=g),a[h]=void 0,i||(i=!0,l=isRouteErrorResponse(u.error)?u.error.status:500),u.headers&&(c[h]=u.headers)}else isDeferredResult(u)?(n.set(h,u.deferredData),a[h]=u.deferredData.data):a[h]=u.data,u.statusCode!=null&&u.statusCode!==200&&!i&&(l=u.statusCode),u.headers&&(c[h]=u.headers)}),r&&(o=r,a[Object.keys(r)[0]]=void 0),{loaderData:a,errors:o,statusCode:l||200,loaderHeaders:c}}function processLoaderData(t,e,s,r,n,a,o,l){let{loaderData:i,errors:c}=processRouteLoaderData(e,s,r,n,l);for(let u=0;u<a.length;u++){let{key:f,match:h,controller:R}=a[u];invariant(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let g=o[u];if(!(R&&R.signal.aborted))if(isErrorResult(g)){let m=findNearestBoundary(t.matches,h==null?void 0:h.route.id);c&&c[m.route.id]||(c=_extends$a({},c,{[m.route.id]:g.error})),t.fetchers.delete(f)}else if(isRedirectResult(g))invariant(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(g))invariant(!1,"Unhandled fetcher deferred data");else{let m=getDoneFetcher(g.data);t.fetchers.set(f,m)}}return{loaderData:i,errors:c}}function mergeLoaderData(t,e,s,r){let n=_extends$a({},e);for(let a of s){let o=a.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(n[o]=e[o]):t[o]!==void 0&&a.route.loader&&(n[o]=t[o]),r&&r.hasOwnProperty(o))break}return n}function findNearestBoundary(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function getShortCircuitMatches(t){let e=t.length===1?t[0]:t.find(s=>s.index||!s.path||s.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function getInternalRouterError(t,e){let{pathname:s,routeId:r,method:n,type:a}=e===void 0?{}:e,o="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(o="Bad Request",n&&s&&r?l="You made a "+n+' request to "'+s+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":a==="defer-action"?l="defer() is not supported in actions":a==="invalid-body"&&(l="Unable to encode submission body")):t===403?(o="Forbidden",l='Route "'+r+'" does not match URL "'+s+'"'):t===404?(o="Not Found",l='No route matches URL "'+s+'"'):t===405&&(o="Method Not Allowed",n&&s&&r?l="You made a "+n.toUpperCase()+' request to "'+s+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":n&&(l='Invalid request method "'+n.toUpperCase()+'"')),new ErrorResponseImpl(t||500,o,new Error(l),!0)}function findRedirect(t){for(let e=t.length-1;e>=0;e--){let s=t[e];if(isRedirectResult(s))return{result:s,idx:e}}}function stripHashFromPath(t){let e=typeof t=="string"?parsePath(t):t;return createPath(_extends$a({},e,{hash:""}))}function isHashChangeOnly(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function isDeferredResult(t){return t.type===ResultType.deferred}function isErrorResult(t){return t.type===ResultType.error}function isRedirectResult(t){return(t&&t.type)===ResultType.redirect}function isDeferredData(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function isResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function isValidMethod(t){return validRequestMethods.has(t.toLowerCase())}function isMutationMethod(t){return validMutationMethods.has(t.toLowerCase())}async function resolveDeferredResults(t,e,s,r,n,a){for(let o=0;o<s.length;o++){let l=s[o],i=e[o];if(!i)continue;let c=t.find(f=>f.route.id===i.route.id),u=c!=null&&!isNewRouteInstance(c,i)&&(a&&a[i.route.id])!==void 0;if(isDeferredResult(l)&&(n||u)){let f=r[o];invariant(f,"Expected an AbortSignal for revalidating fetcher deferred result"),await resolveDeferredData(l,f,n).then(h=>{h&&(s[o]=h||s[o])})}}}async function resolveDeferredData(t,e,s){if(s===void 0&&(s=!1),!await t.deferredData.resolveData(e)){if(s)try{return{type:ResultType.data,data:t.deferredData.unwrappedData}}catch(n){return{type:ResultType.error,error:n}}return{type:ResultType.data,data:t.deferredData.data}}}function hasNakedIndexQuery(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function getTargetMatch(t,e){let s=typeof e=="string"?parsePath(e).search:e.search;if(t[t.length-1].route.index&&hasNakedIndexQuery(s||""))return t[t.length-1];let r=getPathContributingMatches(t);return r[r.length-1]}function getSubmissionFromNavigation(t){let{formMethod:e,formAction:s,formEncType:r,text:n,formData:a,json:o}=t;if(!(!e||!s||!r)){if(n!=null)return{formMethod:e,formAction:s,formEncType:r,formData:void 0,json:void 0,text:n};if(a!=null)return{formMethod:e,formAction:s,formEncType:r,formData:a,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:s,formEncType:r,formData:void 0,json:o,text:void 0}}}function getLoadingNavigation(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function getLoadingFetcher(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function getSubmittingFetcher(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function getDoneFetcher(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function restoreAppliedTransitions(t,e){try{let s=t.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(s){let r=JSON.parse(s);for(let[n,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(n,new Set(a||[]))}}catch{}}function persistAppliedTransitions(t,e){if(e.size>0){let s={};for(let[r,n]of e)s[r]=[...n];try{t.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(s))}catch(r){warning(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},_extends$9.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(t,e){let{relative:s}=e===void 0?{}:e;useInRouterContext()||invariant(!1);let{basename:r,navigator:n}=reactExports.useContext(NavigationContext),{hash:a,pathname:o,search:l}=useResolvedPath(t,{relative:s}),i=o;return r!=="/"&&(i=o==="/"?r:joinPaths([r,o])),n.createHref({pathname:i,search:l,hash:a})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(t){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let t=reactExports.useContext(DataRouterContext),{basename:e,navigator:s}=reactExports.useContext(NavigationContext),{matches:r}=reactExports.useContext(RouteContext),{pathname:n}=useLocation(),a=JSON.stringify(getPathContributingMatches(r).map(i=>i.pathnameBase)),o=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{o.current=!0}),reactExports.useCallback(function(i,c){if(c===void 0&&(c={}),!o.current)return;if(typeof i=="number"){s.go(i);return}let u=resolveTo(i,JSON.parse(a),n,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:joinPaths([e,u.pathname])),(c.replace?s.replace:s.push)(u,c.state,c)},[e,s,a,n,t])}const OutletContext=reactExports.createContext(null);function useOutlet(t){let e=reactExports.useContext(RouteContext).outlet;return e&&reactExports.createElement(OutletContext.Provider,{value:t},e)}function useResolvedPath(t,e){let{relative:s}=e===void 0?{}:e,{matches:r}=reactExports.useContext(RouteContext),{pathname:n}=useLocation(),a=JSON.stringify(getPathContributingMatches(r).map(o=>o.pathnameBase));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(a),n,s==="path"),[t,a,n,s])}function useRoutesImpl(t,e,s){useInRouterContext()||invariant(!1);let{navigator:r}=reactExports.useContext(NavigationContext),{matches:n}=reactExports.useContext(RouteContext),a=n[n.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let i=useLocation(),c;if(e){var u;let m=typeof e=="string"?parsePath(e):e;l==="/"||(u=m.pathname)!=null&&u.startsWith(l)||invariant(!1),c=m}else c=i;let f=c.pathname||"/",h=l==="/"?f:f.slice(l.length)||"/",R=matchRoutes(t,{pathname:h}),g=_renderMatches(R&&R.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:joinPaths([l,r.encodeLocation?r.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?l:joinPaths([l,r.encodeLocation?r.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),n,s);return e&&g?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$9({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Action.Pop}},g):g}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),s?reactExports.createElement("pre",{style:n},s):null,a)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(t){let{routeContext:e,match:s,children:r}=t,n=reactExports.useContext(DataRouterContext);return n&&n.static&&n.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=s.route.id),reactExports.createElement(RouteContext.Provider,{value:e},r)}function _renderMatches(t,e,s){var r;if(e===void 0&&(e=[]),s===void 0&&(s=null),t==null){var n;if((n=s)!=null&&n.errors)t=s.matches;else return null}let a=t,o=(r=s)==null?void 0:r.errors;if(o!=null){let l=a.findIndex(i=>i.route.id&&(o==null?void 0:o[i.route.id]));l>=0||invariant(!1),a=a.slice(0,Math.min(a.length,l+1))}return a.reduceRight((l,i,c)=>{let u=i.route.id?o==null?void 0:o[i.route.id]:null,f=null;s&&(f=i.route.errorElement||defaultErrorElement);let h=e.concat(a.slice(0,c+1)),R=()=>{let g;return u?g=f:i.route.Component?g=reactExports.createElement(i.route.Component,null):i.route.element?g=i.route.element:g=l,reactExports.createElement(RenderedRoute,{match:i,routeContext:{outlet:l,matches:h,isDataRoute:s!=null},children:g})};return s&&(i.route.ErrorBoundary||i.route.errorElement||c===0)?reactExports.createElement(RenderErrorBoundary,{location:s.location,revalidation:s.revalidation,component:f,error:u,children:R(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):R()},null)}var DataRouterHook$1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(DataRouterHook$1||{}),DataRouterStateHook$1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(DataRouterStateHook$1||{});function useDataRouterContext$1(t){let e=reactExports.useContext(DataRouterContext);return e||invariant(!1),e}function useDataRouterState(t){let e=reactExports.useContext(DataRouterStateContext);return e||invariant(!1),e}function useRouteContext(t){let e=reactExports.useContext(RouteContext);return e||invariant(!1),e}function useCurrentRouteId(t){let e=useRouteContext(),s=e.matches[e.matches.length-1];return s.route.id||invariant(!1),s.route.id}function useLoaderData(){let t=useDataRouterState(DataRouterStateHook$1.UseLoaderData),e=useCurrentRouteId(DataRouterStateHook$1.UseLoaderData);if(t.errors&&t.errors[e]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+e+")");return}return t.loaderData[e]}function useRouteError(){var t;let e=reactExports.useContext(RouteErrorContext),s=useDataRouterState(DataRouterStateHook$1.UseRouteError),r=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return e||((t=s.errors)==null?void 0:t[r])}function useNavigateStable(){let{router:t}=useDataRouterContext$1(DataRouterHook$1.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),s=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{s.current=!0}),reactExports.useCallback(function(n,a){a===void 0&&(a={}),s.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,_extends$9({fromRouteId:e},a)))},[t,e])}function Outlet(t){return useOutlet(t.context)}function Route(t){invariant(!1)}function Router$1(t){let{basename:e="/",children:s=null,location:r,navigationType:n=Action.Pop,navigator:a,static:o=!1}=t;useInRouterContext()&&invariant(!1);let l=e.replace(/^\/*/,"/"),i=reactExports.useMemo(()=>({basename:l,navigator:a,static:o}),[l,a,o]);typeof r=="string"&&(r=parsePath(r));let{pathname:c="/",search:u="",hash:f="",state:h=null,key:R="default"}=r,g=reactExports.useMemo(()=>{let m=stripBasename(c,l);return m==null?null:{location:{pathname:m,search:u,hash:f,state:h,key:R},navigationType:n}},[l,c,u,f,h,R,n]);return g==null?null:reactExports.createElement(NavigationContext.Provider,{value:i},reactExports.createElement(LocationContext.Provider,{children:s,value:g}))}new Promise(()=>{});function createRoutesFromChildren(t,e){e===void 0&&(e=[]);let s=[];return reactExports.Children.forEach(t,(r,n)=>{if(!reactExports.isValidElement(r))return;let a=[...e,n];if(r.type===reactExports.Fragment){s.push.apply(s,createRoutesFromChildren(r.props.children,a));return}r.type!==Route&&invariant(!1),!r.props.index||!r.props.children||invariant(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=createRoutesFromChildren(r.props.children,a)),s.push(o)}),s}function mapRouteProperties(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:reactExports.createElement(t.Component),Component:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:reactExports.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},_extends$8.apply(this,arguments)}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var s={},r=Object.keys(t),n,a;for(a=0;a<r.length;a++)n=r[a],!(e.indexOf(n)>=0)&&(s[n]=t[n]);return s}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,e){return t.button===0&&(!e||e==="_self")&&!isModifiedEvent(t)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],_excluded2=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"];function createHashRouter(t,e){return createRouter({basename:e==null?void 0:e.basename,future:_extends$8({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:createHashHistory({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||parseHydrationData(),routes:t,mapRouteProperties,window:e==null?void 0:e.window}).initialize()}function parseHydrationData(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=_extends$8({},e,{errors:deserializeErrors(e.errors)})),e}function deserializeErrors(t){if(!t)return null;let e=Object.entries(t),s={};for(let[r,n]of e)if(n&&n.__type==="RouteErrorResponse")s[r]=new ErrorResponseImpl(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let a=window[n.__subType];if(typeof a=="function")try{let o=new a(n.message);o.stack="",s[r]=o}catch{}}if(s[r]==null){let a=new Error(n.message);a.stack="",s[r]=a}}else s[r]=n;return s}const ViewTransitionContext=reactExports.createContext({isTransitioning:!1}),FetchersContext=reactExports.createContext(new Map),START_TRANSITION="startTransition",startTransitionImpl=React[START_TRANSITION],FLUSH_SYNC="flushSync",flushSyncImpl=ReactDOM[FLUSH_SYNC];function startTransitionSafe(t){startTransitionImpl?startTransitionImpl(t):t()}function flushSyncSafe(t){flushSyncImpl?flushSyncImpl(t):t()}class Deferred{constructor(){this.status="pending",this.promise=new Promise((e,s)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",s(r))}})}}function RouterProvider(t){let{fallbackElement:e,router:s,future:r}=t,[n,a]=reactExports.useState(s.state),[o,l]=reactExports.useState(),[i,c]=reactExports.useState({isTransitioning:!1}),[u,f]=reactExports.useState(),[h,R]=reactExports.useState(),[g,m]=reactExports.useState(),E=reactExports.useRef(new Map),{v7_startTransition:p}=r||{},b=reactExports.useCallback(S=>{p?startTransitionSafe(S):S()},[p]),v=reactExports.useCallback((S,L)=>{let{deletedFetchers:T,unstable_flushSync:k,unstable_viewTransitionOpts:P}=L;T.forEach(_=>E.current.delete(_)),S.fetchers.forEach((_,K)=>{_.data!==void 0&&E.current.set(K,_.data)});let N=s.window==null||typeof s.window.document.startViewTransition!="function";if(!P||N){k?flushSyncSafe(()=>a(S)):b(()=>a(S));return}if(k){flushSyncSafe(()=>{h&&(u&&u.resolve(),h.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let _=s.window.document.startViewTransition(()=>{flushSyncSafe(()=>a(S))});_.finished.finally(()=>{flushSyncSafe(()=>{f(void 0),R(void 0),l(void 0),c({isTransitioning:!1})})}),flushSyncSafe(()=>R(_));return}h?(u&&u.resolve(),h.skipTransition(),m({state:S,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(l(S),c({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[s.window,h,u,E,b]);reactExports.useLayoutEffect(()=>s.subscribe(v),[s,v]),reactExports.useEffect(()=>{i.isTransitioning&&!i.flushSync&&f(new Deferred)},[i]),reactExports.useEffect(()=>{if(u&&o&&s.window){let S=o,L=u.promise,T=s.window.document.startViewTransition(async()=>{b(()=>a(S)),await L});T.finished.finally(()=>{f(void 0),R(void 0),l(void 0),c({isTransitioning:!1})}),R(T)}},[b,o,u,s.window]),reactExports.useEffect(()=>{u&&o&&n.location.key===o.location.key&&u.resolve()},[u,h,n.location,o]),reactExports.useEffect(()=>{!i.isTransitioning&&g&&(l(g.state),c({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),m(void 0))},[i.isTransitioning,g]);let d=reactExports.useMemo(()=>({createHref:s.createHref,encodeLocation:s.encodeLocation,go:S=>s.navigate(S),push:(S,L,T)=>s.navigate(S,{state:L,preventScrollReset:T==null?void 0:T.preventScrollReset}),replace:(S,L,T)=>s.navigate(S,{replace:!0,state:L,preventScrollReset:T==null?void 0:T.preventScrollReset})}),[s]),w=s.basename||"/",C=reactExports.useMemo(()=>({router:s,navigator:d,static:!1,basename:w}),[s,d,w]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:C},reactExports.createElement(DataRouterStateContext.Provider,{value:n},reactExports.createElement(FetchersContext.Provider,{value:E.current},reactExports.createElement(ViewTransitionContext.Provider,{value:i},reactExports.createElement(Router$1,{basename:w,location:n.location,navigationType:n.historyAction,navigator:d},n.initialized?reactExports.createElement(DataRoutes,{routes:s.routes,state:n}):e))))),null)}function DataRoutes(t){let{routes:e,state:s}=t;return useRoutesImpl(e,void 0,s)}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function(e,s){let{onClick:r,relative:n,reloadDocument:a,replace:o,state:l,target:i,to:c,preventScrollReset:u,unstable_viewTransition:f}=e,h=_objectWithoutPropertiesLoose(e,_excluded),{basename:R}=reactExports.useContext(NavigationContext),g,m=!1;if(typeof c=="string"&&ABSOLUTE_URL_REGEX.test(c)&&(g=c,isBrowser))try{let v=new URL(window.location.href),d=c.startsWith("//")?new URL(v.protocol+c):new URL(c),w=stripBasename(d.pathname,R);d.origin===v.origin&&w!=null?c=w+d.search+d.hash:m=!0}catch{}let E=useHref(c,{relative:n}),p=useLinkClickHandler(c,{replace:o,state:l,target:i,preventScrollReset:u,relative:n,unstable_viewTransition:f});function b(v){r&&r(v),v.defaultPrevented||p(v)}return reactExports.createElement("a",_extends$8({},h,{href:g||E,onClick:m||a?r:b,ref:s,target:i}))}),NavLink=reactExports.forwardRef(function(e,s){let{"aria-current":r="page",caseSensitive:n=!1,className:a="",end:o=!1,style:l,to:i,unstable_viewTransition:c,children:u}=e,f=_objectWithoutPropertiesLoose(e,_excluded2),h=useResolvedPath(i,{relative:f.relative}),R=useLocation(),g=reactExports.useContext(DataRouterStateContext),{navigator:m}=reactExports.useContext(NavigationContext),E=g!=null&&useViewTransitionState(h)&&c===!0,p=m.encodeLocation?m.encodeLocation(h).pathname:h.pathname,b=R.pathname,v=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(b=b.toLowerCase(),v=v?v.toLowerCase():null,p=p.toLowerCase());const d=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let w=b===p||!o&&b.startsWith(p)&&b.charAt(d)==="/",C=v!=null&&(v===p||!o&&v.startsWith(p)&&v.charAt(p.length)==="/"),S={isActive:w,isPending:C,isTransitioning:E},L=w?r:void 0,T;typeof a=="function"?T=a(S):T=[a,w?"active":null,C?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let k=typeof l=="function"?l(S):l;return reactExports.createElement(Link$1,_extends$8({},f,{"aria-current":L,className:T,ref:s,style:k,to:i,unstable_viewTransition:c}),typeof u=="function"?u(S):u)});var DataRouterHook;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useDataRouterContext(t){let e=reactExports.useContext(DataRouterContext);return e||invariant(!1),e}function useLinkClickHandler(t,e){let{target:s,replace:r,state:n,preventScrollReset:a,relative:o,unstable_viewTransition:l}=e===void 0?{}:e,i=useNavigate(),c=useLocation(),u=useResolvedPath(t,{relative:o});return reactExports.useCallback(f=>{if(shouldProcessLinkClick(f,s)){f.preventDefault();let h=r!==void 0?r:createPath(c)===createPath(u);i(t,{replace:h,state:n,preventScrollReset:a,relative:o,unstable_viewTransition:l})}},[c,i,u,r,n,s,t,a,o,l])}function useViewTransitionState(t,e){e===void 0&&(e={});let s=reactExports.useContext(ViewTransitionContext);s==null&&invariant(!1);let{basename:r}=useDataRouterContext(DataRouterHook.useViewTransitionState),n=useResolvedPath(t,{relative:e.relative});if(!s.isTransitioning)return!1;let a=stripBasename(s.currentLocation.pathname,r)||s.currentLocation.pathname,o=stripBasename(s.nextLocation.pathname,r)||s.nextLocation.pathname;return matchPath(n.pathname,o)!=null||matchPath(n.pathname,a)!=null}const links={welcome:{title:"Welcome",path:"/welcome",iconCls:"bi bi-house",order:1,hidden:!0},courses:{title:"Courses",path:"/course",iconCls:"bi bi-bookmark",order:2,hasChild:!0,useModel:!0,model:"Course",modelListMethod:"getList",displayField:"title",slugField:"slug",childRoutePath:"/manager/{SLUG_VALUE}",childIconCls:"fa fa-bookmark-o"},download:{title:"Download",path:"/download",iconCls:"bi bi-download",order:3,hidden:!0},setting:{title:"Setting",path:"/setting",iconCls:"bi bi-gear",order:4,hidden:!0},test:{title:"Tests",path:"/tests",iconCls:"bi bi-building-gear",order:4,hidden:!0,hasChild:!0,childItems:{"find-ds":{title:"findDS",path:"/tests/find-ds",iconCls:"bi bi-search",order:0},"native-client":{title:"nativeClient",path:"/tests/native-client",iconCls:"bi bi-node",order:0},"course-api-new":{title:"New CourseApi",path:"/tests/course-api",iconCls:"bi bi-bookmark",order:0}}},database:{title:"Database Explorer",path:"/database",iconCls:"fa fa-database",order:5,hidden:0,hasChild:!0,childItems:{author:{title:"Author",path:"/database/author",iconCls:"fa fa-database",order:0},"exercise-file":{title:"ExerciseFile",path:"/database/exercise-file",iconCls:"fa fa-database",order:0},"stream-location":{title:"StreamLocation",path:"/database/stream-location",iconCls:"fa fa-database",order:0},transcript:{title:"Transcript",path:"/database/transcript",iconCls:"fa fa-database",order:0},"download-state":{title:"DownloadState",path:"/database/download-state",iconCls:"fa fa-database",order:0},"download-config":{title:"DownloadConfig",path:"/database/download-config",iconCls:"fa fa-database",order:0},section:{title:"Section",path:"/database/section",iconCls:"fa fa-database",order:0},toc:{title:"Toc",path:"/database/toc",iconCls:"fa fa-database",order:0},course:{title:"Course",path:"/database/course",iconCls:"fa fa-database",order:0},download:{title:"Download",path:"/database/download",iconCls:"fa fa-database",order:0},"dm-setup":{title:"DMSetup",path:"/database/dm-setup",iconCls:"fa fa-database",order:0},"dm-status":{title:"DMStatus",path:"/database/dm-status",iconCls:"fa fa-database",order:0},cookie:{title:"Cookie",path:"/database/cookie",iconCls:"fa fa-database",order:0}}},"bootstrap-icons":{title:"Bootstrap Icons",path:"/bootstrap-icons",iconCls:"bi bi-bootstrap",order:5,hidden:!0}},side_menu={links};function SideBar({store:t,config:e,showSidebar:s}){const r="hs-overlay hs-overlay-open:translate-x-0 -translate-x-full transition-all duration-300 transform fixed top-0 left-0 bottom-0 z-[60] w-64 bg-white border-r border-gray-200 pt-7 pb-10 overflow-y-auto scrollbar-y lg:block lg:translate-x-0 lg:right-auto lg:bottom-0 dark:scrollbar-y dark:bg-gray-800 dark:border-gray-700",n="flex items-center gap-x-3.5 py-2 px-2.5 bg-gray-100 text-sm text-slate-700 rounded-md dark:bg-gray-900 dark:text-white",a="flex items-center gap-x-3.5 py-2 px-2.5  hover:bg-gray-100 text-sm text-slate-700 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700  dark:text-white",[o,l]=reactExports.useState(!1);reactExports.useState(!0);const[i,c]=reactExports.useState(side_menu.links),u=()=>{const R=!o;l(R),e.getUiConfig().setHiddenSidebarStatus(R)},f=R=>{console.log("SideBar.reloadSidebar()"),c({}),setTimeout(g=>c(side_menu.links),100)};reactExports.useEffect(()=>{e.getUiConfig().applyHiddenSidebarStatus(l),e.getUiConfig().applyReloadSidebar(R=>{f()},"sidebar")},[]);const h=({isActive:R,isPending:g})=>R?n:a;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{onClick:R=>u(),type:"button",className:"py-3 px-4 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600","aria-controls":"docs-sidebar","aria-label":"Toggle navigation",children:[jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Toggle Navigation"}),jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"})})]}),jsxRuntimeExports.jsxs("div",{id:"docs-sidebar",className:r+" "+(o?"hidden":""),style:o?{display:"none"}:{},children:[jsxRuntimeExports.jsx("div",{className:"px-6",children:jsxRuntimeExports.jsx("a",{className:"flex-none text-xl font-semibold dark:text-white",href:"#home","aria-label":"Brand",children:jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("img",{src:appLogo})," ",jsxRuntimeExports.jsx("div",{className:"m-3",children:"LLFecther"})]})})}),jsxRuntimeExports.jsxs("nav",{className:"hs-accordion-group p-6 w-full flex flex-col flex-wrap",children:[jsxRuntimeExports.jsx("div",{style:{zIndex:15},className:"relative",children:jsxRuntimeExports.jsx("button",{className:"dark:text-white absolute -right-4 my-32",onClick:u,children:jsxRuntimeExports.jsx("i",{className:"bi bi-chevron-left"})})}),jsxRuntimeExports.jsx("ul",{className:"space-y-1.5 transition-transform",children:Object.keys(i).map((R,g)=>{const m=side_menu.links[R];if(m.hidden)return"";if(m.hasChild){if(m.title,m.childItems){const E=jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("ul",{className:"children-menus my-2",children:Object.keys(m.childItems).map((p,b)=>{const v=m.childItems[p];return jsxRuntimeExports.jsx("li",{className:"px-2",children:jsxRuntimeExports.jsxs(NavLink,{className:h,to:v.path,children:[jsxRuntimeExports.jsx("i",{className:v.iconCls})," ",v.title]})},b)})})});return jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsxs(NavLink,{className:h,to:m.path,children:[jsxRuntimeExports.jsx("i",{className:m.iconCls})," ",m.title]}),E]},g)}else if(m.useModel&&m.model){const E=m.model,p=t.get(E);if(p&&m.modelListMethod){const b=m.modelListMethod;try{const v=p[b](),d=jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("ul",{className:"children-menus my-2",children:v.map((w,C)=>{const S=w[m.displayField],L=m.childRoutePath.replace(/{SLUG_VALUE}/,w[m.slugField]);return jsxRuntimeExports.jsx("li",{className:"px-2",children:jsxRuntimeExports.jsxs(NavLink,{className:h,to:L,children:[jsxRuntimeExports.jsx("i",{className:m.childIconCls})," ",S]})},C)})})});return jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsxs(NavLink,{className:h,to:m.path,children:[jsxRuntimeExports.jsx("i",{className:m.iconCls})," ",m.title]}),d]},g)}catch(v){console.error(v)}}}}return jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(NavLink,{className:h,to:m.path,children:[jsxRuntimeExports.jsx("i",{className:m.iconCls})," ",m.title]})},g)})})]})]})]})}class DialogContent extends reactExports.Component{constructor(e){super(e),this.btnOpenModelRef=reactExports.createRef(null),this.state={message:"",title:"",mode:"alert"}}alert(e,s){this.setState({title:e,message:s,mode:"alert"}),this.btnOpenModelRef.current.click()}render(){const{message:e,title:s}=this.state;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{style:{display:"none"},type:"button",ref:this.btnOpenModelRef,className:"py-3 px-4 inline-flex justify-center items-center gap-2 rounded-lg border border-transparent font-semibold bg-white text-slate-800 hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all text-sm dark:bg-slate-800 dark:text-white dark:focus:ring-offset-gray-800","data-hs-overlay":"#hs-basic-modal",children:"Open modal"}),jsxRuntimeExports.jsx("div",{id:"hs-basic-modal",className:"hs-overlay hidden w-full h-full fixed top-0 left-0 z-[60] overflow-x-hidden overflow-y-auto",children:jsxRuntimeExports.jsx("div",{className:"hs-overlay-open:opacity-100 hs-overlay-open:duration-500 opacity-0 transition-all sm:max-w-lg sm:w-full m-3 sm:mx-auto",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-white border shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center py-3 px-4 border-b dark:border-gray-700",children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white",children:[s,"        "]}),jsxRuntimeExports.jsxs("button",{type:"button",className:"inline-flex flex-shrink-0 justify-center items-center h-8 w-8 rounded-md text-gray-500 hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 focus:ring-offset-white transition-all text-sm dark:focus:ring-gray-700 dark:focus:ring-offset-gray-800","data-hs-overlay":"#hs-basic-modal",children:[jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close"}),jsxRuntimeExports.jsx("svg",{className:"w-3.5 h-3.5",width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M0.258206 1.00652C0.351976 0.912791 0.479126 0.860131 0.611706 0.860131C0.744296 0.860131 0.871447 0.912791 0.965207 1.00652L3.61171 3.65302L6.25822 1.00652C6.30432 0.958771 6.35952 0.920671 6.42052 0.894471C6.48152 0.868271 6.54712 0.854471 6.61352 0.853901C6.67992 0.853321 6.74572 0.865971 6.80722 0.891111C6.86862 0.916251 6.92442 0.953381 6.97142 1.00032C7.01832 1.04727 7.05552 1.1031 7.08062 1.16454C7.10572 1.22599 7.11842 1.29183 7.11782 1.35822C7.11722 1.42461 7.10342 1.49022 7.07722 1.55122C7.05102 1.61222 7.01292 1.6674 6.96522 1.71352L4.31871 4.36002L6.96522 7.00648C7.05632 7.10078 7.10672 7.22708 7.10552 7.35818C7.10442 7.48928 7.05182 7.61468 6.95912 7.70738C6.86642 7.80018 6.74102 7.85268 6.60992 7.85388C6.47882 7.85498 6.35252 7.80458 6.25822 7.71348L3.61171 5.06702L0.965207 7.71348C0.870907 7.80458 0.744606 7.85498 0.613506 7.85388C0.482406 7.85268 0.357007 7.80018 0.264297 7.70738C0.171597 7.61468 0.119017 7.48928 0.117877 7.35818C0.116737 7.22708 0.167126 7.10078 0.258206 7.00648L2.90471 4.36002L0.258206 1.71352C0.164476 1.61976 0.111816 1.4926 0.111816 1.36002C0.111816 1.22744 0.164476 1.10028 0.258206 1.00652Z",fill:"currentColor"})})]})]}),jsxRuntimeExports.jsx("div",{className:"p-4 overflow-y-auto",children:jsxRuntimeExports.jsx("p",{className:"mt-1 text-gray-800 dark:text-gray-400",children:e})}),jsxRuntimeExports.jsx("div",{className:"flex justify-end items-center gap-x-2 py-3 px-4 border-t dark:border-gray-700",children:jsxRuntimeExports.jsx("button",{type:"button",className:"py-3 px-4 inline-flex justify-center items-center gap-2 rounded-md border font-medium bg-white text-gray-700 shadow-sm align-middle hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-blue-600 transition-all text-sm dark:bg-slate-900 dark:hover:bg-slate-800 dark:border-gray-700 dark:text-gray-400 dark:hover:text-white dark:focus:ring-offset-gray-800","data-hs-overlay":"#hs-basic-modal",children:"Close"})})]})})})]})}}function Template({store:t,config:e}){const[s,r]=reactExports.useState(!1),n=reactExports.useRef(null);reactExports.useEffect(()=>{e.getUiConfig().applyHiddenSidebarStatus(r,o=>{console.log(o),r(o)},"template")},[]),window.dialogContentRef=n;const a="w-full px-4 sm:px-6 md:px-8 dark:scrollbar-y dark:bg-gray-800 dark:border-gray-700 text-gray-800 dark:text-gray-200";return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SideBar,{config:e,store:t}),jsxRuntimeExports.jsxs("div",{id:"main-content",className:a+" px-4 "+(s?"lg:pl-18":"lg:pl-72"),children:[jsxRuntimeExports.jsx(DialogContent,{ref:n}),jsxRuntimeExports.jsx(Outlet,{})]})]})}const slugify=t=>t.normalize("NFKD").replace(/[^\w\s-]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/^-+|-+$/g,""),slugToTitle=t=>{var e=t.split("-"),s=e.map(function(r){return r.charAt(0).toUpperCase()+r.slice(1)});return s.join(" ")},getNText=(t,e)=>{let s=t,r=e,n="";if(Array.isArray(e)){let a=r.length-1,o=0,l=s,i=!1;for(let c of r){let u=l.find(c);if(u.length===0||i)break;o>=a?u.length>0&&(n=u.text()):l=u,o+=1}}else{let a=s.find(r);a.length>0&&(n=a.text())}return n},getAuthors=async(t,e,s,r)=>{let n=e.getListByCourse(r);if(n.length==0){const[a,o]=getCourseXmlParentElement(t);let l=a.find("authors");l.length==0&&(l=a.find("star_authorsv2"));for(const i of l){let c=jQuery(i).text(),u=t.find(`entityUrn:contains('${c}')`);if(u=u.filter((f,h)=>jQuery(h).text().trim().match(/urn:li:learningApiAuthor:/)),u.length>0)for(const f of u){const h=jQuery(f),R=h.text().trim();if(R.length>0&&R==c){let g=h.parent(),m=getNText(g,"slug"),E=slugToTitle(m),p=getNText(g,["biographyV2","text"]),b=getNText(g,["shortBiographyV2","text"]),v=await e.create(E,m,p,b,r.id);v&&await s.addAuthorId(r.id,v.id),n.push(v)}}}}return n},getCourseInfo=async(t,e,s,r)=>{let n=s.getBySlug(e);if(n)return n.exerciseFiles=r.getListByCourseId(n.id),n;const[a,o]=getCourseXmlParentElement(t);if(a){let l=a.find("slug").text();console.log(`course slug found : ${l}`),n={url:`https://www.linkedin.com/learning/${e}`,slug:e,exerciseFiles:[],sourceCodeRepository:null,description:null,urn:o},n.title=a.find("title").text(),n.visibility=a.find("visibility").text();let i=a.find("viewerCounts");i.length>0&&(n.viewerCounts=parseInt(i.find("total").text())),n.description=a.find("description").text(),n.descriptionV2=a.find("descriptionV2").text(),n.descriptionV2&&(n.description=n.descriptionV2),a.find("duration").length>0&&(n.duration=parseInt(a.find("duration").text()));let u=a.find("dificulty");u.length>0&&(n.dificulty=u.find("difficultylevel").text());let f=a.find("descriptionV3");f.length>0&&(n.descriptionv3=f.text(),n.descriptionV3&&(n.description=n.descriptionV3));let h=a.find("sourceCodeRepository");if(h.length>0){const w=h.text();isValidUrl(w)&&(n.sourceCodeRepository=w)}let R=["sizeInBytes","name","url"],g=a.find("exerciseFiles"),m=[];if(g.length>0)for(const w of g){const C=jQuery(w);console.log(C.html());const S={};for(let L in R){const T=R[L];let k=C.find(T);if(k.length>0){const P=k.text().trim();T=="sizeInBytes"?S[T]=parseInt(P):S[T]=P}}m.push(S)}const{title:E,slug:p,sourceCodeRepository:b,description:v,urn:d}=n;if(n=await s.create(E,p,n.duration,b,v,d),n.exerciseFiles=[],m.length>0)for(let w in m)try{const C=m[w];if(C.name.length>0){const{sizeInBytes:S,name:L,url:T}=C,k=await r.create(L,T,S,n.id);n.exerciseFiles.push(k)}}catch(C){console.error(C)}return n}return null},getCourseSections=async(t,e,s,r)=>{let n=s.getListByCourseId(r);if(n.length>0)return n;let a=t.find("contents");a.length==0&&(a=t.find("contentsderived")),n=[];for(const o of a){const l=jQuery(o).text().trim();let i=e.find(`cachingKey:contains('${l}')`);if(i.length>0)for(const c of i){const u=jQuery(c);if(u.text().trim()==l){let h=u.parent(),R=h.find("title");if(R.length>0){const g=R.text(),m=slugify(g);let E={title:g,itemStars:[],slug:m},p=h.find("star_items");if(p.length==0&&(p=h.find("star_video")),p.length>0)for(const C of p){const S=jQuery(C).text().trim(),L="urn:li:learningApiTocItem:urn:li:learningApiAssessmen";S.match(L)||S.length>0&&E.itemStars.push(S)}const{title:b,itemStars:v,slug:d}=E,w=await s.create(b,d,r,v);n.push(w)}}}}return n},isValidUrl=t=>{var e=/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/;return e.test(t)},courseUrlFromSlug=t=>`https://www.linkedin.com/learning/${t}`,authorUrlFromSlug=t=>`https://www.linkedin.com/learning/instructors/${t}`,sanitizeKeys=t=>{if(Array.isArray(t))return t.map(s=>typeof s=="object"?sanitizeKeys(s):s);let e={};for(const s in t)if(t.hasOwnProperty(s)){let r=s.replace(/^\$/,"");r=r.replace(/^\@/,""),r=r.replace(/^\#/,""),r=r.replace(/^\*/,"star_"),r=/^\d/.test(r)?`child_element_${r}`:r,typeof t[s]=="object"?e[r]=sanitizeKeys(t[s]):e[r]=t[s]}return e},OBJtoXML=t=>{var r="";for(var e in t){if(r+="<"+e+">",Array.isArray(t[e]))for(var s of t[e])r+="</"+e+">",r+="<"+e+">",r+=OBJtoXML(new Object(s));else typeof t[e]=="object"&&typeof t[e]!="string"?r+=OBJtoXML(new Object(t[e])):r+=t[e];r+="</"+e+">"}var r=r.replace(/<\/?[0-9]{1,}>/g,"");return r},convertJsonToXml=t=>{const e=sanitizeKeys({schema:t});return OBJtoXML({root:e})},parseJsonSchema=t=>{jQuery.expr[":"].containsRegex=jQuery.expr.createPseudo(function(o){var l=new RegExp(o,"i");return function(i){return l.test(jQuery(i).text())}});let e=null;const s=jQuery(`<div>${t}</div>`);s.find('a:containsRegex("sign in")').length>0&&(e="ERR_NO_LOGIN");const n=s.find("code");let a=[];if(!e)for(let o in n){let l=n[o];try{l.id.match(/^bpr-guid/)&&a.push(JSON.parse(l.textContent))}catch{}}return[a,e]},getTranscripts=async(t,e,s,r)=>{let n=r.getListByTocIdAsObject(s.id);if(n)return console.log("transcripts_get_from_m_transcript"),n;let a=[];t&&(a=t.find("transcripts"));const o=["captionFormat","isAutogenerated","captionFile"];for(const l of a){const i=jQuery(l),c=i.find("locale");if(c.length>0){const u=c.find("country");if(u.length>0){let f=u.text().trim().toLowerCase();n||(n={}),n[f]={country:f};const h=c.find("lang");h.length>0&&(n[f].lang=h.text().trim());for(const v of o){const d=i.find(v);if(d.length>0){let w=d.text().trim();v==="isAutogenerated"&&(w=w==="true"?1:0),n[f][v]=w}}const R={lang:f,country:n[f].country,fmt:n[f].captionFormat,url:n[f].captionFile,autoGenerated:n[f].isAutogenerated},{country:g,fmt:m,url:E,autoGenerated:p}=R,b=await r.create(s.id,f,g,m,E,p);n[f]=b}}}return n},getStreamLocations=async(t,e,s)=>{let r=s.getListByTocId(e.id);if(r.length>0)return console.log("stream_locations_get_from_m_stream_location"),r;let n=[];t&&(n=t.find("progressiveStreams"));const a=["size","bitRate","width","height"];if(n.length>0)for(const o of n){const l=jQuery(o);let i=l.find("height");if(i.length>0){i=i.text().trim(),i==="0"&&(i="audio"),r||(r={}),r[i]={};const c=l.find("streamingLocations");if(c.length>0){const u=c.find("url");u.length>0&&(r[i].url=u.text().trim());const f=c.find("expiresAt");f.length>0&&(r[i].expiresAt=parseInt(f.text().trim())/1e3);for(const g of a){const m=c.find(g);m.length>0&&(r[i][g]=parseInt(m.text().trim()))}const h={fmt:i,url:r[i].url,expiresAt:r[i].expiresAt},R=await s.create(i,h.url,e.id,h.expiresAt);r[i]=R}}}return r},getCourseToc=async(t,e,s,r,n,a)=>{let o=s.getByItemStar(t);if(o)return o;let l=getTocXmlParentElement(t,e);if(!l)return null;o={streamLocations:null,transcripts:null};let i=l.find("slug");if(i.length>0){let p=i.text();o.slug=p,o.url=`https://www.linkedin.com/learning/${a}/${p}`}o.title=l.find("title").text(),o.visibility=l.find("visibility").text(),o.duration=parseInt(l.find("duration").text());let c=l.find("star_lyndaVideoViewingStatus").text().trim();c.length==0&&(c=l.find("star_interactionstatusv2").text().trim()),o.vStatusUrn=c;const{title:u,slug:f,url:h,duration:R,captionUrl:g,captionFmt:m}=o,E=await s.create(u,f,h,R,g,m,n.id,t,c);if(E){const{tocIds:p}=n;p.includes(E.id)||(p.push(E.id),await r.updateTocIds(n.id,p)),n.tocIds=p}return E},getTocXmlParentElement=(t,e)=>{if(!e)return null;let s=e.find(`cachingKey:contains('${t}')`),r=null;if(s.length>1)for(const n of s){const a=jQuery(n);let o=a.parent();if(a.text().trim()===t){console.log(o.html());let i=o.find(">type");if(i.length>0&&(i=i.text().trim(),i==="com.linkedin.learning.api.deco.content.Video"))return s=a.closest("included"),s}}if(console.log(s.html()),s.length>0){let a=s.parent().find("content");if(a.length>0)if(a=a.find("video"),a.length>0){const o=a.text().trim();let l=e.find(`entityUrn:contains('${o}')`);if(l.length>0)for(const i of l){const c=jQuery(i);c.text().trim()==o&&(r=c.closest("included"))}}else console.error(`could_not_find_video_urn: ${t}`);else console.error(`could_not_find_video_entity_urn : ${t}`)}else console.error(`could_not_find_toc_nd : ${t}`);return r},getCourseXmlParentElement=t=>{if(!t)return[null,null];let e=null,s=null,r=t.find("star_elements:contains('urn:li:learningApiCourse:')");if(r.length==0&&(r=t.find("entityUrn")),r.length>0){s=r.text();let n=t.find(`entityUrn:contains('${s}')`);for(const a of n)if(jQuery(a).text()==s){e=jQuery(a).closest("included");break}}return[e,s]},getVideoMetaNd=(t,e)=>{let s=null,r=e.find(`star_lyndaVideoViewingStatus:contains('${t}')`);e.find("status:contains('429')");const n=e.find("status"),a=[];for(const l of n)a.push(parseInt(jQuery(l).text()));r.length==0&&(console.error("A"),console.error(`could_not_find_v_status_lookup : ${t}`),t=t.replace("urn:li:lyndaVideoViewingStatus:",""),r=e.find(`trackingUrn:contains('${t}')`)),r.length==0&&(console.error("B"),console.error(`could_not_find_v_status_lookup : ${t}`),r=e.find(`star_interactionstatusv2:contains('${t}')`));let o=-1;if(r.length>0){let l=!1;for(const i of r){const c=jQuery(i).parent();if(s=c.find("presentation"),s.length==0&&(s=c.find("presentationDerived")),o=0,s.length>0&&(o+=1,s=s.find("videoPlay"),s.length>0&&(o+=1,s=s.find("videoPlayMetadata"),l=!0,a.push(200))),l)break}}return s||(console.error(`could_not_find_v_meta_data_nd_pos : ${o}`),console.log("Try another method")),[s,a]};class CourseApi{constructor(e){Q(this,"store",null);Q(this,"course",null);Q(this,"sections",[]);Q(this,"courseXmlDoc",null);Q(this,"tocXmlDocs",{});Q(this,"authors",[]);Q(this,"mPrxCache",null);Q(this,"courseXmlDocFetchStatus",0);Q(this,"tocXmlDocFetchStatus",0);Q(this,"lastCourseXmlDocCacheKey",null);Q(this,"lastTocXmlDocCacheKey",null);this.store=e,this.mPrxCache=e.get("PrxCache")}informUnauthenticatedAccess(){alert("Please make sure you are logged in to LinkedIn Learning site !, This window will close in 10 second."),setTimeout(()=>{window.open("https://www.linkedin.com/learning/login?fromSignIn=true&trk=login-sign-in","_blank")},5e3),setTimeout(e=>{window.close()},1e4)}getCourseSlugFromUrl(e){const[s,r]=getCourseSlugFromUrl(e);return s}async getCourseInfo(e,s=!1){let r=null;return r||(r=await this.fetchCourseInfo(e,s)),r?this.course=r:this.store.get("PrxCache").unsetByKey(this.lastCourseXmlDocCacheKey),r}async fetchWithRetry(e){let s=!1,r=0,n=0,a=0,o={ok:!1,status:0,text:l=>""};for(;!s;){r>0&&console.log(`retry ${r}`),n>0&&(console.log(`wait for ${n} second`),setTimeout(()=>{},n*1e3));try{o=await fetch(e),a=o.status}catch(l){console.error(l)}if(a!=200?(r+=1,n+=5):(s=!0,n=0),r>3){console.log(`retry counts reached max : ${r}`),n=0;break}}return o}async getXmlDoc(e,s=!1,r=null){let n=null;const a=await this.mPrxCache.get(e);let o=null,l=0;if(!a.isEmpty())o=a.getCacheContent(),l=a.getStatusCode();else try{let i=await this.fetchWithRetry(e);l=i.status,i.ok&&(o=await i.text(),l==200&&this.mPrxCache.set(e,o,l))}catch(i){console.error(i)}if(r&&(this[r]=l),o){const[i,c]=parseJsonSchema(o);console.log(c),c?c=="ERR_NO_LOGIN"&&this.informUnauthenticatedAccess():n=jQuery(convertJsonToXml(i))}return[n,a.getKey()]}async getCourseXmlDoc(e,s=!1){let r=this.courseXmlDoc;if(!r){const[n,a]=await this.getXmlDoc(e,s,"courseXmlDocFetchStatus");this.lastCourseXmlDocCacheKey=a,r=n,this.courseXmlDoc=r}return r}async getTocXmlDoc(e,s,r=!1){let n=null;if(typeof this.tocXmlDocs[e]<"u"&&(n=this.tocXmlDocs[e]),!n){const[a,o]=await this.getXmlDoc(s,r,"tocXmlDocFetchStatus");this.lastTocXmlDocCacheKey=o,n=a,this.tocXmlDocs[e]=n}return n}async getAuthors(e){let s=[];if(this.course&&(s=this.authors,s.length>0&&(s=this.authors)),s.length==0){const r=courseUrlFromSlug(e),n=await this.getCourseXmlDoc(r);s=await getAuthors(n,this.store.get("Author"),this.store.get("Course"),this.course),this.authors=s}return s}async fetchCourseInfo(e,s=!1){let r=!s;const n=courseUrlFromSlug(e);let a=await this.getCourseXmlDoc(n,r);return await getCourseInfo(a,e,this.store.get("Course"),this.store.get("ExerciseFile"))}async getCourseSections(e){let s=null;const r=this.store.get("Section");if(this.course||(this.course=await this.fetchCourseInfo(e)),this.sections&&this.sections.length>0)return this.sections;let n=courseUrlFromSlug(e),a=await this.getCourseXmlDoc(n);if(a){const[o,l]=getCourseXmlParentElement(a);o?(s=await getCourseSections(o,a,r,this.course.id),this.sections=s):console.error("Could not get course xml parent element")}else console.error("Could not get course xml doc");return s}async getCourseTocs(e){const s=this.store.get("Toc"),r=this.store.get("Section");let n=null,a=this.sections;if(a.length==0&&(a=await this.getCourseSections(e)),a.length>0){n={};for(const o of a){let l=o.slug;if(n[l]=[],n[l].length==0){const i=courseUrlFromSlug(e);let c=await this.getCourseXmlDoc(i);if(c){const[u,f]=getCourseXmlParentElement(c);if(u){n[l]=[];for(const h of o.itemStars){let R=await getCourseToc(h,c,s,r,o,e);R&&n[l].push(R)}}else console.error("Could ! get course xml parent element")}else console.error("Could ! get course xml doc")}else console.log("toc[section_slug]s_get_from_m_toc")}}return n}async getStreamLocs(e,s=!1){const r=this.store.get("StreamLocation");let n=[],a=!1;s&&(await r.deleteByTocId(e.id),a=!0);const o=await this.getTocXmlDoc(e.slug,e.url,a);if(o){const[l,i]=getVideoMetaNd(e.vStatusUrn,o);l?n=await getStreamLocations(l,e,r):console.error("Could not get video metadata nd"),n.length==0&&this.store.get("PrxCache").unsetByKey(this.lastTocXmlDocCacheKey)}else console.error("Could not get toc xml doc");return n}async getTranscripts(e,s=!1){let r=null,n=!1;const a=this.store.get("Transcript");s&&(this.mTranscript.deleteByTocId(e.id),n=!0);const o=await this.getTocXmlDoc(e.slug,e.url,n);if(o){const[l,i]=getVideoMetaNd(e.vStatusUrn,o);l?r=await getTranscripts(l,o,e,a):console.error("Could not get video metadata nd"),r||this.store.get("PrxCache").unsetByKey(this.lastTocXmlDocCacheKey)}else console.error("Could not get toc xml doc");return r}}function isObject(t){return Object.prototype.toString.call(t)==="[object Object]"}function objectSize(t){return Array.isArray(t)?t.length:isObject(t)?Object.keys(t).length:0}function stringifyForCopying(t,e){if(typeof t=="string")return t;try{return JSON.stringify(t,(s,r)=>{switch(typeof r){case"bigint":return String(r)+"n";case"number":case"boolean":case"object":case"string":return r;default:return String(r)}},e)}catch(s){return`${s.name}: ${s.message}`||"JSON.stringify failed"}}function isCollapsed(t,e,s,r,n,a){if(a&&a.collapsed!==void 0)return!!a.collapsed;if(typeof r=="boolean")return r;if(typeof r=="number"&&e>r)return!0;const o=objectSize(t);if(typeof r=="function"){const l=safeCall(r,[{node:t,depth:e,indexOrName:s,size:o}]);if(typeof l=="boolean")return l}return!!(Array.isArray(t)&&o>n||isObject(t)&&o>n)}function ifDisplay(t,e,s){return typeof t=="boolean"?t:!!(typeof t=="number"&&e>t||t==="collapsed"&&s||t==="expanded"&&!s)}function safeCall(t,e){try{return t(...e)}catch(s){reportError(s)}}function editableAdd(t){if(t===!0||isObject(t)&&t.add===!0)return!0}function editableEdit(t){if(t===!0||isObject(t)&&t.edit===!0)return!0}function editableDelete(t){if(t===!0||isObject(t)&&t.delete===!0)return!0}function isReactComponent(t){return typeof t=="function"}function customAdd(t){return!t||t.add===void 0||!!t.add}function customEdit(t){return!t||t.edit===void 0||!!t.edit}function customDelete(t){return!t||t.delete===void 0||!!t.delete}function customCopy(t){return!t||t.enableClipboard===void 0||!!t.enableClipboard}function resolveEvalFailedNewValue(t,e){return t==="string"?e.trim().replace(/^\"([\s\S]+?)\"$/,"$1"):e}var _path$7;function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},_extends$7.apply(this,arguments)}var SvgAngleDown=function(e){return reactExports.createElement("svg",_extends$7({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"},e),_path$7||(_path$7=reactExports.createElement("path",{fill:"currentColor",d:"M12.473 5.806a.666.666 0 0 0-.946 0L8.473 8.86a.667.667 0 0 1-.946 0L4.473 5.806a.667.667 0 1 0-.946.94l3.06 3.06a2 2 0 0 0 2.826 0l3.06-3.06a.667.667 0 0 0 0-.94Z"})))},_path$6;function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},_extends$6.apply(this,arguments)}var SvgCopy=function(e){return reactExports.createElement("svg",_extends$6({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),_path$6||(_path$6=reactExports.createElement("path",{fill:"currentColor",d:"M17.542 2.5h-4.75a3.963 3.963 0 0 0-3.959 3.958v4.75a3.963 3.963 0 0 0 3.959 3.959h4.75a3.963 3.963 0 0 0 3.958-3.959v-4.75A3.963 3.963 0 0 0 17.542 2.5Zm2.375 8.708a2.378 2.378 0 0 1-2.375 2.375h-4.75a2.378 2.378 0 0 1-2.375-2.375v-4.75a2.378 2.378 0 0 1 2.375-2.375h4.75a2.378 2.378 0 0 1 2.375 2.375v4.75Zm-4.75 6.334a3.963 3.963 0 0 1-3.959 3.958h-4.75A3.963 3.963 0 0 1 2.5 17.542v-4.75a3.963 3.963 0 0 1 3.958-3.959.791.791 0 1 1 0 1.584 2.378 2.378 0 0 0-2.375 2.375v4.75a2.378 2.378 0 0 0 2.375 2.375h4.75a2.378 2.378 0 0 0 2.375-2.375.792.792 0 1 1 1.584 0Z"})))},_path$5,_path2$4;function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},_extends$5.apply(this,arguments)}var SvgCopied=function(e){return reactExports.createElement("svg",_extends$5({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),_path$5||(_path$5=reactExports.createElement("path",{fill:"currentColor",d:"M17.25 3H6.75A3.755 3.755 0 0 0 3 6.75v10.5A3.754 3.754 0 0 0 6.75 21h10.5A3.754 3.754 0 0 0 21 17.25V6.75A3.755 3.755 0 0 0 17.25 3Zm2.25 14.25a2.25 2.25 0 0 1-2.25 2.25H6.75a2.25 2.25 0 0 1-2.25-2.25V6.75A2.25 2.25 0 0 1 6.75 4.5h10.5a2.25 2.25 0 0 1 2.25 2.25v10.5Z"})),_path2$4||(_path2$4=reactExports.createElement("path",{fill:"#14C786",d:"M10.312 14.45 7.83 11.906a.625.625 0 0 0-.896 0 .659.659 0 0 0 0 .918l2.481 2.546a1.264 1.264 0 0 0 .896.381 1.237 1.237 0 0 0 .895-.38l5.858-6.011a.658.658 0 0 0 0-.919.625.625 0 0 0-.896 0l-5.857 6.01Z"})))};function CopyButton({node:t}){const[e,s]=reactExports.useState(!1);return e?jsxRuntimeExports.jsx(SvgCopied,{className:"json-view--copy",style:{display:"inline-block"}}):jsxRuntimeExports.jsx(SvgCopy,{onClick:r=>{const n=stringifyForCopying(t);r.stopPropagation(),navigator.clipboard.writeText(n),s(!0),setTimeout(()=>s(!1),3e3)},className:"json-view--copy"})}function NameValue({indexOrName:t,value:e,depth:s,parent:r,deleteHandle:n,editHandle:a}){return jsxRuntimeExports.jsxs("div",Object.assign({className:"json-view--pair"},{children:[jsxRuntimeExports.jsx("span",Object.assign({className:typeof t=="number"?"json-view--index":"json-view--property"},{children:t})),":"," ",jsxRuntimeExports.jsx(JsonNode,{node:e,depth:s+1,deleteHandle:n,editHandle:a,parent:r,indexOrName:t})]}))}var _path$4,_path2$3;function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},_extends$4.apply(this,arguments)}var SvgTrash=function(e){return reactExports.createElement("svg",_extends$4({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),_path$4||(_path$4=reactExports.createElement("path",{fill:"currentColor",d:"M18.75 6h-2.325a3.757 3.757 0 0 0-3.675-3h-1.5a3.757 3.757 0 0 0-3.675 3H5.25a.75.75 0 0 0 0 1.5H6v9.75A3.754 3.754 0 0 0 9.75 21h4.5A3.754 3.754 0 0 0 18 17.25V7.5h.75a.75.75 0 1 0 0-1.5Zm-7.5-1.5h1.5A2.255 2.255 0 0 1 14.872 6H9.128a2.255 2.255 0 0 1 2.122-1.5Zm5.25 12.75a2.25 2.25 0 0 1-2.25 2.25h-4.5a2.25 2.25 0 0 1-2.25-2.25V7.5h9v9.75Z"})),_path2$3||(_path2$3=reactExports.createElement("path",{fill:"#DA0000",d:"M10.5 16.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 1 0-1.5 0v4.5a.75.75 0 0 0 .75.75ZM13.5 16.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 1 0-1.5 0v4.5a.75.75 0 0 0 .75.75Z"})))},_path$3,_path2$2;function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},_extends$3.apply(this,arguments)}var SvgAddSquare=function(e){return reactExports.createElement("svg",_extends$3({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),_path$3||(_path$3=reactExports.createElement("path",{fill:"currentColor",d:"M21 6.75v10.5A3.754 3.754 0 0 1 17.25 21H6.75A3.754 3.754 0 0 1 3 17.25V6.75A3.754 3.754 0 0 1 6.75 3h10.5A3.754 3.754 0 0 1 21 6.75Zm-1.5 0c0-1.24-1.01-2.25-2.25-2.25H6.75C5.51 4.5 4.5 5.51 4.5 6.75v10.5c0 1.24 1.01 2.25 2.25 2.25h10.5c1.24 0 2.25-1.01 2.25-2.25V6.75Z"})),_path2$2||(_path2$2=reactExports.createElement("path",{fill:"#14C786",d:"M15 12.75a.75.75 0 1 0 0-1.5h-2.25V9a.75.75 0 1 0-1.5 0v2.25H9a.75.75 0 1 0 0 1.5h2.25V15a.75.75 0 1 0 1.5 0v-2.25H15Z"})))},_path$2,_path2$1;function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},_extends$2.apply(this,arguments)}var SvgDone=function(e){return reactExports.createElement("svg",_extends$2({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),_path$2||(_path$2=reactExports.createElement("path",{fill:"currentColor",d:"M12 3a9 9 0 1 0 9 9 9.01 9.01 0 0 0-9-9Zm0 16.5a7.5 7.5 0 1 1 7.5-7.5 7.509 7.509 0 0 1-7.5 7.5Z"})),_path2$1||(_path2$1=reactExports.createElement("path",{fill:"#14C786",d:"m10.85 13.96-1.986-2.036a.5.5 0 0 0-.716 0 .527.527 0 0 0 0 .735l1.985 2.036a1.01 1.01 0 0 0 .717.305.99.99 0 0 0 .716-.305l4.686-4.808a.526.526 0 0 0 0-.735.5.5 0 0 0-.716 0l-4.687 4.809Z"})))},_path$1,_path2;function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},_extends$1.apply(this,arguments)}var SvgCancel=function(e){return reactExports.createElement("svg",_extends$1({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),_path$1||(_path$1=reactExports.createElement("path",{fill:"#DA0000",d:"M15 9a.75.75 0 0 0-1.06 0L12 10.94 10.06 9A.75.75 0 0 0 9 10.06L10.94 12 9 13.94A.75.75 0 0 0 10.06 15L12 13.06 13.94 15A.75.75 0 0 0 15 13.94L13.06 12 15 10.06A.75.75 0 0 0 15 9Z"})),_path2||(_path2=reactExports.createElement("path",{fill:"currentColor",d:"M12 3a9 9 0 1 0 9 9 9.01 9.01 0 0 0-9-9Zm0 16.5a7.5 7.5 0 1 1 7.5-7.5 7.509 7.509 0 0 1-7.5 7.5Z"})))};function ObjectNode({node:t,depth:e,indexOrName:s,deleteHandle:r,customOptions:n}){const{collapsed:a,enableClipboard:o,collapseObjectsAfterLength:l,editable:i,onDelete:c,src:u,onAdd:f,onEdit:h,onChange:R,forceUpdate:g,displaySize:m}=reactExports.useContext(JsonViewContext),E=isObject(t),[p,b]=reactExports.useState(isCollapsed(t,e,s,a,l,n));reactExports.useEffect(()=>{b(isCollapsed(t,e,s,a,l,n))},[a,l]);const v=reactExports.useCallback((O,V,Y)=>{Array.isArray(t)?t[+O]=V:t&&(t[O]=V),h&&h({newValue:V,oldValue:Y,depth:e,src:u,indexOrName:O,parentType:E?"object":"array"}),R&&R({type:"edit",depth:e,src:u,indexOrName:O,parentType:E?"object":"array"}),g()},[t,h,R,g]),d=O=>{Array.isArray(t)?t.splice(+O,1):t&&delete t[O],g()},[w,C]=reactExports.useState(!1),S=()=>{C(!1),r&&r(s),c&&c({value:t,depth:e,src:u,indexOrName:s,parentType:E?"object":"array"}),R&&R({type:"delete",depth:e,src:u,indexOrName:s,parentType:E?"object":"array"})},[L,T]=reactExports.useState(!1),k=reactExports.useRef(null),P=()=>{var O;if(E){const V=(O=k.current)===null||O===void 0?void 0:O.value;V&&(t[V]=null,k.current&&(k.current.value=""),T(!1),f&&f({indexOrName:V,depth:e,src:u,parentType:"object"}),R&&R({type:"add",indexOrName:V,depth:e,src:u,parentType:"object"}))}else if(Array.isArray(t)){const V=t;V.push(null),f&&f({indexOrName:V.length-1,depth:e,src:u,parentType:"array"}),R&&R({type:"add",indexOrName:V.length-1,depth:e,src:u,parentType:"array"})}g()},N=O=>{O.key==="Enter"?(O.preventDefault(),P()):O.key==="Escape"&&K()},_=w||L,K=()=>{C(!1),T(!1)},A=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!p&&!_&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>b(!0)},{children:[ifDisplay(m,e,p)&&jsxRuntimeExports.jsxs("span",Object.assign({className:"jv-size"},{children:[objectSize(t)," Items"]})),jsxRuntimeExports.jsx(SvgAngleDown,{className:"jv-chevron"})]})),L&&E&&jsxRuntimeExports.jsx("input",{className:"json-view--input",placeholder:"property",ref:k,onKeyDown:N}),_&&jsxRuntimeExports.jsx(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:L?P:S}),_&&jsxRuntimeExports.jsx(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:K}),!p&&!_&&o&&customCopy(n)&&jsxRuntimeExports.jsx(CopyButton,{node:t}),!p&&!_&&editableAdd(i)&&customAdd(n)&&jsxRuntimeExports.jsx(SvgAddSquare,{className:"json-view--edit",onClick:()=>{E?(T(!0),setTimeout(()=>{var O;return(O=k.current)===null||O===void 0?void 0:O.focus()})):P()}}),!p&&!_&&editableDelete(i)&&customDelete(n)&&r&&jsxRuntimeExports.jsx(SvgTrash,{className:"json-view--edit",onClick:()=>C(!0)})]});return Array.isArray(t)?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"["}),A,p?jsxRuntimeExports.jsx("button",Object.assign({onClick:()=>b(!1),className:"jv-button"},{children:"..."})):jsxRuntimeExports.jsx("div",Object.assign({className:"jv-indent"},{children:t.map((O,V)=>jsxRuntimeExports.jsx(NameValue,{indexOrName:V,value:O,depth:e,parent:t,deleteHandle:d,editHandle:v},String(s)+String(V)))})),jsxRuntimeExports.jsx("span",{children:"]"}),p&&ifDisplay(m,e,p)&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>b(!1),className:"jv-size"},{children:[objectSize(t)," Items"]}))]}):E?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"{"}),A,p?jsxRuntimeExports.jsx("button",Object.assign({onClick:()=>b(!1),className:"jv-button"},{children:"..."})):jsxRuntimeExports.jsx("div",Object.assign({className:"jv-indent"},{children:Object.entries(t).map(([O,V])=>jsxRuntimeExports.jsx(NameValue,{indexOrName:O,value:V,depth:e,parent:t,deleteHandle:d,editHandle:v},String(s)+String(O)))})),jsxRuntimeExports.jsx("span",{children:"}"}),p&&ifDisplay(m,e,p)&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>b(!1),className:"jv-size"},{children:[objectSize(t)," Items"]}))]}):null}const LongString=React$1.forwardRef(({str:t,className:e,ctrlClick:s},r)=>{let{collapseStringMode:n,collapseStringsAfterLength:a}=reactExports.useContext(JsonViewContext);const[o,l]=reactExports.useState(!0);a=a>0?a:0;const i=t.replace(/\s+/g," "),c=u=>{(u.ctrlKey||u.metaKey)&&s?s(u):l(!o)};if(t.length<=a)return jsxRuntimeExports.jsxs("span",Object.assign({className:e,onClick:s},{children:['"',t,'"']}));if(n==="address")return t.length<=10?jsxRuntimeExports.jsxs("span",Object.assign({className:e,onClick:s},{children:['"',t,'"']})):jsxRuntimeExports.jsxs("span",Object.assign({onClick:c,className:e+" cursor-pointer"},{children:['"',o?i.slice(0,6)+"..."+i.slice(-4):t,'"']}));if(n==="directly")return jsxRuntimeExports.jsxs("span",Object.assign({onClick:c,className:e+" cursor-pointer"},{children:['"',o?i.slice(0,a)+"...":t,'"']}));if(n==="word"){let u=a,f=a+1,h=i,R=1;for(;;){if(/\W/.test(t[u])){h=t.slice(0,u);break}if(/\W/.test(t[f])){h=t.slice(0,f);break}if(R===6){h=t.slice(0,a);break}R++,u--,f++}return jsxRuntimeExports.jsxs("span",Object.assign({onClick:c,className:e+" cursor-pointer"},{children:['"',o?h+"...":t,'"']}))}return jsxRuntimeExports.jsxs("span",Object.assign({className:e},{children:['"',t,'"']}))});var _path;function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},_extends.apply(this,arguments)}var SvgEdit=function(e){return reactExports.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),_path||(_path=reactExports.createElement("path",{fill:"currentColor",d:"M17.25 3H6.75A3.754 3.754 0 0 0 3 6.75v10.5A3.754 3.754 0 0 0 6.75 21h10.5A3.754 3.754 0 0 0 21 17.25V6.75A3.754 3.754 0 0 0 17.25 3Zm2.25 14.25c0 1.24-1.01 2.25-2.25 2.25H6.75c-1.24 0-2.25-1.01-2.25-2.25V6.75c0-1.24 1.01-2.25 2.25-2.25h10.5c1.24 0 2.25 1.01 2.25 2.25v10.5Zm-6.09-9.466-5.031 5.03a2.981 2.981 0 0 0-.879 2.121v1.19c0 .415.336.75.75.75h1.19c.8 0 1.554-.312 2.12-.879l5.03-5.03a2.252 2.252 0 0 0 0-3.182c-.85-.85-2.331-.85-3.18 0Zm-2.91 7.151c-.28.28-.666.44-1.06.44H9v-.44c0-.4.156-.777.44-1.06l3.187-3.188 1.06 1.061-3.187 3.188Zm5.03-5.03-.782.783-1.06-1.061.782-.782a.766.766 0 0 1 1.06 0 .75.75 0 0 1 0 1.06Z"})))};function JsonNode({node,depth,deleteHandle:_deleteHandle,indexOrName,parent,editHandle}){const{collapseStringsAfterLength,enableClipboard,editable,src,onDelete,onChange,customizeNode}=reactExports.useContext(JsonViewContext);let customReturn;if(typeof customizeNode=="function"&&(customReturn=safeCall(customizeNode,[{node,depth,indexOrName}])),customReturn){if(reactExports.isValidElement(customReturn))return customReturn;if(isReactComponent(customReturn)){const t=customReturn;return jsxRuntimeExports.jsx(t,{node,depth,indexOrName})}}if(Array.isArray(node)||isObject(node))return jsxRuntimeExports.jsx(ObjectNode,{node,depth,indexOrName,deleteHandle:_deleteHandle,customOptions:typeof customReturn=="object"?customReturn:void 0});{const type=typeof node,[editing,setEditing]=reactExports.useState(!1),[deleting,setDeleting]=reactExports.useState(!1),valueRef=reactExports.useRef(null),edit=()=>{setEditing(!0),setTimeout(()=>{var t,e;(t=window.getSelection())===null||t===void 0||t.selectAllChildren(valueRef.current),(e=valueRef.current)===null||e===void 0||e.focus()})},done=reactExports.useCallback(()=>{const newValue=valueRef.current.innerText;try{const evalValue=eval(newValue);editHandle&&editHandle(indexOrName,evalValue,node)}catch(t){const e=resolveEvalFailedNewValue(type,newValue);editHandle&&editHandle(indexOrName,e,node)}setEditing(!1)},[editHandle]),cancel=()=>{setEditing(!1),setDeleting(!1)},deleteHandle=()=>{setDeleting(!1),_deleteHandle&&_deleteHandle(indexOrName),onDelete&&onDelete({value:node,depth,src,indexOrName,parentType:Array.isArray(parent)?"array":"object"}),onChange&&onChange({depth,src,indexOrName,parentType:Array.isArray(parent)?"array":"object",type:"delete"})},handleKeyDown=reactExports.useCallback(t=>{t.key==="Enter"?(t.preventDefault(),done()):t.key==="Escape"&&cancel()},[done]),isEditing=editing||deleting,ctrlClick=!isEditing&&editableEdit(editable)&&customEdit(customReturn)&&editHandle?t=>{(t.ctrlKey||t.metaKey)&&edit()}:void 0,Icons=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[isEditing&&jsxRuntimeExports.jsx(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:deleting?deleteHandle:done}),isEditing&&jsxRuntimeExports.jsx(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:cancel}),!isEditing&&enableClipboard&&customCopy(customReturn)&&jsxRuntimeExports.jsx(CopyButton,{node}),!isEditing&&editableEdit(editable)&&customEdit(customReturn)&&editHandle&&jsxRuntimeExports.jsx(SvgEdit,{className:"json-view--edit",onClick:edit}),!isEditing&&editableDelete(editable)&&customDelete(customReturn)&&_deleteHandle&&jsxRuntimeExports.jsx(SvgTrash,{className:"json-view--edit",onClick:()=>setDeleting(!0)})]});let className="json-view--string";switch(typeof(customReturn==null?void 0:customReturn.className)=="string"&&(className+=" "+customReturn.className),type){case"number":case"bigint":className="json-view--number";break;case"boolean":className="json-view--boolean";break;case"object":className="json-view--null";break}deleting&&(className+=" json-view--deleting");let displayValue=String(node);type==="bigint"&&(displayValue+="n");const EditingElement=reactExports.useMemo(()=>jsxRuntimeExports.jsx("span",{contentEditable:!0,className,dangerouslySetInnerHTML:{__html:type==="string"?`"${displayValue}"`:displayValue},ref:valueRef,onKeyDown:handleKeyDown}),[displayValue,type,handleKeyDown]);return type==="string"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[editing?EditingElement:node.length>collapseStringsAfterLength?jsxRuntimeExports.jsx(LongString,{str:node,ref:valueRef,className,ctrlClick}):jsxRuntimeExports.jsxs("span",Object.assign({className,onClick:ctrlClick},{children:['"',displayValue,'"']})),Icons]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[editing?EditingElement:jsxRuntimeExports.jsx("span",Object.assign({className,onClick:ctrlClick},{children:displayValue})),Icons]})}}const JsonViewContext=reactExports.createContext({src:void 0,collapseStringsAfterLength:99,collapseStringMode:"directly",collapseObjectsAfterLength:20,collapsed:!1,enableClipboard:!0,editable:!1,onEdit:void 0,onDelete:void 0,onAdd:void 0,onChange:void 0,forceUpdate:()=>{},customizeNode:void 0,displaySize:void 0});function JsonView({src:t,collapseStringsAfterLength:e=99,collapseStringMode:s="directly",collapseObjectsAfterLength:r=99,collapsed:n,enableClipboard:a=!0,editable:o=!1,onEdit:l,onDelete:i,onAdd:c,onChange:u,dark:f=!1,theme:h="default",customizeNode:R,displaySize:g}){const[m,E]=reactExports.useState(0),p=reactExports.useCallback(()=>E(b=>++b),[]);return jsxRuntimeExports.jsx(JsonViewContext.Provider,Object.assign({value:{src:t,collapseStringsAfterLength:e,collapseStringMode:s,collapseObjectsAfterLength:r,collapsed:n,enableClipboard:a,editable:o,onEdit:l,onDelete:i,onAdd:c,onChange:u,forceUpdate:p,customizeNode:R,displaySize:g}},{children:jsxRuntimeExports.jsx("code",Object.assign({className:"json-view"+(f?" dark":"")+(h&&h!=="default"?" json-view_"+h:"")},{children:jsxRuntimeExports.jsx(JsonNode,{node:t,depth:1})}))}))}class CustomToast extends reactExports.Component{constructor(e){super(e);const{toast:s}=e;this.state={toast:s,clockTimeout:0}}setHidden(e){const{toast:s}=this.state;s.hidden=e,this.setState({toast:s})}setClockTimeout(e){let{clockTimeout:s}=this.state;s=e,this.setState({clockTimeout:s})}render(){const{toast:e,clockTimeout:s}=this.state,{t:r,hidden:n}=e,a=n?"hidden":"";if(r=="normal")return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:`my-1 max-w-xs bg-white border border-gray-200 rounded-xl shadow-lg dark:bg-gray-800 dark:border-gray-700 ${a}`,role:"alert",children:jsxRuntimeExports.jsxs("div",{className:"flex p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("svg",{className:"flex-shrink-0 h-4 w-4 text-blue-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"})})}),jsxRuntimeExports.jsx("div",{className:"ms-3",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400",children:["(",s,")",e.message]})})]})})});if(r=="success")return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:`my-1 max-w-xs bg-white border border-gray-200 rounded-xl shadow-lg dark:bg-gray-800 dark:border-gray-700 ${a}`,role:"alert",children:jsxRuntimeExports.jsxs("div",{className:"flex p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("svg",{className:"flex-shrink-0 h-4 w-4 text-teal-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})})}),jsxRuntimeExports.jsx("div",{className:"ms-3",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400",children:["(",s,")",e.message]})})]})})});if(r=="error")return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:`my-1 max-w-xs bg-white border border-gray-200 rounded-xl shadow-lg dark:bg-gray-800 dark:border-gray-700 ${a}`,role:"alert",children:jsxRuntimeExports.jsxs("div",{className:"flex p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("svg",{className:"flex-shrink-0 h-4 w-4 text-red-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"})})}),jsxRuntimeExports.jsx("div",{className:"ms-3",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400",children:["(",s,")",e.message]})})]})})});if(r=="warning")return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:`my-1 max-w-xs bg-white border border-gray-200 rounded-xl shadow-lg dark:bg-gray-800 dark:border-gray-700 ${a}`,role:"alert",children:jsxRuntimeExports.jsxs("div",{className:"flex p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("svg",{className:"flex-shrink-0 h-4 w-4 text-yellow-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"})})}),jsxRuntimeExports.jsx("div",{className:"ms-3",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400",children:["(",s,")",e.message]})})]})})});if(r=="closable")return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{id:"dismiss-toast",className:`my-1 hs-removing:translate-x-5 hs-removing:opacity-0 transition duration-300 max-w-xs bg-white border border-gray-200 rounded-xl shadow-lg dark:bg-gray-800 dark:border-gray-700 ${a}`,role:"alert",children:jsxRuntimeExports.jsxs("div",{className:"flex p-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400",children:["(",s,")",e.message]}),jsxRuntimeExports.jsx("div",{className:"ms-auto",children:jsxRuntimeExports.jsxs("button",{type:"button",className:"inline-flex flex-shrink-0 justify-center items-center h-5 w-5 rounded-lg text-gray-800 opacity-50 hover:opacity-100 focus:outline-none focus:opacity-100 dark:text-white","data-hs-remove-element":"#dismiss-toast",children:[jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close"}),jsxRuntimeExports.jsxs("svg",{className:"flex-shrink-0 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("path",{d:"M18 6 6 18"}),jsxRuntimeExports.jsx("path",{d:"m6 6 12 12"})]})]})})]})})})}}class Toast extends reactExports.Component{constructor(e){super(e),this.state={toastList:[],toasts:""},this.toastTimeout=10,this.toastRefs=[]}add(e,s="normal"){const r={message:e,t:s,iv:null,clock:0,hidden:!1},{toastList:n}=this.state;n.push(r);const a=[];let o=0;for(const l of n){const i=this.createToast(l,o++);a.push(i)}this.setState({toastList:n,toasts:a},l=>{n.map((i,c)=>{setTimeout(u=>this.hideToastByTimeout(c),1e3)})})}checkUnusedToast(){const{toastList:e}=this.state;let s=0;for(const r of e)r.hidden&&(s+=1);s==e.length&&(this.setState({toastList:[],toasts:"..."}),this.toastRefs=[])}createToast(e,s){return e.hidden?"":(this.toastRefs[s]=reactExports.createRef(null),jsxRuntimeExports.jsx(CustomToast,{ref:this.toastRefs[s],toast:e},s))}hideToast(e){const{toastList:s,toasts:r}=this.state;s[e].hidden=!0,clearInterval(s[e].iv);const n=this.toastRefs[e].current;n&&(n.setHidden(!0),this.checkUnusedToast()),this.setState({toastList:s})}hideToastByTimeout(e){const{toastList:s}=this.state;if(!s[e].iv){const r=setInterval(()=>{s[e].clock+=1;const n=this.toastRefs[e].current;if(n){const a=this.toastTimeout-s[e].clock;n.setClockTimeout(a)}this.setState({toastList:s}),s[e].clock==this.toastTimeout&&this.hideToast(e)},1e3);s[e].iv=r,this.setState({toastList:s})}}clearToastTimer(){const{toastList:e}=this.state;e.map(s=>{clearInterval(s.iv)})}componentDidMount(){this.clearToastTimer()}render(){const{toasts:e}=this.state;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"fixed top-0 right-4 m-4",children:e})})}}async function loader$2({params:t}){const{ctl:e,slug:s}=t;return{ctl:e,slug:s}}class FetchStateInfo extends reactExports.Component{constructor(e){super(e),this.state={runLevel:0,statusCode:0,loading:!1}}resetState(){this.setState({runLevel:0,statusCode:0,loading:!1})}setMessage(e){this.setState({message:e})}setStatusCode(e){this.setState({statusCode:e})}setLoading(e){this.setState({loading:e})}setRunLevel(e){this.setState({runLevel:e})}render(){const{runLevel:e,statusCode:s,loading:r}=this.state,{onRetry:n,onFetch:a,name:o}=this.props,l=o.toLowerCase().replace(/\W/g,"-");let i="fa fa-check",c=`Fetch ${o} success`,u=!1,f=!1;return e==0?(i="fa fa-globe",c=`Fetch ${o}`):r?(c=`Fetching ${o} `,i="fa fa-spin fa-spinner"):s!=200?(i="fa fa-exclamation-triangle",c=`Fetch ${o} failed`,u=!0,f=!1):f=!0,jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:`flex items-center w-full ${u?"text-red-200":""} ${f?"text-green-200":""}`,children:[jsxRuntimeExports.jsx("div",{className:"p-2",children:jsxRuntimeExports.jsx("i",{className:i})}),jsxRuntimeExports.jsx("div",{className:"p-2",children:s}),jsxRuntimeExports.jsx("div",{className:"p-2",children:c}),jsxRuntimeExports.jsxs("div",{className:"p-2",children:[u?jsxRuntimeExports.jsx(Button,{className:l,onClick:h=>n(h),caption:"Retry",icon:"fa fa-refresh"}):"",e==0?jsxRuntimeExports.jsx(Button,{className:l,onClick:h=>a(h),caption:"Fetch",icon:"fa fa-download"}):""]})]})})}}const AddCoursePage=({slug:t,store:e,config:s,onOk:r})=>{const[n,a]=reactExports.useState(null),[o,l]=reactExports.useState(null),[i,c]=reactExports.useState(null),[u,f]=reactExports.useState(null),[h,R]=reactExports.useState(null),[g,m]=reactExports.useState(null),[E,p]=reactExports.useState(null),b=reactExports.useRef(null),v=reactExports.useRef(null),d=reactExports.useRef(null);let w=null;const C=new CourseApi(e),S=(N,_)=>{b.current.add(N,_)},L=async()=>{let N=!1,_=null;if(u&&h){for(const K of u){if(N)break;const A=h[K.slug];for(const O of A){if(N)break;_=O,N=!0}}if(_){S("try to fetch StreamLoc Trans Once","normal"),d.current.setRunLevel(1),d.current.setLoading(!0);const K=await C.getStreamLocs(_);d.current.setStatusCode(C.tocXmlDocFetchStatus),K?(m(K),S(`Fetch stream locations [${Object.keys(K).join(",")}]`,"success")):(S(`Failed to fetch stream locations toc : ${_.title}`,"error"),d.current.setStatusCode(-1));const A=await C.getTranscripts(_);A?(p(A),S(`Fetch transcripts [ ${Object.keys(A).join(", ")} ]`,"success")):(S(`Failed to fetch transcripts toc : ${_.title}`,"error"),d.current.setStatusCode(-1)),d.current.setLoading(!1)}}},T=async N=>{e.get("Course"),e.get("Author"),e.get("Section"),e.get("Toc"),e.get("StreamLocation"),e.get("Transcript"),e.get("ExerciseFile");let _=null;v.current.setRunLevel(1),v.current.setLoading(!0),_||(_=await C.getCourseInfo(N,!0),v.current.setStatusCode(C.courseXmlDocFetchStatus));const K=courseUrlFromSlug(N);if(_){s.getUiConfig().reloadSidebar();try{a(C.courseXmlDoc.html())}catch(Y){console.warn(Y)}S("Fetch course OK","success"),l(_);const A=await C.getAuthors(N);A.length>0?(S("Fetch course authors ok","success"),c(A)):S(`Failed to fetch course authors course : ${_.title}`,"error");const O=await C.getCourseSections(N);O?(S(`Fetch course sections ok ${O.length}`,"success"),f(O)):S(`Failed to fetch course sections course : ${_.title}`,"error");const V=await C.getCourseTocs(N);V?(S("Fetch course tocs ok ","success"),R(V),k()):S(`Failed to fetch course tocs course : ${_.title}`,"error")}else S(`Failed to fetch course slug : ${K}`,"error"),v.current.setStatusCode(-1);v.current.setLoading(!1)},k=()=>{window.location.hash=`/manager/${t}`},P=()=>{setTimeout(()=>{jQuery("button.course-info").click()},1e3)};return reactExports.useEffect(()=>{t&&t!=w&&(l(null),c(null),f(null),R(null),m(null),p(null),d.current&&d.current.resetState(),v.current&&v.current.resetState(),P(),w=t)},[t]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["add : ",t,jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsx(Toast,{ref:b})}),jsxRuntimeExports.jsx(FetchStateInfo,{ref:v,name:"Course Info",onFetch:N=>T(t),onRetry:N=>T(t)}),o?jsxRuntimeExports.jsx("div",{className:"w-full my-2 p-4 rounded-md border bg-gray-200",children:jsxRuntimeExports.jsx(JsonView,{src:o})}):"",i?jsxRuntimeExports.jsx("div",{className:"w-full my-2 p-4 rounded-md border bg-gray-200",children:jsxRuntimeExports.jsx(JsonView,{src:i})}):"",u?jsxRuntimeExports.jsx("div",{className:"w-full my-2 p-4 rounded-md border bg-gray-200",children:jsxRuntimeExports.jsx(JsonView,{src:u})}):"",h?jsxRuntimeExports.jsx("div",{className:"w-full my-2 p-4 rounded-md border bg-gray-200",children:jsxRuntimeExports.jsx(JsonView,{src:h})}):"",u&&h?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FetchStateInfo,{ref:d,name:"Course Config",onFetch:N=>L(),onRetry:N=>L()}),g?jsxRuntimeExports.jsx("div",{className:"w-full my-2 p-4 rounded-md border bg-gray-200",children:jsxRuntimeExports.jsx(JsonView,{src:g})}):"",E?jsxRuntimeExports.jsx("div",{className:"w-full my-2 p-4 rounded-md border bg-gray-200",children:jsxRuntimeExports.jsx(JsonView,{src:E})}):""]}):""]})},CoursePage=({store:t,config:e})=>{const{ctl:s,slug:r}=useLoaderData(),[n,a]=reactExports.useState(""),o=async(l,i)=>{a({add:jsxRuntimeExports.jsx(AddCoursePage,{config:e,slug:i,store:t,onOk:u=>u})}[l])};return reactExports.useEffect(()=>{s&&r&&o(s,r)},[s,r]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:n})},QueueInfo=({clearStatusBar:t,logStatusBar:e,selectedFmt:s,store:r,queueFinished:n,queueStarted:a=!1,currentIndex:o=-1,message:l="No message to display"})=>(reactExports.useEffect(()=>{e("default",l)},[l]),""),QueueItemToolbar=({clearStatusBar:t,logStatusBar:e,startQueueItem:s,loading:r,dlStatus:n,finished:a,interupted:o,vIndex:l,toc:i,resetQueueItem:c})=>{const[u,f]=n,h=parseInt(u)+parseInt(f),R=h==0?"download":h!=4?"refresh":"check";let g=h==0?!1:h==4;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"queue-item-toolbar",children:a?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{className:"dark:hover:text-red-600",onMouseOut:m=>t(),onMouseOver:m=>e("QueueItemToolbar.resetQueueItem",`Reset ${i.title}`),onClick:m=>c(l),caption:"",disabled:!1,loading:r,icon:"fa fa-trash"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:o?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{onMouseOut:m=>t(),onMouseOver:m=>e("QueueItemToolbar.startQueue",`Resume ${i.title}`),onClick:m=>s(l),caption:"",disabled:g,loading:r,icon:"fa fa-refresh"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{onMouseOut:m=>t(),onMouseOver:m=>e("QueueItemToolbar.startQueue",`Download ${i.title}`),onClick:m=>s(l),caption:"",disabled:g,loading:r,icon:`fa fa-${R}`})})})})})};class InputDisplay extends reactExports.Component{constructor(e){super(e);const{value:s}=e;this.state={value:s}}setValue(e){this.setState({value:e})}render(){const{value:e}=this.state;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"w-30 mx-2",children:e})})}}const DLStatus=({type:t,status:e})=>jsxRuntimeExports.jsx("div",{className:"",children:e==2?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("i",{className:"fa fa-check text-green-500"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e==1?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("i",{className:"fa fa-spin fa-spinner"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e==-1?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("i",{className:"fa fa-exclamation-circle text-red-500"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:""})})})});class QueueItem extends reactExports.Component{constructor(e){super(e),this.captionStatusRefs={},this.videoStatusRefs={};const{sections:s,tocs:r,store:n,course:a}=e;this.mDMStatus=n.get("DMStatus"),this.state={loadings:{},dlcaptionStatus:{},dlvideoStatus:{},dmstatusList:{}},s.map((o,l)=>{r[o.slug].map((c,u)=>{const f=this.createRefKey(l,u);this.captionStatusRefs[f]=reactExports.createRef(null),this.videoStatusRefs[f]=reactExports.createRef(null),this.state.loadings[f]=!1,this.state.dlvideoStatus[f]=0,this.state.dlcaptionStatus[f]=0;const h=[l,u];let R=this.getDMStatus(l,u);R||(console.log("creating default dmstatus"),R=this.mDMStatus.createDefaultRow(a.id,h)),this.state.dmstatusList[f]=R})})}getStatusRef(e){const[s,r]=e,n=this.createRefKey(s,r),a=this.captionStatusRefs[n],o=this.videoStatusRefs[n];return{captionRef:a,videoRef:o}}createRefKey(e,s){return`ref_${e}${s}`}setDlStatusMeta(e,s,r=0){const[n,a]=e;console.log(`setDlStatusMeta([${n},${a},${s}])`);const o=this.createRefKey(n,a),{dmstatusList:l}=this.state,i=l[o];i.metaStatus=s,r&&(i.dlMetaRetryCount=r),this.setState({dmstatusList:l})}setLoading(e,s){const[r,n]=e,{loadings:a}=this.state,o=Object.assign({},a),l=this.createRefKey(r,n);o[l]=s,this.setState({loadings:o}),console.log(`QueueItem.setLoading([${r},${n},${s}])`)}setDlStatus(e,s,r,n=0){const[a,o]=s;console.log(`setDlStatus([${a},${o},'${e}',${r}])`);const l=this.createRefKey(a,o),i=e=="caption"?"captionStatus":"videoStatus",c=e=="caption"?"dlCaptionRetryCount":"dlVideoRetryCount",{dmstatusList:u}=this.state,f=u[l];f[i]=r,n&&(f[c]=n);let h=0;e=="caption"?h=parseInt(f.videoStatus)+parseInt(f[i]):h=parseInt(f.captionStatus)+parseInt(f[i]),h==4?(f.finished=!0,f.interupted=!1):f.interupted=!0,this.setState({dmstatusList:u})}getDMStatus(e,s){const{course:r}=this.props,n=`${e}${s}`;return this.mDMStatus.getByCourseId(r.id,n)}checkDmStatusFinished(){const{dmstatusList:e}=this.state;let s=!0;for(let r in e){const n=e[r];if(!n.finished){console.log(n),s=!1;break}}return s}async updateDmStatusRow(e,s){const r={metaStatus:0,videoStatus:0,captionStatus:0,dlCaptionRetryCount:0,dlVideoRetryCount:0,finished:!1,videoSz:0,captionSz:0,interupted:!1};return await this.mDMStatus.updateByCourseId(e,s,r)}async clearDMStatus(){const{captionStatusRefs:e,videoStatusRefs:s}=this,{sections:r,tocs:n,course:a}=this.props,{dmstatusList:o,loadings:l}=this.state;for(let i=0;i<r.length;i++){const c=r[i],u=n[c.slug];for(let f=0;f<u.length;f++){u[f];const h=this.createRefKey(i,f),R=[i,f];e[h].current.setValue("n.a"),s[h].current.setValue("n.a"),o[h]=await this.updateDmStatusRow(a.id,R),l[h]=!1}}this.setState({dmstatusList:o,loadings:l})}async clearDMStatusByIndex(e,s){const{captionStatusRefs:r,videoStatusRefs:n}=this,{sections:a,tocs:o,course:l}=this.props,{dmstatusList:i,loadings:c}=this.state,u=a[e];o[u.slug][s];const h=this.createRefKey(e,s),R=[e,s];r[h].current.setValue("n.a"),n[h].current.setValue("n.a"),i[h]=await this.updateDmStatusRow(l.id,R),c[h]=!1,this.setState({dmstatusList:i,loadings:c})}render(){const{sections:e,tocs:s,startQueueItem:r,logStatusBar:n,clearStatusBar:a,resetQueueItem:o}=this.props,{captionStatusRefs:l,videoStatusRefs:i}=this,{loadings:c,dlvideoStatus:u,dlcaptionStatus:f,dmstatusList:h}=this.state,R="px-1 py-1 whitespace-nowrap text-sm font-medium";let g="",m="",E="",p=0,b=R+" text-green-900  dark:text-green-200 ",v=R+" text-red-800  dark:text-red-200 ";return h?e.map((d,w)=>s[d.slug].map((C,S)=>{p+=1;const L=this.createRefKey(w,S),T=[w,S],k=h[L];let P="",N="n.a",_="n.a",K=[k.captionStatus,k.videoStatus];return k.videoSz>0&&(N=formatBytes(k.videoSz)),k.captionSz>0&&(_=formatBytes(k.captionSz)),k.finished?(g=R+b,m=g,E=g):k.interupted?(g=R+v,k.videoStatus==2?m=b:m=v,k.captionStatus==2?E=b:E=v):(g=R+" text-gray-800  dark:text-gray-200 ",E=g,m=g),P=k.finished?"text-green-300":k.interupted?"text-red-300":"",jsxRuntimeExports.jsxs("tr",{className:P,children:[jsxRuntimeExports.jsxs("td",{className:g,children:[" ",p]}),jsxRuntimeExports.jsxs("td",{className:g,children:[" ",jsxRuntimeExports.jsx("div",{className:"cursor-pointer",onMouseOut:A=>a(),onMouseOver:A=>n("QueueItem.toc.title",C.title),children:C.title})]}),jsxRuntimeExports.jsxs("td",{className:E,children:[" ",jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("i",{className:"mt-1 fa fa-file-text-o"})," ",jsxRuntimeExports.jsx(InputDisplay,{value:_,ref:l[L]})," ",jsxRuntimeExports.jsx(DLStatus,{status:k.captionStatus})]})]}),jsxRuntimeExports.jsxs("td",{className:m,children:[" ",jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("i",{className:"mt-1 fa fa-file-video-o"})," ",jsxRuntimeExports.jsx(InputDisplay,{value:N,ref:i[L]})," ",jsxRuntimeExports.jsx(DLStatus,{status:k.videoStatus})]})]}),jsxRuntimeExports.jsxs("td",{className:g,children:[" ",jsxRuntimeExports.jsx(QueueItemToolbar,{toc:C,logStatusBar:n,clearStatusBar:a,vIndex:T,resetQueueItem:o,startQueueItem:r,loading:c[L],dlStatus:K,finished:k.finished,interupted:k.interupted})]})]},`${L}`)})):jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:5,children:jsxRuntimeExports.jsx("i",{className:"fa fa-spin fa-spinner"})})})}}const QueueTable=({clearStatusBar:t,logStatusBar:e,startQueueItem:s,store:r,course:n,sections:a,tocs:o,queueItemRef:l,resetQueueItem:i})=>{const c="px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase";return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"queue-table border rounded-xl shadow-sm p-6 dark:bg-gray-800 dark:border-gray-700",children:jsxRuntimeExports.jsx("div",{className:"state-tbl flex flex-col mx-auto w-full",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[jsxRuntimeExports.jsxs("thead",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:c,rowSpan:2,children:"No"}),jsxRuntimeExports.jsx("th",{className:c,rowSpan:2,children:"Title"}),jsxRuntimeExports.jsx("th",{className:c,colSpan:"2",children:"Status"}),jsxRuntimeExports.jsx("th",{className:c,rowSpan:2,children:"Action"})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:c,children:"Subtitle/Transcript"}),jsxRuntimeExports.jsx("th",{className:c,children:"Media"})]})]}),jsxRuntimeExports.jsx("tbody",{children:jsxRuntimeExports.jsx(QueueItem,{clearStatusBar:t,logStatusBar:e,resetQueueItem:i,startQueueItem:s,store:r,ref:l,course:n,sections:a,tocs:o})})]})})})})},objectToString=Object.prototype.toString,isError=t=>objectToString.call(t)==="[object Error]",errorMessages=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed"]);function isNetworkError(t){return t&&isError(t)&&t.name==="TypeError"&&typeof t.message=="string"?t.message==="Load failed"?t.stack===void 0:errorMessages.has(t.message):!1}const ERROR_NOT_SETUP_QUEUE="You must run setup queue first",FETCH_FAILED_MAX_COUNT=3;async function fetchDownloadReal(t,e,s,r,n,a){return new Promise((o,l)=>{fetch(t).then(i=>{if(console.log(i),i.status!=200){l({status:i.status,blob:null});return}const c=i.headers.get("content-encoding");let u=i.headers.get(c?"x-file-size":"content-length");i.headers.get("content-type"),u===null&&(u=0);const f=parseInt(u,10);let h=0;return new Response(new ReadableStream({start(R){let g=new Date;const m=i.body.getReader();E();function E(){m.read().then(({done:p,value:b})=>{if(p){R.close();return}h+=b.byteLength;const v=b.byteLength;r(h,f,n,g,v,a),g=new Date,R.enqueue(b),E()}).catch(p=>{console.error(p),R.error(p)})}}}))}).then(async i=>{let c={status:500,blob:null};try{c={status:i.status,blob:await i.blob()}}catch{}return c}).then(i=>{i.status?o(i):l(i)}).catch(i=>{l({status:500,blob:null}),console.error(i)})})}async function fetchDownload(t,e,s,r,n,a){try{return await fetchDownloadReal(t,e,s,r,n,a)}catch(o){return isNetworkError(o)&&alert("Network error. Please check your internet connection."),o}return{status:500,blob:null}}class QueueMan extends reactExports.Component{constructor(e){super(e),this.state={infoMessage:"",dlRunning:!1,dlMeta:null,currentIndex:null,queueRunning:!1,queueFinished:!1};const{store:s}=e;this.mDMStatus=s.get("DMStatus"),this.mDMSetup=s.get("DMSetup"),this.queueItemRef=reactExports.createRef(null)}async fetchDlItem(e,s,r,n="",a="",o="",l=""){let i=o,c;if(s=="caption"?c=n:(c=a,i=l),c){let u=`Downloading ${i}`;this.setState({infoMessage:u});let f=1;const{course:h}=this.props,R=h.id;r.setDlStatus(s,e,f),await this.mDMStatus.setDlStatus(R,s,e,f),await timeout(5);const g=await fetchDownload(c,i,null,(p,b,v,d,w,C)=>{this.onDlProgress(p,b,v,d,w,C)},e,s),m=g.blob,E=g.status;g.status==200?f=2:f=-1,r.setDlStatus(s,e,f),await this.mDMStatus.setDlStatus(R,s,e,f),this.setState({infoMessage:`Download ${i} ${f==-1?"Failed":"Success"}`}),E==200&&await this.downloadFileFromBlob(m,i)}else alert(`${s} url is empty`)}async downloadFileFromBlob(e,s){try{const r=document.createElement("a"),n=window.URL.createObjectURL(e);r.download=s,r.href=n,r.click()}catch(r){console.error(r),alert(`HTTP ERROR: ${r.toString()}`)}}async fetchDlQueueItem(e,s,r,n="single"){console.log(`fetchDlQueueItem runing in ${n} mode`,s,r);const a=this.props.queueStarted,[o,l]=this.getCourseTocSlug(e),{selectedFmt:i}=this.props,c=this.queueItemRef.current,{captionStatus:u,videoStatus:f,finished:h,interupted:R}=this.getDmStatus(e);if(n){let g=!1;if(n=="single"?a||(g=!0):a&&(g=!0),!g){let m=n=="single"?"Cant download this item in single mode because Queue is running":"Cant download this item in queue mode because Queue is not running";return alert(m),null}if(g){const m=`${l}-${i}`,E=`${m}.mp4`,p=`${m}.vtt`;let b,v;h?this.setState({infoMessage:`${e} skipped`}):R?(u!=2?b=await this.fetchDlItem(e,"caption",c,s,r,p,E):confirm(`${p} already downloaded do you wanna redownload again ${p}?`)?b=await this.fetchDlItem(e,"caption",c,s,r,p,E):this.setState({infoMessage:`${p} Skipped`}),f!=2?v=await this.fetchDlItem(e,"video",c,s,r,p,E):confirm(`${E} already downloaded do you wanna redownload again ${E}?`)?v=await this.fetchDlItem(e,"video",c,s,r,p,E):this.setState({infoMessage:`${E}  skipped`})):(b=await this.fetchDlItem(e,"caption",c,s,r,p,E),v=await this.fetchDlItem(e,"video",c,s,r,p,E)),console.log(b,v)}}}getCourseTocSlug(e){const{course:s,tocs:r,sections:n}=this.props,[a,o]=e,l=n[a].slug,i=r[l][o];return[s.slug,i.slug]}async fetchDlMeta(e){console.log("Fetching dlMeta");const{store:s,course:r,sections:n,tocs:a}=this.props,o=new CourseApi(s);this.getCourseTocSlug(e);const l=this.mDMSetup.getByCourseId(r.id),{selectedFmt:i,selectedTrans:c}=l,[u,f]=e,R=n[u].slug,g=a[R][f],m=await o.getStreamLocs(g),E=await o.getTranscripts(g);await s.get("PrxCache").unset(g.url);let b=null,v=null,d=!1;if(l){const w=m.filter(C=>C.fmt==i);w.length>0?(b=w[0],d=!0):m.length>0&&(b=m[0],d=!0),typeof E[c]<"u"?(v=E[c],d=!0):typeof E.us<"u"&&(v=E.us,d=!0)}return[d,b,v]}async resetQueueItem(e){const[s,r]=e;console.log(`resetQueueItem  ${e}`);const{queueItemRef:n}=this,{course:a,tocs:o,sections:l}=this.props,i=n.current,c=a.id;let u=this.mDMStatus.getByCourseId(c,e);if(u){console.log(u);const f=l[s],h=o[f.slug][r];confirm(`Reset download state for toc : "${h.title}"?`)&&await i.clearDMStatusByIndex(s,r)}}async startQueueItem(e,s="single"){console.log(`startQueueItem staterted ${e}`);const{queueItemRef:r}=this,{course:n,selectedFmt:a}=this.props,o=r.current,l=n.id;let i=this.mDMStatus.getByCourseId(l,e);i||(i=await this.mDMStatus.setDlStatusMeta(l,e,0));{let c=!1;if(i.dlMetaRetryCount<=FETCH_FAILED_MAX_COUNT){o.setLoading(e,!0);for(let u=i.dlMetaRetryCount;u<=FETCH_FAILED_MAX_COUNT;u++){u>0&&console.log(`retry fetchMeta ${u}`);const[f,h,R]=await this.fetchDlMeta(e);c=f;const g=f?2:-1;let m=!1;if(c){let E=null;try{E=R.url}catch(b){console.warn(b)}let p=null;try{p=h.url}catch(b){console.error(b)}await this.fetchDlQueueItem(e,E,p,s),m=!0}else{if(console.log(errorMsg),errorMsg=="ERR_NO_LOGIN"){alert("You must login to linkedin learning website");break}m=!0}if(o.setDlStatusMeta(e,g,u),await this.mDMStatus.setDlStatusMeta(l,e,g,u),m)break}o.setLoading(e,!1)}else console.log("fetchDlMeta reach max  FETCH_FAILED_MAX_COUNT")}}getDmStatus(e){const{course:s}=this.props,r=this.mDMStatus.getByCourseId(s.id,e);let n=0,a=0,o=!1,l=!1;return r&&(n=r.captionStatus,a=r.videoStatus,o=r.finished,l=r.interupted),{captionStatus:n,videoStatus:a,finished:o,interupted:l}}async fetchDl(){const e=this.state.currentIndex;await this.startQueueItem(e,"queue")}async fetchDl_deprecated(){const{queueItemRef:e}=this,{currentIndex:s}=this.state,{course:r}=this.props,n=e.current,a=this.mDMStatus.getByCourseId(r.id,s);let o;o=await this.fetchDlMeta(a),console.log(o);let l=0,i=0,c=!1,u=!1;a&&(l=a.captionStatus,i=a.videoStatus,c=a.finished,u=a.interupted),n&&(c?this.setState({infoMessage:`${s} skipped`}):(n.setLoading(s,!0),u?(l!=2?await this.fetchDlItem("caption",n):this.setState({infoMessage:`${s} caption skipped`}),i!=2?await this.fetchDlItem("video",n):this.setState({infoMessage:`${s} video skipped`})):(await this.fetchDlItem("caption",n),await this.fetchDlItem("video",n)),n.setLoading(s,!1)))}async onDlProgress(e,s,r,n,a,o){const{queueItemRef:l}=this,{course:i}=this.props;if(l.current){const c=l.current;if(r){formatBytes(calculateSpeed(a,n,new Date));const{captionRef:u,videoRef:f}=c.getStatusRef(r);o=="caption"?u.current.setValue(`${formatBytes(e)}`):o=="video"&&f.current.setValue(`${formatBytes(e)}`),await this.mDMStatus.setDlSize(i.id,o,r,e)}}}async onQueueComplete(){const e=this.queueItemRef.current,{stopDownloadQueue:s,setQueueFinished:r,setQueueResume:n}=this.props;e.checkDmStatusFinished()?r(!0):(console.log("queue stil have unfinished item"),this.setState({currentIndex:[0,0]}),n(!0)),s()}async triggerFetchDl(){const{queueRunning:e}=this.state;if(console.log("triggerFetchDl called"),!e){console.log("Queue stoped"),this.setState({dlRunning:!1});return}const s=this.getNextIndex();let[r,n]=s;if(r===null&&n===null){console.log(`${r}, ${n}`),console.log("Queue Complete"),this.onQueueComplete();return}if(r==-1&&n==-1){console.log(`${r}, ${n}`),console.log("Queue Interupted"),this.setState({dlRunning:!1}),stopDownloadQueue();return}r>=0&&n>=0&&(console.log(`Processing ${r}, ${n}`),this.setState({dlRunning:!0,currentIndex:s},async()=>{await this.fetchDl(),e&&this.triggerFetchDl()}))}triggerQueue(e){this.props;const{dlMeta:s}=this.state;console.log(`QueueMan triggered ${e}`);const r=e;this.setState({queueRunning:r},()=>{e&&(s||this.triggerFetchDl())})}async triggerResetQueue(){const{resetDownloadQueue:e}=this.props;await this.queueItemRef.current.clearDMStatus(),this.setState({currentIndex:null},()=>{e(!1)})}getNextIndex(){const{currentIndex:e}=this.state,{sections:s,tocs:r}=this.props;let n=null;if(!e)return n=[0,0],n;if(e.length==2){let[a,o]=e;const l=s[a].slug,i=s.length-1,c=r[l].length-1;if(o<c)return o=o+1,[a,o];if(o>=c)return a<i?(a=a+1,o=0,[a,o]):[null,null]}return[-1,-1]}render(){const{infoMessage:e,currentIndex:s}=this.state,{clearStatusBar:r,logStatusBar:n,selectedFmt:a,queueStarted:o,sections:l,course:i,tocs:c,store:u,alreadySetup:f,queueFinished:h}=this.props;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"queueman mb-12 mt-2",children:jsxRuntimeExports.jsx("div",{className:"queue-man-container",children:f?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(QueueInfo,{clearStatusBar:r,logStatusBar:n,selectedFmt:a,queueFinished:h,message:e,queueStarted:o,currentIndex:s}),jsxRuntimeExports.jsx(QueueTable,{clearStatusBar:r,logStatusBar:n,resetQueueItem:R=>this.resetQueueItem(R),startQueueItem:R=>this.startQueueItem(R),queueItemRef:this.queueItemRef,course:i,sections:l,tocs:c,store:u})]}):ERROR_NOT_SETUP_QUEUE})})})}}const ToolbarMan=({selectedFmt:t,course:e,sections:s,tocs:r,clearStatusBar:n,logStatusBar:a,queueResume:o,queueFinished:l,dmsetup:i,queueManRef:c,alreadySetup:u,setAlreadySetup:f,reconfigureSetup:h,setRunSetup:R,runSetup:g,setReconfigureSetup:m,queueStarted:E=!1,startDownloadQueue:p,stopDownloadQueue:b})=>{console.log(`queueResume:${o}`);const v=async N=>{p(),console.log("startQueue"),console.log(c),c.current.triggerQueue(!0)},d=async()=>{b(),console.log("stopQueue"),c.current.triggerQueue(!1)},w=async()=>{m(!0),console.log("reconfigure")},C=async()=>{console.log("onResetQueue"),confirm("Are you sure want to reset Queue ?")&&c.current.triggerResetQueue()},S=async()=>{const{sourceRepo:N}=i;window.open(N,"_blank")},L=async N=>{window.open(N,"_blank")},T=async()=>{const K={slug:e.slug,fmt:t,sections:s,tocs:r};createDownloadFile("playlist",K)},k=async()=>{const{exerciseFile:N}=i,A={slug:e.slug,fmt:t,sections:s,tocs:r,exerciseFile:N};createDownloadFile("shell_script",A)},P=async()=>{const{exerciseFile:N}=i,A={slug:e.slug,fmt:t,sections:s,tocs:r,exerciseFile:N};createDownloadFile("batch_script",A)};return reactExports.useEffect(()=>{console.log(i)},[i]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"toolbar-man pr-2 pt-4 pb-1",children:jsxRuntimeExports.jsx("div",{className:"toolbar-man-container",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col md:inline-flex md:flex-row rounded-md shadow-sm",children:u?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[h?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:l?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{onMouseOut:N=>n(),onMouseOver:N=>a("ToolbarMan","Reset Current Queue"),className:"mr-1",caption:"Reset Queue",icon:"fa fa-refresh",onClick:N=>C()})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{onMouseOut:N=>n(),onMouseOver:N=>a("ToolbarMan",`${o?"Resume Queue":"Start Queue"}`),loading:E,className:"mr-1",disabled:E,caption:o?"Resume":"Start Queue",icon:"fa fa-play",onClick:N=>v()}),E?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{onMouseOut:N=>n(),onMouseOver:N=>a("ToolbarMan","Stop Current Queue"),disabled:!E,caption:"Stop Queue",icon:"fa fa-square",onClick:N=>d()})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{onMouseOut:N=>n(),onMouseOver:N=>a("ToolbarMan","Reconfigure Queue Setup"),caption:"Reconfigure",icon:"fa fa-cog",onClick:N=>w()})})]})}),i&&!h?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[i.exerciseFile&&i.exerciseFile.length>0?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(DropdownSelect,{className:"ml-1",data:i.exerciseFile.map(N=>({value:N.url,text:N.name})),onSelect:N=>L(N),selected:"Exercise Files"})}):"",i.sourceRepo?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{onClick:N=>S(),className:"ml-1",label:"Source Repo:",title:i.sourceRepo,caption:"Source Repo",icon:"fa fa-file-archive-o"})}):"",jsxRuntimeExports.jsx(Button,{onClick:N=>T(),className:"ml-1",caption:"Playlist.m3u",icon:"bi bi-collection-play"}),jsxRuntimeExports.jsx(Button,{onClick:N=>k(),className:"ml-1",caption:"Helper.sh",icon:"bi bi-terminal-fill"}),jsxRuntimeExports.jsx(Button,{onClick:N=>P(),className:"ml-1",caption:"Helper.cmd",icon:"bi bi-terminal"})]}):""]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:g?"":jsxRuntimeExports.jsx(Button,{onMouseOut:N=>n(),onMouseOver:N=>a("ToolbarMan","Run Setup Queue"),onClick:N=>R(!0),icon:"fa fa-cog",caption:"Run Setup Queue"})})})})})})};class StatusbarMan extends reactExports.Component{constructor(){super(...arguments);Q(this,"state",{message:"",mode:0,t:"default",customMessage:""})}setMessage(s,r){this.setState({message:s,mode:r})}log(s,r){this.setState({t:s}),s=="QueueItem.toc.title"&&this.setState({customMessage:r}),s=="default"&&this.setState({message:r}),s=="QueueItemToolbar.startQueue"||s=="ToolbarMan",this.setState({customMessage:r})}clear(){this.setState({t:"default",message:"Enjoy"})}render(){this.props;const{message:s,mode:r,t:n,customMessage:a}=this.state;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"statusbar-man fixed bottom-0 w-full -mx-8 bg-white dark:bg-gray-800 dark:text-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"status-bar-man-container rounded border p-2.5",children:[n=="default"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:r===0?jsxRuntimeExports.jsxs("div",{className:"success text-green-600",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-check"})," ",jsxRuntimeExports.jsx("span",{children:s})]}):r===1?jsxRuntimeExports.jsxs("div",{className:"warning text-orange-600",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-exclamation-triangle"})," ",jsxRuntimeExports.jsx("span",{children:s})]}):r==2?jsxRuntimeExports.jsxs("div",{className:"error text-red-600",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-times-circle"})," ",jsxRuntimeExports.jsx("span",{children:s})]}):jsxRuntimeExports.jsxs("div",{className:"custom-mode text-custom-mode",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-times-circle"})," ",jsxRuntimeExports.jsx("span",{children:s})]})}):"",n=="QueueItem.toc.title"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"success text-green-600",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-bookmark"})," ",jsxRuntimeExports.jsx("span",{children:a})]})}):"",n=="QueueItemToolbar.startQueue"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"success text-green-600",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-download"})," ",jsxRuntimeExports.jsx("span",{children:a})]})}):"",n=="QueueItemToolbar.resetQueueItem"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"success text-red-600",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-trash"})," ",jsxRuntimeExports.jsx("span",{children:a})]})}):"",n=="ToolbarMan"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"success text-green-600",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-arrow-right"})," ",jsxRuntimeExports.jsx("span",{children:a})]})}):"",n=="QueueSetup"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"success text-green-600",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-cog"})," ",jsxRuntimeExports.jsx("span",{children:a})]})}):""]})})})}}const CourseAuthors=({authors:t})=>t?jsxRuntimeExports.jsxs("div",{className:"flex text-lg",children:[jsxRuntimeExports.jsx("span",{className:"italic mr-1 ",children:"By"}),t.map((e,s)=>jsxRuntimeExports.jsxs("h4",{children:[" ",jsxRuntimeExports.jsxs("a",{className:"",href:authorUrlFromSlug(e.slug),target:"_blank",children:[e.name," ",jsxRuntimeExports.jsx("i",{className:"fa fa-external-link"})]})," ",s<t.length-1?", ":""]},s))]}):"",CourseInfo=({store:t,course:e,authors:s,selectedFmt:r,selectedTrans:n})=>{const a=o=>typeof o=="string"&&o.match(/^select/i)?"":o;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"course-info",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("h4",{className:"text-2xl",children:[jsxRuntimeExports.jsx("i",{className:"bi bi-bookmark"})," ",e.title]})}),jsxRuntimeExports.jsx("div",{className:"p-2",children:jsxRuntimeExports.jsx("a",{className:"",href:courseUrlFromSlug(e.slug),target:"_blank",children:jsxRuntimeExports.jsx("i",{className:"fa fa-external-link"})})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(CourseAuthors,{authors:s})}),jsxRuntimeExports.jsx("div",{className:"p-2",children:a(r)}),jsxRuntimeExports.jsx("div",{className:"p-2",children:a(n)})]})]})})},QueueSetup=({logStatusBar:t,clearStatusBar:e,availableFmt:s,setAvailableFmt:r,availableTrans:n,setAvailableTrans:a,selectedFmt:o,setSelectedFmt:l,selectedTrans:i,setSelectedTrans:c,selectFmt:u,selectTrans:f,dmsetup:h,setDmsetup:R,store:g,course:m,sections:E,tocs:p,alreadySetup:b,setAlreadySetup:v,displaySetupUi:d,reconfigureSetup:w=!1,setReconfigureSetup:C,runSetup:S,setRunSetup:L})=>{const[T,k]=reactExports.useState(!1),P=g.get("DMSetup"),N=async H=>{if(h){const{availableFmt:oe,availableTrans:G}=h;r(oe),a(G);return}k(!0),r([]),a([]);const ee=new CourseApi(g),ae=await ee.getCourseInfo(m.slug),ne=await ee.getCourseTocs(m.slug);let q=!1,te,se;if(ne){const oe=Object.keys(ne);if(oe.length>0){const G=oe.shift(),ce=ne[G];ce.length>0&&(te=ce.shift(),se=te.slug,te&&(q=!0))}else console.error("tocKeys is empty")}if(q){console.log(se);const oe=await ee.getStreamLocs(te);let G=oe.filter(me=>me!==null).map(me=>me.fmt);console.log(oe),console.log(G);const ce=await ee.getTranscripts(te);await g.get("PrxCache").unset(te.url);const be=Object.keys(ce).map(me=>{const Re=ce[me].autoGenerated?" - Auto Generated":"",Ce=`${ce[me].lang.toUpperCase()} ${Re}`;return{value:me,text:Ce}});console.log(ce),console.log(be);const fe=ae.exerciseFiles;console.log(fe);const Me=ae.sourceCodeRepository,ke=1,Fe=!1;r(G),a(be);const Ie=await P.create(ae.id,G,o,be,i,Me,fe,ke,Fe);R(Ie)}else alert("Operation Canceled : Could not get first TOC in first Course Section");k(!1)};reactExports.useEffect(()=>{if(h){const H=h.availableFmt,ee=h.selectedFmt,ae=h.availableTrans,ne=h.selectedTrans;ee&&l(ee),ne&&c(ne),r(H),a(ae)}},[h]);const _=async()=>{if(confirm("Are you sure want to finish setup")){const H={status:2,selectedFmt:o,selectedTrans:i};await P.updateByCourseId(m.id,H),w&&C(!1),v(!0)}},K=async()=>{w?C(!1):L(!1)};s.length;const A=o==u?"Not Already setted up":`You select ${o}`,O=b?`Selected video format is ${o}`:A;let V=!1,Y=!1,le=!1;return s.length>0||(w||S)&&(Y=!0),b?w&&(V=!0):S&&(V=!0),Y||(le=!0),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:V?jsxRuntimeExports.jsxs("div",{className:"queue-setup my-2 border p-2 rounded",children:[Y?jsxRuntimeExports.jsx("div",{className:"flex p-2 px-2",children:jsxRuntimeExports.jsx(Button,{onMouseOut:H=>e(),onMouseOver:H=>t("QueueSetup","Click to retrieve available video format or size"),loading:T,icon:"fa fa-cog",onClick:H=>N(),caption:"Get Available Media Format & Transcripts"})}):"",le?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center p-2 px-2",children:[jsxRuntimeExports.jsx("div",{className:"w-[150px]",children:jsxRuntimeExports.jsx("label",{className:"font-bold",children:"Select Format"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(DropdownSelect,{onMouseOut:H=>e(),onMouseOver:H=>t("QueueSetup","Select video size or format"),data:s,selected:o,onSelect:H=>l(H),captionSuffix:"p"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center p-2 px-2",children:[jsxRuntimeExports.jsx("div",{className:"w-[150px]",children:jsxRuntimeExports.jsx("label",{className:"font-bold",children:"Select Transcript Lang"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(DropdownSelect,{onMouseOut:H=>e(),onMouseOver:H=>t("QueueSetup","Select transcript lang"),data:n,selected:i,onSelect:H=>c(H)})})]}),jsxRuntimeExports.jsxs("div",{className:"flex p-2 gap-2",children:[jsxRuntimeExports.jsx(Button,{onMouseOut:H=>e(),onMouseOver:H=>t("QueueSetup","Cancel this setup and back to main queue"),caption:"Cancel",icon:"fa fa-times",onClick:H=>K()}),jsxRuntimeExports.jsx(Button,{onMouseOut:H=>e(),onMouseOver:H=>t("QueueSetup","Finish this setup and back to main queue"),disabled:o==u||i==f,icon:"fa fa-save",onClick:H=>_(),caption:"Finish Setup"})]}),jsxRuntimeExports.jsx("div",{className:"flex p-2",children:O})]}):""]}):""})};async function loader$1({params:t}){const{slug:e}=t;return{slug:e}}const delay=makeDelay(7e3),DownloadManager=({store:t})=>{const e=reactExports.useRef(null),s=reactExports.useRef(null),{slug:r}=useLoaderData(),[n,a]=reactExports.useState(null),[o,l]=reactExports.useState(!1),[i,c]=reactExports.useState(!1),[u,f]=reactExports.useState(!1),[h,R]=reactExports.useState(!1),[g,m]=reactExports.useState(null),E=t.get("DMSetup"),[p,b]=reactExports.useState(!1),[v,d]=reactExports.useState(!1),[w,C]=reactExports.useState(!1),S="Select Media Format",L="Select Transcript Language",[T,k]=reactExports.useState([]),[P,N]=reactExports.useState(S),[_,K]=reactExports.useState([]),[A,O]=reactExports.useState(L),V=async(q,te,se,oe,G)=>{s.current.log(q,te)},Y=async()=>{delay(()=>{s.current.clear()})},le=async()=>{a(null),l(!1),c(!1),m(null),C(!1),d(!1),f(!1),k([]),N(S);const q=await t.mCourse.getCoursePageData(r);await t.mCourse.setLastSlug(r),a(q);const{course:te}=q,se=E.getByCourseId(te.id);document.title=`${te.title} - LLFetcher Download Manager`,se&&(console.log(se),m(se),se.status==2&&c(!0),se.finished&&d(!0))},he=async()=>{b(!1)},H=async()=>{b(!0)},ee=async()=>{d(!1),C(!1);const q=!1;g.finished=q,m(g);const{course:te}=n;await E.updateByCourseId(te.id,{finished:q})},ae=q=>{console.log(q),q&&le()};reactExports.useEffect(()=>{ae(r)},[r]);const ne=q=>{console.log(q);const te=async se=>{const G=await E.updateByCourseId(se.id,{finished:!0});G.finished=!0,m(G)};if(q){console.log(`Updating dmsetup.finished to ${q}`);const{course:se}=n;te(se)}};if(reactExports.useEffect(()=>{ne(v)},[v]),n){console.log(n);const{course:q,authors:te,sections:se,tocs:oe}=n;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"download-manager min-h-[1328px]",children:[jsxRuntimeExports.jsx(CourseInfo,{store:t,course:q,authors:te,selectedFmt:P,selectTrans:L,selectedTrans:A}),jsxRuntimeExports.jsx(ToolbarMan,{alreadySetup:i,setAlreadySetup:c,reconfigureSetup:u,setReconfigureSetup:f,setRunSetup:l,runSetup:o,course:q,sections:se,tocs:oe,dmsetup:g,setAvailableFmt:k,setDmsetup:m,selectedFmt:P,setSelectedFmt:N,queueStarted:p,startDownloadQueue:H,stopDownloadQueue:he,queueFinished:v,setQueueFinished:d,queueManRef:e,queueResume:w,logStatusBar:V,clearStatusBar:Y}),jsxRuntimeExports.jsx(QueueSetup,{alreadySetup:i,setAlreadySetup:c,reconfigureSetup:u,setReconfigureSetup:f,displaySetupUi:h,runSetup:o,setRunSetup:l,course:q,sections:se,tocs:oe,store:t,dmsetup:g,setDmsetup:m,availableFmt:T,setAvailableFmt:k,selectedFmt:P,availableTrans:_,setAvailableTrans:K,selectedTrans:A,setSelectedFmt:N,setSelectedTrans:O,selectFmt:S,selectTrans:L,logStatusBar:V,clearStatusBar:Y}),jsxRuntimeExports.jsx(QueueMan,{alreadySetup:i,reconfigureSetup:u,course:q,sections:se,tocs:oe,store:t,queueStarted:p,stopDownloadQueue:he,queueFinished:v,setQueueFinished:d,resetDownloadQueue:ee,ref:e,setQueueResume:C,selectedFmt:P,logStatusBar:V,clearStatusBar:Y}),jsxRuntimeExports.jsx(StatusbarMan,{store:t,course:q,alreadySetup:i,reconfigureSetup:u,ref:s})]})})}else return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"No data"})};class DBEditorGeneric extends React$1.Component{constructor(s){super(s);Q(this,"inputRef",null);Q(this,"item",null);Q(this,"type",null);Q(this,"field",null);Q(this,"value",null);Q(this,"oldValue",null);Q(this,"gridAction",null);this.item=s.item,this.value=s.value,this.field=s.field,this.inputRef=React$1.createRef(null),s.item&&(this.oldValue=this.value,this.state={value:this.value,editMode:!1})}editRow(){this.setState({editMode:!0}),this.constructor.name=="DBEditorString"&&setTimeout(()=>{jQuery(this.inputRef.current).trigger("focus")},500)}serializeObj(){}async saveRow(){this.cancelRow()}cancelRow(s){this.setState({editMode:!1}),this.gridAction&&this.gridAction.setState({editMode:!1})}setGridAction(s){this.gridAction=s}}class DBEditorBoolean extends DBEditorGeneric{constructor(e){super(e),this.state.isChecked=JSON.parse(this.value)}onCk_clicked(e){this.setState({isChecked:e.target.checked})}onChange(e){const s=e.target.checked;this.setState({value:s})}cancelRow(e){if(e){const s=this.oldValue;this.setState({value:s}),this.setState({isChecked:s})}super.cancelRow()}render(){if(this.item)return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[this.state.editMode?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("input",{type:"checkbox",className:"checkbox -mt-1 mr-1",onChange:e=>{this.onChange(e)},onClick:e=>this.onCk_clicked(e),checked:this.state.isChecked})}):"",jsxRuntimeExports.jsxs("span",{children:[" ",this.state.isChecked?"Yes":"No"]})]})}}const inputCls="py-3 px-4 block w-full border-gray-200 rounded-md text-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400";class DBEditorInteger extends DBEditorGeneric{constructor(e){super(e)}render(){if(this.item)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:this.state.editMode?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("input",{className:inputCls,type:"number",ref:this.inputRef,defaultValue:this.state.value,onKeyUp:e=>this.onKeyUp(e),onChange:e=>this.onChange(e)})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:this.state.value})})}}class DBEditorObject extends DBEditorGeneric{constructor(e){super(e)}render(){if(this.item)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:this.state.value})}}class DBEditorString extends DBEditorGeneric{constructor(e){super(e)}onKeyUp(e){e.keyCode==13?this.saveRow():e.keyCode==27&&this.cancelRow(!0)}onChange(e){const s=e.target.value;this.setState({value:s})}cancelRow(e){if(e){const s=this.oldValue;this.setState({value:s})}super.cancelRow()}render(){if(this.item)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:this.state.editMode?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("input",{className:inputCls,type:"text",ref:this.inputRef,defaultValue:this.state.value,onKeyUp:e=>this.onKeyUp(e),onChange:e=>this.onChange(e)})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:this.state.value})})}}function Pager({limit:t,total_pages:e,page:s,gotoPage:r,path:n="",onRefresh:a}){const o="pager",[l,i]=reactExports.useState(!1);s=parseInt(s),e=parseInt(e),t=parseInt(t);const c=h=>!e||h>e?!1:h>1,u=h=>!e||h>e?!1:h<e,f=()=>{const h=[];for(let R=0;R<e;R++)h.push(R+1);return h};return jsxRuntimeExports.jsxs("nav",{className:"flex items-center place-content-center space-x-2",children:[c(s)?jsxRuntimeExports.jsxs(Link$1,{className:"text-gray-500 hover:text-blue-600 p-4 inline-flex items-center gap-2 rounded-md",to:`${n}/page/${s-1}`,children:[jsxRuntimeExports.jsx("span",{"aria-hidden":"true",children:"«"}),jsxRuntimeExports.jsx("span",{children:"Sebelum"})]},`${o}-min-1`):"",f().map((h,R)=>h==s?jsxRuntimeExports.jsx(Link$1,{className:"w-10 h-10 bg-blue-500 text-white p-4 inline-flex items-center text-sm font-medium rounded-full","aria-current":"page",to:`${n}/page/${h}`,children:h},`${o}-num-${R}`):jsxRuntimeExports.jsx(Link$1,{to:`${n}/page/${h}`,className:"w-10 h-10 text-gray-500 hover:text-blue-600 p-4 inline-flex items-center text-sm font-medium rounded-full",children:h},`${o}-num-${R}`)),u(s)?jsxRuntimeExports.jsxs(Link$1,{className:"text-gray-500 hover:text-blue-600 p-4 inline-flex items-center gap-2 rounded-md",to:`${n}/page/${s+1}`,children:[jsxRuntimeExports.jsx("span",{children:"Selanjutnya"}),jsxRuntimeExports.jsx("span",{"aria-hidden":"true",children:"»"})]},`${o}-plus-1`):"",typeof a=="function"?jsxRuntimeExports.jsx("button",{className:"btn-blue pl-[14px] rounded-full "+(l?"animate-spin":""),onClick:h=>a(h,i),children:jsxRuntimeExports.jsx("i",{className:"bi bi-arrow-repeat"})},`${o}-refresh-1`):""]},o)}const GridItemEmpty=({spanCls:t,limit:e,options:s})=>{const r=s.fields.length+2,n=[0];return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:n.map((a,o)=>jsxRuntimeExports.jsx("tr",{className:"",children:jsxRuntimeExports.jsx("td",{colSpan:r,children:jsxRuntimeExports.jsx("span",{className:"",children:"No records"})})},o))})};class GridActions extends React$1.Component{constructor(e){super(e),this.state={editMode:!1}}getLinkButton(e){e&&e.current&&console.log(e.current.getLinkButton())}render(){const{options:e,item:s,index:r,linkCls:n}=this.props;if(e.enableEdit)return e.callbackActions&&e.callbackActions.edit?e.callbackActions.edit(s,r,e,n,this):jsxRuntimeExports.jsxs(Link,{className:n,to:typeof e.editUrl=="function"?e.editUrl(s):e.editUrl,children:[jsxRuntimeExports.jsx("i",{className:"bi bi-pencil-square"})," Edit"]})}}class GridItems extends React$1.Component{constructor(s){super(s);Q(this,"spanCls","my-2 h-8 block bg-gray-200 rounded-full dark:bg-gray-700");Q(this,"tdCls","px-6 py-4 text-sm font-medium text-gray-800 dark:text-gray-200");Q(this,"tdCls2","px-6 py-4 whitespace-nowrap text-right text-sm font-medium");Q(this,"trCls","odd:bg-white even:bg-gray-100 hover:bg-gray-100 dark:odd:bg-gray-800 dark:even:bg-gray-700 dark:hover:bg-gray-700");Q(this,"linkCls","text-blue-500 hover:text-blue-700");Q(this,"editorFactory",()=>{console.log("dummy editorFactory")})}recordNumber(s){const{page:r,limit:n}=this.props,a=parseInt(s)+1,o=parseInt(r)-1,l=parseInt(n||5);return a+o*l}parseCustomAction(s){const{options:r}=this.props;if(r.actions&&r.actions.edit)return r.actions.edit(s)}render(){const{empty:s,records:r,page:n,limit:a,options:o}=this.props;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:s?jsxRuntimeExports.jsx(GridItemEmpty,{options:o,spanCls:this.spanCls,limit:a}):r.map((l,i)=>jsxRuntimeExports.jsxs("tr",{className:this.trCls,children:[jsxRuntimeExports.jsx("td",{className:this.tdCls,children:this.recordNumber(i)}),o.fields.map((c,u)=>{let f=l[c];try{f=typeof f=="object"?JSON.stringify(f):f.toString()}catch{}let h=f;if(o.callbackFields&&o.callbackFields[c]&&(h=o.callbackFields[c](c,f,l,i)),o.useAutoEditor){let R="string";try{o.editors[u]}catch{}h=o.editorFactory(R,c,f,l,i,u)}return jsxRuntimeExports.jsx("td",{className:this.tdCls+" truncate ...",children:h},u)}),jsxRuntimeExports.jsx("td",{className:this.tdCls2,children:jsxRuntimeExports.jsx(GridActions,{options:o,index:i,item:l,linkCls:this.linkCls})})]},i))})}}const GridHeaders=({options:t})=>{const e="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",s=t.numberWidthCls||"",r=t.actionWidthCls||"";return jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{scope:"col",className:`${s} ${e}`,children:"No"}),t.headers.map((n,a)=>{const o=t.widthCls[a]||"";return jsxRuntimeExports.jsx("th",{scope:"col",className:`${o} ${e}`,children:n},a)}),jsxRuntimeExports.jsx("th",{scope:"col",className:`${r} ${e}`,children:"Action"})]})};class GridTable extends React$1.Component{constructor(e){super(e),this.state={records:this.props.records}}async componentWillReceiveProps(e){const s=e.records;this.setState({records:[]},r=>{this.setState({records:s})})}render(){const{page:e,limit:s,options:r,context:n}=this.props,{records:a}=this.state,o="min-w-full divide-y divide-gray-200 dark:divide-gray-700",l=a?!(a.length>0):!1;return jsxRuntimeExports.jsxs("table",{className:o,children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsx(GridHeaders,{options:r})}),jsxRuntimeExports.jsx("tbody",{children:jsxRuntimeExports.jsx(GridItems,{empty:l,context:n,records:a,page:e,limit:s,options:r})})]})}}class Grid extends React$1.Component{constructor(e){super(e)}render(){return jsxRuntimeExports.jsx(GridTable,{...this.props,context:this})}}const tables={section:{headers:["Course","Slug","Title","TOC IDS","Item Stars"],fields:["courseId","slug","title","tocIds","itemStars"],model:"Section",listMethod:"getList"},"stream-location":{headers:["Toc ID","Fmt","Url","Expires At"],fields:["tocId","fmt","url","expiresAt"],model:"StreamLocation",listMethod:"getList"},"exercise-file":{headers:["Course ID","File Name","Url","Size in Bytes"],fields:["courseId","name","url","size"],model:"ExerciseFile",listMethod:"getList"},author:{headers:["Name","Slug","Biography","Short Biography","Course IDS"],fields:["name","slug","biography","shortBiography","courseIds"],model:"Author",listMethod:"getList"},transcript:{headers:["TocID","Lang","Country","Fmt","Url","Auto Generated"],fields:["tocId","lang","country","fmt","url","autoGenerated"],model:"Transcript",listMethod:"getList"},toc:{headers:["Section ID","Title","Slug","URL","DURATION","STREAMLOCS IDs","Item Star","V Status Urn"],fields:["sectionId","title","slug","url","duration","streamLocationIds","itemStar","vStatusUrn"],model:"Toc",listMethod:"getList"},course:{headers:["Title","Slug","Author IDS","Urn"],fields:["title","slug","authorIds","urn"],model:"Course",listMethod:"getList"},download:{headers:["Filename","Status"],fields:["filename","status"],model:"Download",listMethod:"getList"},"download-state":{headers:["courseId","Status"],fields:["course","status"],model:"DownloadState",listMethod:"getListWithCourse"},"download-config":{headers:["courseId","fmtList","selectedFmtList"],fields:["course","fmtList","selectedFmtList"],model:"DownloadConfig",listMethod:"getListWithCourse"},"dm-setup":{headers:["Course","Status","Finished","Available Fmt","Selected Fmt","Selected Trans","Exercise File","Source Repo","Available Trans"],fields:["course","status","finished","availableFmt","selectedFmt","selectedTrans","exerciseFile","sourceRepo","availableTrans"],model:"DMSetup",editors:["string","boolean","integer","string","string","string","string"],listMethod:"getListWithCourse"},"dm-status":{headers:["Course","VIndex","Meta Status","Video Status","Caption Status","Video Size","Caption Size","Dt Meta Start","Dt Video Start","Dt Caption Start","Dt Meta End","Dt Video End","Dt Caption End","Dl Meta Retry Count","Dl Video Retry Count","Dl Caption Retry Count","Finished","Interupted","Last Error"],fields:["course","vIndex","metaStatus","videoStatus","captionStatus","videoSz","captionSz","dtMetaStart","dtVideoStart","dtCaptionStart","dtMetaEnd","dtVideoEnd","dtCaptionEnd","dlMetaRetryCount","dlVideoRetryCount","dlCaptionRetryCount","finished","interupted","lastError"],model:"DMStatus",listMethod:"getListWithCourse"},cookie:{headers:["Path","Content","Save Date"],fields:["path","content","dtSaved"],model:"Cookie",listMethod:"getAll"}},config$1={tables},DBExplorer=({store:t,table:e,page:s})=>{const[r,n]=reactExports.useState(null),[a,o]=reactExports.useState(null),[l,i]=reactExports.useState("");reactExports.useState([]);const c=[],[u,f]=reactExports.useState({records:[],limit:5,page:1,total_pages:0,total_records:0,order_by:"key",order_dir:"asc"}),h=async v=>{const d=Object.assign({},u);v=v??1,d.page=v,d.limit=u.limit??5,d.records=[],f(null),console.log(r);try{d.records=r[a.listMethod](),f(d),console.log(d)}catch(w){console.error(w)}};reactExports.useEffect(()=>{if(r){const v=s??1;console.log(v),h(v)}else i("No Model Set")},[s,r]),reactExports.useEffect(()=>{if(e){n(null),o(null);const v=config$1.tables[e];if(v){const d=v.model,w=t.get(d);console.log(v,d,w),o(v),n(w)}else i(`No config set for ${e} table`)}},[e]);const R=async(v,d)=>{d(!0),await h(u.page),d(!1)},g=(v,d,w,C,S,L)=>{c[`${S}-${L}-${d}`]||(c[`${S}-${L}-${d}`]=React$1.createRef(null));const T=c[`${S}-${L}-${d}`];return{boolean:jsxRuntimeExports.jsx(DBEditorBoolean,{item:C,field:d,value:w,ref:T}),string:jsxRuntimeExports.jsx(DBEditorString,{item:C,field:d,value:w,ref:T}),object:jsxRuntimeExports.jsx(DBEditorObject,{item:C,field:d,value:w,ref:T}),integer:jsxRuntimeExports.jsx(DBEditorInteger,{item:C,field:d,value:w,ref:T})}[v]},m=async(v,d,w,C,S)=>{w.fields.map((L,T)=>{c[`${d}-${T}-${L}`].current.cancelRow()}),S.setState({editMode:!1})},E=async(v,d,w,C,S)=>{w.fields.map((T,k)=>{const P=c[`${d}-${k}-${T}`].current;P.state.editMode?P.saveRow():P.editRow()});const L=S.state.editMode;S.setState({editMode:!L})},p={numberWidthCls:"",actionWidthCls:"",widthCls:["3/8","5/8"],headers:["Setting","Value"],fields:["key","value"],enableEdit:!0,callbackFields:{},useAutoEditor:!0,callbackActions:{edit:(v,d,w,C,S)=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[" ",jsxRuntimeExports.jsxs("button",{className:C,onClick:L=>E(v,d,w,C,S),children:[jsxRuntimeExports.jsx("i",{className:"bi bi-pencil-square"})," ",S.state.editMode?"Save":"Edit"]}),S.state.editMode?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("button",{className:"ml-2 "+C,onClick:L=>m(v,d,w,C,S),children:[jsxRuntimeExports.jsx("i",{className:"bi bi-x-circle"})," Cancel"]})}):""]})}},b="border mb-2 rounded-xl shadow-sm p-6 dark:bg-gray-800 dark:border-gray-700";return r?(p.headers=a.headers,p.fields=a.fields,p.editors=a.editors,p.editorFactory=g,jsxRuntimeExports.jsx("div",{className:b,children:jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:jsxRuntimeExports.jsx("div",{className:"-m-1.5 overflow-x-auto",children:jsxRuntimeExports.jsxs("div",{className:"p-1.5 min-w-full inline-block align-middle",children:[jsxRuntimeExports.jsx("div",{className:"overflow-hidden",children:jsxRuntimeExports.jsx(Grid,{options:p,records:u.records,page:u.page,limit:u.limit})}),jsxRuntimeExports.jsx("div",{className:"pager-container mt-3",children:jsxRuntimeExports.jsx(Pager,{path:"/DBerences/tts-server",page:u.page,total_pages:u.total_pages,limit:u.limit,onRefresh:R})})]})})})})):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:l})},availables=["PrxCache","Transcript","App","Author","Course","Download","DownloadConfig","DownloadState","ExerciseFile","Section","StreamLocation","Toc","Message","DMSetup","DMStatus","Cookie"],schema={availables},DBTableManager=({store:t,config:e})=>{const[s,r]=reactExports.useState({records:[],limit:5,page:1,total_pages:0,total_records:0,order_by:"key",order_dir:"asc"}),[n,a]=reactExports.useState([]),[o,l]=reactExports.useState(0),i=p=>p,c=async(p,b)=>{if(confirm(`The ${p.table} table is going droped, are you sure want to reinit ?`)){console.log(`Reinitit ${p.table} table`);let v=Object.assign([],n);v[b]=!0,a(v);const d=t.get(p.table);d&&(p.table=="PrxCache"?await d.clearAll():await d.truncate()),v=Object.assign([],n),v[b]=!1,a(v),f(),g(),e.getUiConfig().reloadSidebar()}console.log(p)},u={numberWidthCls:"",actionWidthCls:"",widthCls:["1/4","3/4"],headers:["Table","Desc","Size","Counts"],fields:["table","desc","size","counts"],enableEdit:!0,callbackFields:{},callbackActions:{edit:(p,b,v,d,w)=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{loading:n[b],icon:"fa fa-trash",caption:"Truncate",onClick:C=>c(p,b)})})}},f=async()=>{const p=await t.getStorageSize();l(p)},h=async p=>{let b=0;if(p=="PrxCache")b=await t.get("PrxCache").getCounts();else{const d=t.get(p).table;b=t.getCounts(d)}return b},R=async p=>{let b=0;if(p=="PrxCache")b=await t.get("PrxCache").getSize();else{const d=t.get(p).table;b=await t.getStorageSize(d)}return formatBytes(b)},g=async()=>{const p=Object.assign({},s);r(null),a([]);const b=[];for(const d of schema.availables){const w="",C=await R(d),S=await h(d),L={table:d,desc:w,size:C,counts:S};b.push(L)}const v=schema.availables.map(d=>!1);a(v),p.records=b,r(p),f()};reactExports.useEffect(()=>{g()},[]);const m=async()=>{let p=document.createElement("a");const b="db.json";let v={records:{}};t.availables.map(C=>{v.records[C]={},t.get(C).getAll().map(S=>{v.records[C][S.id]=S})});let d=JSON.stringify(v);const w=window.URL.createObjectURL(new Blob([d]));p.download=b,p.href=w,p.click()},E="db-table-manager border mb-2 rounded-xl shadow-sm p-6 dark:bg-gray-800 dark:border-gray-700";return jsxRuntimeExports.jsxs("div",{className:E,children:[jsxRuntimeExports.jsx("div",{className:"explorer-toolbar",children:jsxRuntimeExports.jsxs("div",{className:"button-group",children:[jsxRuntimeExports.jsx(Button,{onClick:p=>m(),caption:"Export to json",icon:"fa fa-file-text"}),jsxRuntimeExports.jsx(Button,{onClick:p=>p,icon:"fa fa-save",caption:"Storage Size : "+formatBytes(o)})]})}),jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:jsxRuntimeExports.jsx("div",{className:"-m-1.5 overflow-x-auto",children:jsxRuntimeExports.jsxs("div",{className:"p-1.5 min-w-full inline-block align-middle",children:[jsxRuntimeExports.jsx("div",{className:"overflow-hidden",children:s?jsxRuntimeExports.jsx(Grid,{options:u,records:s.records,page:s.page,limit:s.limit}):""}),jsxRuntimeExports.jsx("div",{className:"pager-container mt-3",children:s?jsxRuntimeExports.jsx(Pager,{path:"/database",page:s.page,total_pages:s.total_pages,limit:s.limit,onRefresh:i}):""})]})})})]})};async function loader({params:t}){const{table:e,page:s}=t;return{table:e,page:s}}const DatabasePage=({store:t,config:e})=>{const{table:s,page:r}=useLoaderData(),n=s?"explorer":"manager";return jsxRuntimeExports.jsxs("div",{className:"database-page",children:[n==="explorer"?jsxRuntimeExports.jsx(DBExplorer,{store:t,table:s,page:r}):"",n==="manager"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(DBTableManager,{store:t,config:e})}):""]})};function ErrorPage(){const t=useRouteError();console.error(t);const e=s=>{if(s)return s.toString().split("").map((r,n)=>jsxRuntimeExports.jsx("i",{className:`bi bi-${r}-square`},n))};return jsxRuntimeExports.jsxs("div",{id:"error-page",className:"dark:text-slate-500 p-4 text-center",children:[jsxRuntimeExports.jsx("h1",{children:"Oops!"}),jsxRuntimeExports.jsx("p",{children:"Sorry, an unexpected error has occurred."}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("i",{children:t.statusText||t.message})}),jsxRuntimeExports.jsx("p",{children:e(t.status)})]})}function Router({config:t,store:e}){const s=createHashRouter(createRoutesFromChildren(jsxRuntimeExports.jsxs(Route,{path:"/",errorElement:jsxRuntimeExports.jsx(ErrorPage,{}),element:jsxRuntimeExports.jsx(Template,{config:t,store:e}),children:[jsxRuntimeExports.jsx(Route,{path:"/course",element:jsxRuntimeExports.jsx(CoursePage,{store:e}),loader:loader$2}),jsxRuntimeExports.jsx(Route,{path:"/course/:ctl/:slug",element:jsxRuntimeExports.jsx(CoursePage,{store:e,config:t}),loader:loader$2}),jsxRuntimeExports.jsx(Route,{path:"/manager/:slug",element:jsxRuntimeExports.jsx(DownloadManager,{store:e}),loader:loader$1}),jsxRuntimeExports.jsx(Route,{path:"/database",element:jsxRuntimeExports.jsx(DatabasePage,{store:e,config:t}),loader}),jsxRuntimeExports.jsx(Route,{path:"/database/:table",element:jsxRuntimeExports.jsx(DatabasePage,{store:e,config:t}),loader}),jsxRuntimeExports.jsx(Route,{path:"/database/:table/:page",element:jsxRuntimeExports.jsx(DatabasePage,{store:e}),loader}),jsxRuntimeExports.jsx(Route,{path:"/database",element:jsxRuntimeExports.jsx(DatabasePage,{store:e})})]})));return jsxRuntimeExports.jsx(RouterProvider,{router:s})}class LsConfig{constructor(e){Q(this,"config_key",null);Q(this,"data",null);this.config_key=e,this.init()}init(){this.config_key||(config_key=`ls_config_${v4()}`),this.getData()}setConfigKey(e){this.config_key=e}getData(e){try{this.data=JSON.parse(localStorage[this.config_key])}catch{this.data||(this.data={})}return e?this.data[e]?this.data[e]:null:this.data}setData(e,s){this.data[e]=s,localStorage[this.config_key]=JSON.stringify(this.data)}}class UiConfig extends LsConfig{constructor(){super("uiTtsConfig");Q(this,"defaultTheme","default-theme.css");Q(this,"hiddenSidebar_callback_keys",[]);Q(this,"reloadSidebar_callback_keys",[]);this.setData("defaultTheme",this.defaultTheme)}reloadSidebar(){jQuery("#main-content").trigger("reloadSidebar")}setHiddenSidebarStatus(s=!0){const r=jQuery("#main-content");r.prop("hideSidebar",s),r.trigger("hideSidebar"),this.setData("hideSidebar",s)}getHiddenSidebarStatus(){return this.getData("hideSidebar")}applyHiddenSidebarStatus(s,r,n){if(s(this.getHiddenSidebarStatus()),typeof r=="function"&&!this.hiddenSidebar_callback_keys.includes(n)){const a=jQuery("#main-content");a.on("hideSidebar",()=>{r(a.prop("hideSidebar"))}),this.hiddenSidebar_callback_keys.push(n)}}applyReloadSidebar(s,r){typeof s=="function"&&(this.reloadSidebar_callback_keys.includes(r)||(jQuery("#main-content").on("reloadSidebar",()=>{console.log(this.reloadSidebar_callback_keys),s()}),this.reloadSidebar_callback_keys.push(r)))}}const pe=class pe{constructor(){Q(this,"mode","development");Q(this,"uiConfig",null);this.uiConfig=new UiConfig}static getInstance(){return pe.instance instanceof pe||(pe.instance=pe.factory()),pe.instance}static factory(){return new pe}getUiConfig(){return this.uiConfig}};Q(pe,"instance",null);let AppConfig=pe;window.alert=function(t){console.log("Custom alert:",t);const{dialogContentRef:e}=window;e.current.alert("Alert",t)};console.log("option-main.jsx");const store=Store.getInstance(),config=AppConfig.getInstance();store.ready(()=>{client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React$1.StrictMode,{children:jsxRuntimeExports.jsx(Router,{store,config})}))});
