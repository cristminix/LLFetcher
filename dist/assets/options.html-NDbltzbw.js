var st=Object.defineProperty;var nt=(t,e,s)=>e in t?st(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var H=(t,e,s)=>(nt(t,typeof e!="symbol"?e+"":e,s),s);import{a as appLogo,B as Button,A as AdvancedSelect,S as Store}from"./font-awesome.min-f7hAjv_o.js";import{r as reactExports,e as React,f as ReactDOM,b as jsxRuntimeExports,j as jQuery,R as React$1,g as formatBytes,h as formatLeadingZeros,t as timeout,i as calculateSpeed,k as crc32,l as createDownloadFile,m as makeDelay,d as client}from"./index-7gdwcDAI.js";import"./index-default-lPYrPALU.js";let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let t=0;t<256;++t)byteToHex.push((t+256).toString(16).slice(1));function unsafeStringify(t,e=0){return byteToHex[t[e+0]]+byteToHex[t[e+1]]+byteToHex[t[e+2]]+byteToHex[t[e+3]]+"-"+byteToHex[t[e+4]]+byteToHex[t[e+5]]+"-"+byteToHex[t[e+6]]+byteToHex[t[e+7]]+"-"+byteToHex[t[e+8]]+byteToHex[t[e+9]]+"-"+byteToHex[t[e+10]]+byteToHex[t[e+11]]+byteToHex[t[e+12]]+byteToHex[t[e+13]]+byteToHex[t[e+14]]+byteToHex[t[e+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(t,e,s){if(native.randomUUID&&!e&&!t)return native.randomUUID();t=t||{};const n=t.random||(t.rng||rng)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){s=s||0;for(let r=0;r<16;++r)e[s+r]=n[r];return e}return unsafeStringify(n)}/**
 * @remix-run/router v1.13.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},_extends$a.apply(this,arguments)}var Action;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createHashHistory(t){t===void 0&&(t={});function e(r,a){let{pathname:o="/",search:l="",hash:i=""}=parsePath(r.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),createLocation("",{pathname:o,search:l,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(r,a){let o=r.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let i=r.location.href,c=i.indexOf("#");l=c===-1?i:i.slice(0,c)}return l+"#"+(typeof a=="string"?a:createPath(a))}function n(r,a){warning(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return getUrlBasedHistory(e,s,n,t)}function invariant(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function warning(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,s,n){return s===void 0&&(s=null),_extends$a({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:s,key:e&&e.key||n||createKey()})}function createPath(t){let{pathname:e="/",search:s="",hash:n=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function parsePath(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,s,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:a=!1}=n,o=r.history,l=Action.Pop,i=null,c=u();c==null&&(c=0,o.replaceState(_extends$a({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=Action.Pop;let g=u(),f=g==null?null:g-c;c=g,i&&i({action:l,location:R.location,delta:f})}function m(g,f){l=Action.Push;let S=createLocation(R.location,g,f);s&&s(S,g),c=u()+1;let y=getHistoryState(S,c),d=R.createHref(S);try{o.pushState(y,"",d)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;r.location.assign(d)}a&&i&&i({action:l,location:R.location,delta:1})}function E(g,f){l=Action.Replace;let S=createLocation(R.location,g,f);s&&s(S,g),c=u();let y=getHistoryState(S,c),d=R.createHref(S);o.replaceState(y,"",d),a&&i&&i({action:l,location:R.location,delta:0})}function p(g){let f=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof g=="string"?g:createPath(g);return invariant(f,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,f)}let R={get action(){return l},get location(){return t(r,o)},listen(g){if(i)throw new Error("A history only accepts one active listener");return r.addEventListener(PopStateEventType,h),i=g,()=>{r.removeEventListener(PopStateEventType,h),i=null}},createHref(g){return e(r,g)},createURL:p,encodeLocation(g){let f=p(g);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:m,replace:E,go(g){return o.go(g)}};return R}var ResultType;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ResultType||(ResultType={}));const immutableRouteKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isIndexRoute(t){return t.index===!0}function convertRoutesToDataRoutes(t,e,s,n){return s===void 0&&(s=[]),n===void 0&&(n={}),t.map((r,a)=>{let o=[...s,a],l=typeof r.id=="string"?r.id:o.join("-");if(invariant(r.index!==!0||!r.children,"Cannot specify children on an index route"),invariant(!n[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),isIndexRoute(r)){let i=_extends$a({},r,e(r),{id:l});return n[l]=i,i}else{let i=_extends$a({},r,e(r),{id:l,children:void 0});return n[l]=i,r.children&&(i.children=convertRoutesToDataRoutes(r.children,e,o,n)),i}})}function matchRoutes(t,e,s){s===void 0&&(s="/");let n=typeof e=="string"?parsePath(e):e,r=stripBasename(n.pathname||"/",s);if(r==null)return null;let a=flattenRoutes(t);rankRouteBranches(a);let o=null;for(let l=0;o==null&&l<a.length;++l)o=matchRouteBranch(a[l],safelyDecodeURI(r));return o}function convertRouteMatchToUiMatch(t,e){let{route:s,pathname:n,params:r}=t;return{id:s.id,pathname:n,params:r,data:e[s.id],handle:s.handle}}function flattenRoutes(t,e,s,n){e===void 0&&(e=[]),s===void 0&&(s=[]),n===void 0&&(n="");let r=(a,o,l)=>{let i={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};i.relativePath.startsWith("/")&&(invariant(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),i.relativePath=i.relativePath.slice(n.length));let c=joinPaths([n,i.relativePath]),u=s.concat(i);a.children&&a.children.length>0&&(invariant(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),flattenRoutes(a.children,e,u,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:computeScore(c,a.index),routesMeta:u})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))r(a,o);else for(let i of explodeOptionalSegments(a.path))r(a,o,i)}),e}function explodeOptionalSegments(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,r=s.endsWith("?"),a=s.replace(/\?$/,"");if(n.length===0)return r?[a,""]:[a];let o=explodeOptionalSegments(n.join("/")),l=[];return l.push(...o.map(i=>i===""?a:[a,i].join("/"))),r&&l.push(...o),l.map(i=>t.startsWith("/")&&i===""?"/":i)}function rankRouteBranches(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:compareIndexes(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,e){let s=t.split("/"),n=s.length;return s.some(isSplat)&&(n+=splatPenalty),e&&(n+=indexRouteValue),s.filter(r=>!isSplat(r)).reduce((r,a)=>r+(paramRe.test(a)?dynamicSegmentValue:a===""?emptySegmentValue:staticSegmentValue),n)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e){let{routesMeta:s}=t,n={},r="/",a=[];for(let o=0;o<s.length;++o){let l=s[o],i=o===s.length-1,c=r==="/"?e:e.slice(r.length)||"/",u=matchPath({path:l.relativePath,caseSensitive:l.caseSensitive,end:i},c);if(!u)return null;Object.assign(n,u.params);let h=l.route;a.push({params:n,pathname:joinPaths([r,u.pathname]),pathnameBase:normalizePathname(joinPaths([r,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(r=joinPaths([r,u.pathnameBase]))}return a}function matchPath(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=compilePath(t.path,t.caseSensitive,t.end),r=e.match(s);if(!r)return null;let a=r[0],o=a.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:n.reduce((c,u,h)=>{let{paramName:m,isOptional:E}=u;if(m==="*"){let R=l[h]||"";o=a.slice(0,a.length-R.length).replace(/(.)\/+$/,"$1")}const p=l[h];return E&&!p?c[m]=void 0:c[m]=safelyDecodeURIComponent(p||"",m),c},{}),pathname:a,pathnameBase:o,pattern:t}}function compilePath(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),warning(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(o,l,i)=>(n.push({paramName:l,isOptional:i!=null}),i?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function safelyDecodeURI(t){try{return decodeURI(t)}catch(e){return warning(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function safelyDecodeURIComponent(t,e){try{return decodeURIComponent(t)}catch(s){return warning(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+s+").")),t}}function stripBasename(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}function resolvePath(t,e){e===void 0&&(e="/");let{pathname:s,search:n="",hash:r=""}=typeof t=="string"?parsePath(t):t;return{pathname:s?s.startsWith("/")?s:resolvePathname(s,e):e,search:normalizeSearch(n),hash:normalizeHash(r)}}function resolvePathname(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?s.length>1&&s.pop():r!=="."&&s.push(r)}),s.length>1?s.join("/"):"/"}function getInvalidPathError(t,e,s,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function resolveTo(t,e,s,n){n===void 0&&(n=!1);let r;typeof t=="string"?r=parsePath(t):(r=_extends$a({},t),invariant(!r.pathname||!r.pathname.includes("?"),getInvalidPathError("?","pathname","search",r)),invariant(!r.pathname||!r.pathname.includes("#"),getInvalidPathError("#","pathname","hash",r)),invariant(!r.search||!r.search.includes("#"),getInvalidPathError("#","search","hash",r)));let a=t===""||r.pathname==="",o=a?"/":r.pathname,l;if(o==null)l=s;else if(n){let h=e[e.length-1].replace(/^\//,"").split("/");if(o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h.pop();r.pathname=m.join("/")}l="/"+h.join("/")}else{let h=e.length-1;if(o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;r.pathname=m.join("/")}l=h>=0?e[h]:"/"}let i=resolvePath(r,l),c=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&s.endsWith("/");return!i.pathname.endsWith("/")&&(c||u)&&(i.pathname+="/"),i}const joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class ErrorResponseImpl{constructor(e,s,n,r){r===void 0&&(r=!1),this.status=e,this.statusText=s||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX$1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,defaultMapRouteProperties=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY="remix-router-transitions";function createRouter(t){const e=t.window?t.window:typeof window<"u"?window:void 0,s=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",n=!s;invariant(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r;if(t.mapRouteProperties)r=t.mapRouteProperties;else if(t.detectErrorBoundary){let x=t.detectErrorBoundary;r=j=>({hasErrorBoundary:x(j)})}else r=defaultMapRouteProperties;let a={},o=convertRoutesToDataRoutes(t.routes,r,void 0,a),l,i=t.basename||"/",c=_extends$a({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_prependBasename:!1},t.future),u=null,h=new Set,m=null,E=null,p=null,R=t.hydrationData!=null,g=matchRoutes(o,t.history.location,i),f=null;if(g==null){let x=getInternalRouterError(404,{pathname:t.history.location.pathname}),{matches:j,route:v}=getShortCircuitMatches(o);g=j,f={[v.id]:x}}let S=!g.some(x=>x.route.lazy)&&(!g.some(x=>x.route.loader)||t.hydrationData!=null),y,d={historyAction:t.history.action,location:t.history.location,matches:g,initialized:S,navigation:IDLE_NAVIGATION,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||f,fetchers:new Map,blockers:new Map},w=Action.Pop,N=!1,b,T=!1,k=new Map,A=null,_=!1,C=!1,I=[],Q=[],P=new Map,O=0,G=-1,oe=new Map,ne=new Set,re=new Map,le=new Map,ae=new Set,K=new Map,Y=new Map,de=!1;function he(){if(u=t.history.listen(x=>{let{action:j,location:v,delta:D}=x;if(de){de=!1;return}warning(Y.size===0||D!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let M=Ke({currentLocation:d.location,nextLocation:v,historyAction:j});if(M&&D!=null){de=!0,t.history.go(D*-1),Le(M,{state:"blocked",location:v,proceed(){Le(M,{state:"proceeding",proceed:void 0,reset:void 0,location:v}),t.history.go(D)},reset(){let U=new Map(d.blockers);U.set(M,IDLE_BLOCKER),B({blockers:U})}});return}return ce(j,v)}),s){restoreAppliedTransitions(e,k);let x=()=>persistAppliedTransitions(e,k);e.addEventListener("pagehide",x),A=()=>e.removeEventListener("pagehide",x)}return d.initialized||ce(Action.Pop,d.location),y}function je(){u&&u(),A&&A(),h.clear(),b&&b.abort(),d.fetchers.forEach((x,j)=>Te(j)),d.blockers.forEach((x,j)=>Qe(j))}function xe(x){return h.add(x),()=>h.delete(x)}function B(x,j){j===void 0&&(j={}),d=_extends$a({},d,x);let v=[],D=[];c.v7_fetcherPersist&&d.fetchers.forEach((M,U)=>{M.state==="idle"&&(ae.has(U)?D.push(U):v.push(U))}),[...h].forEach(M=>M(d,{deletedFetchers:D,unstable_viewTransitionOpts:j.viewTransitionOpts,unstable_flushSync:j.flushSync===!0})),c.v7_fetcherPersist&&(v.forEach(M=>d.fetchers.delete(M)),D.forEach(M=>Te(M)))}function W(x,j,v){var D,M;let{flushSync:U}=v===void 0?{}:v,$=d.actionData!=null&&d.navigation.formMethod!=null&&isMutationMethod(d.navigation.formMethod)&&d.navigation.state==="loading"&&((D=x.state)==null?void 0:D._isRedirect)!==!0,F;j.actionData?Object.keys(j.actionData).length>0?F=j.actionData:F=null:$?F=d.actionData:F=null;let L=j.loaderData?mergeLoaderData(d.loaderData,j.loaderData,j.matches||[],j.errors):d.loaderData,z=d.blockers;z.size>0&&(z=new Map(z),z.forEach((X,Z)=>z.set(Z,IDLE_BLOCKER)));let se=N===!0||d.navigation.formMethod!=null&&isMutationMethod(d.navigation.formMethod)&&((M=x.state)==null?void 0:M._isRedirect)!==!0;l&&(o=l,l=void 0),_||w===Action.Pop||(w===Action.Push?t.history.push(x,x.state):w===Action.Replace&&t.history.replace(x,x.state));let V;if(w===Action.Pop){let X=k.get(d.location.pathname);X&&X.has(x.pathname)?V={currentLocation:d.location,nextLocation:x}:k.has(x.pathname)&&(V={currentLocation:x,nextLocation:d.location})}else if(T){let X=k.get(d.location.pathname);X?X.add(x.pathname):(X=new Set([x.pathname]),k.set(d.location.pathname,X)),V={currentLocation:d.location,nextLocation:x}}B(_extends$a({},j,{actionData:F,loaderData:L,historyAction:w,location:x,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:We(x,j.matches||d.matches),preventScrollReset:se,blockers:z}),{viewTransitionOpts:V,flushSync:U===!0}),w=Action.Pop,N=!1,T=!1,_=!1,C=!1,I=[],Q=[]}async function q(x,j){if(typeof x=="number"){t.history.go(x);return}let v=normalizeTo(d.location,d.matches,i,c.v7_prependBasename,x,j==null?void 0:j.fromRouteId,j==null?void 0:j.relative),{path:D,submission:M,error:U}=normalizeNavigateOptions(c.v7_normalizeFormMethod,!1,v,j),$=d.location,F=createLocation(d.location,D,j&&j.state);F=_extends$a({},F,t.history.encodeLocation(F));let L=j&&j.replace!=null?j.replace:void 0,z=Action.Push;L===!0?z=Action.Replace:L===!1||M!=null&&isMutationMethod(M.formMethod)&&M.formAction===d.location.pathname+d.location.search&&(z=Action.Replace);let se=j&&"preventScrollReset"in j?j.preventScrollReset===!0:void 0,V=(j&&j.unstable_flushSync)===!0,X=Ke({currentLocation:$,nextLocation:F,historyAction:z});if(X){Le(X,{state:"blocked",location:F,proceed(){Le(X,{state:"proceeding",proceed:void 0,reset:void 0,location:F}),q(x,j)},reset(){let Z=new Map(d.blockers);Z.set(X,IDLE_BLOCKER),B({blockers:Z})}});return}return await ce(z,F,{submission:M,pendingError:U,preventScrollReset:se,replace:j&&j.replace,enableViewTransition:j&&j.unstable_viewTransition,flushSync:V})}function te(){if(Se(),B({revalidation:"loading"}),d.navigation.state!=="submitting"){if(d.navigation.state==="idle"){ce(d.historyAction,d.location,{startUninterruptedRevalidation:!0});return}ce(w||d.historyAction,d.navigation.location,{overrideNavigation:d.navigation})}}async function ce(x,j,v){b&&b.abort(),b=null,w=x,_=(v&&v.startUninterruptedRevalidation)===!0,Ye(d.location,d.matches),N=(v&&v.preventScrollReset)===!0,T=(v&&v.enableViewTransition)===!0;let D=l||o,M=v&&v.overrideNavigation,U=matchRoutes(D,j,i),$=(v&&v.flushSync)===!0;if(!U){let Z=getInternalRouterError(404,{pathname:j.pathname}),{matches:ie,route:ge}=getShortCircuitMatches(D);Ae(),W(j,{matches:ie,loaderData:{},errors:{[ge.id]:Z}},{flushSync:$});return}if(d.initialized&&!C&&isHashChangeOnly(d.location,j)&&!(v&&v.submission&&isMutationMethod(v.submission.formMethod))){W(j,{matches:U},{flushSync:$});return}b=new AbortController;let F=createClientSideRequest(t.history,j,b.signal,v&&v.submission),L,z;if(v&&v.pendingError)z={[findNearestBoundary(U).route.id]:v.pendingError};else if(v&&v.submission&&isMutationMethod(v.submission.formMethod)){let Z=await Ne(F,j,v.submission,U,{replace:v.replace,flushSync:$});if(Z.shortCircuited)return;L=Z.pendingActionData,z=Z.pendingActionError,M=getLoadingNavigation(j,v.submission),$=!1,F=new Request(F.url,{signal:F.signal})}let{shortCircuited:se,loaderData:V,errors:X}=await ke(F,j,U,M,v&&v.submission,v&&v.fetcherSubmission,v&&v.replace,$,L,z);se||(b=null,W(j,_extends$a({matches:U},L?{actionData:L}:{},{loaderData:V,errors:X})))}async function Ne(x,j,v,D,M){M===void 0&&(M={}),Se();let U=getSubmittingNavigation(j,v);B({navigation:U},{flushSync:M.flushSync===!0});let $,F=getTargetMatch(D,j);if(!F.route.action&&!F.route.lazy)$={type:ResultType.error,error:getInternalRouterError(405,{method:x.method,pathname:j.pathname,routeId:F.route.id})};else if($=await callLoaderOrAction("action",x,F,D,a,r,i),x.signal.aborted)return{shortCircuited:!0};if(isRedirectResult($)){let L;return M&&M.replace!=null?L=M.replace:L=$.location===d.location.pathname+d.location.search,await ye(d,$,{submission:v,replace:L}),{shortCircuited:!0}}if(isErrorResult($)){let L=findNearestBoundary(D,F.route.id);return(M&&M.replace)!==!0&&(w=Action.Push),{pendingActionData:{},pendingActionError:{[L.route.id]:$.error}}}if(isDeferredResult($))throw getInternalRouterError(400,{type:"defer-action"});return{pendingActionData:{[F.route.id]:$.data}}}async function ke(x,j,v,D,M,U,$,F,L,z){let se=D||getLoadingNavigation(j,M),V=M||U||getSubmissionFromNavigation(se),X=l||o,[Z,ie]=getMatchesToLoad(t.history,d,v,V,j,C,I,Q,ae,re,ne,X,i,L,z);if(Ae(J=>!(v&&v.some(ue=>ue.route.id===J))||Z&&Z.some(ue=>ue.route.id===J)),G=++O,Z.length===0&&ie.length===0){let J=He();return W(j,_extends$a({matches:v,loaderData:{},errors:z||null},L?{actionData:L}:{},J?{fetchers:new Map(d.fetchers)}:{}),{flushSync:F}),{shortCircuited:!0}}if(!_){ie.forEach(ue=>{let ee=d.fetchers.get(ue.key),be=getLoadingFetcher(void 0,ee?ee.data:void 0);d.fetchers.set(ue.key,be)});let J=L||d.actionData;B(_extends$a({navigation:se},J?Object.keys(J).length===0?{actionData:null}:{actionData:J}:{},ie.length>0?{fetchers:new Map(d.fetchers)}:{}),{flushSync:F})}ie.forEach(J=>{P.has(J.key)&&Ee(J.key),J.controller&&P.set(J.key,J.controller)});let ge=()=>ie.forEach(J=>Ee(J.key));b&&b.signal.addEventListener("abort",ge);let{results:De,loaderResults:_e,fetcherResults:we}=await fe(d.matches,v,Z,ie,x);if(x.signal.aborted)return{shortCircuited:!0};b&&b.signal.removeEventListener("abort",ge),ie.forEach(J=>P.delete(J.key));let me=findRedirect(De);if(me){if(me.idx>=Z.length){let J=ie[me.idx-Z.length].key;ne.add(J)}return await ye(d,me.result,{replace:$}),{shortCircuited:!0}}let{loaderData:Ie,errors:Oe}=processLoaderData(d,v,Z,_e,z,ie,we,K);K.forEach((J,ue)=>{J.subscribe(ee=>{(ee||J.done)&&K.delete(ue)})});let Be=He(),Ue=ze(G),Ce=Be||Ue||ie.length>0;return _extends$a({loaderData:Ie,errors:Oe},Ce?{fetchers:new Map(d.fetchers)}:{})}function Fe(x,j,v,D){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");P.has(x)&&Ee(x);let M=(D&&D.unstable_flushSync)===!0,U=l||o,$=normalizeTo(d.location,d.matches,i,c.v7_prependBasename,v,j,D==null?void 0:D.relative),F=matchRoutes(U,$,i);if(!F){ve(x,j,getInternalRouterError(404,{pathname:$}),{flushSync:M});return}let{path:L,submission:z,error:se}=normalizeNavigateOptions(c.v7_normalizeFormMethod,!0,$,D);if(se){ve(x,j,se,{flushSync:M});return}let V=getTargetMatch(F,L);if(N=(D&&D.preventScrollReset)===!0,z&&isMutationMethod(z.formMethod)){Pe(x,j,L,V,F,M,z);return}re.set(x,{routeId:j,path:L}),$e(x,j,L,V,F,M,z)}async function Pe(x,j,v,D,M,U,$){if(Se(),re.delete(x),!D.route.action&&!D.route.lazy){let ee=getInternalRouterError(405,{method:$.formMethod,pathname:v,routeId:j});ve(x,j,ee,{flushSync:U});return}let F=d.fetchers.get(x);pe(x,getSubmittingFetcher($,F),{flushSync:U});let L=new AbortController,z=createClientSideRequest(t.history,v,L.signal,$);P.set(x,L);let se=O,V=await callLoaderOrAction("action",z,D,M,a,r,i);if(z.signal.aborted){P.get(x)===L&&P.delete(x);return}if(ae.has(x)){pe(x,getDoneFetcher(void 0));return}if(isRedirectResult(V))if(P.delete(x),G>se){pe(x,getDoneFetcher(void 0));return}else return ne.add(x),pe(x,getLoadingFetcher($)),ye(d,V,{fetcherSubmission:$});if(isErrorResult(V)){ve(x,j,V.error);return}if(isDeferredResult(V))throw getInternalRouterError(400,{type:"defer-action"});let X=d.navigation.location||d.location,Z=createClientSideRequest(t.history,X,L.signal),ie=l||o,ge=d.navigation.state!=="idle"?matchRoutes(ie,d.navigation.location,i):d.matches;invariant(ge,"Didn't find any matches after fetcher action");let De=++O;oe.set(x,De);let _e=getLoadingFetcher($,V.data);d.fetchers.set(x,_e);let[we,me]=getMatchesToLoad(t.history,d,ge,$,X,C,I,Q,ae,re,ne,ie,i,{[D.route.id]:V.data},void 0);me.filter(ee=>ee.key!==x).forEach(ee=>{let be=ee.key,qe=d.fetchers.get(be),tt=getLoadingFetcher(void 0,qe?qe.data:void 0);d.fetchers.set(be,tt),P.has(be)&&Ee(be),ee.controller&&P.set(be,ee.controller)}),B({fetchers:new Map(d.fetchers)});let Ie=()=>me.forEach(ee=>Ee(ee.key));L.signal.addEventListener("abort",Ie);let{results:Oe,loaderResults:Be,fetcherResults:Ue}=await fe(d.matches,ge,we,me,Z);if(L.signal.aborted)return;L.signal.removeEventListener("abort",Ie),oe.delete(x),P.delete(x),me.forEach(ee=>P.delete(ee.key));let Ce=findRedirect(Oe);if(Ce){if(Ce.idx>=we.length){let ee=me[Ce.idx-we.length].key;ne.add(ee)}return ye(d,Ce.result)}let{loaderData:J,errors:ue}=processLoaderData(d,d.matches,we,Be,void 0,me,Ue,K);if(d.fetchers.has(x)){let ee=getDoneFetcher(V.data);d.fetchers.set(x,ee)}ze(De),d.navigation.state==="loading"&&De>G?(invariant(w,"Expected pending action"),b&&b.abort(),W(d.navigation.location,{matches:ge,loaderData:J,errors:ue,fetchers:new Map(d.fetchers)})):(B({errors:ue,loaderData:mergeLoaderData(d.loaderData,J,ge,ue),fetchers:new Map(d.fetchers)}),C=!1)}async function $e(x,j,v,D,M,U,$){let F=d.fetchers.get(x);pe(x,getLoadingFetcher($,F?F.data:void 0),{flushSync:U});let L=new AbortController,z=createClientSideRequest(t.history,v,L.signal);P.set(x,L);let se=O,V=await callLoaderOrAction("loader",z,D,M,a,r,i);if(isDeferredResult(V)&&(V=await resolveDeferredData(V,z.signal,!0)||V),P.get(x)===L&&P.delete(x),!z.signal.aborted){if(ae.has(x)){pe(x,getDoneFetcher(void 0));return}if(isRedirectResult(V))if(G>se){pe(x,getDoneFetcher(void 0));return}else{ne.add(x),await ye(d,V);return}if(isErrorResult(V)){ve(x,j,V.error);return}invariant(!isDeferredResult(V),"Unhandled fetcher deferred data"),pe(x,getDoneFetcher(V.data))}}async function ye(x,j,v){let{submission:D,fetcherSubmission:M,replace:U}=v===void 0?{}:v;j.revalidate&&(C=!0);let $=createLocation(x.location,j.location,{_isRedirect:!0});if(invariant($,"Expected a location on the redirect navigation"),s){let X=!1;if(j.reloadDocument)X=!0;else if(ABSOLUTE_URL_REGEX$1.test(j.location)){const Z=t.history.createURL(j.location);X=Z.origin!==e.location.origin||stripBasename(Z.pathname,i)==null}if(X){U?e.location.replace(j.location):e.location.assign(j.location);return}}b=null;let F=U===!0?Action.Replace:Action.Push,{formMethod:L,formAction:z,formEncType:se}=x.navigation;!D&&!M&&L&&z&&se&&(D=getSubmissionFromNavigation(x.navigation));let V=D||M;if(redirectPreserveMethodStatusCodes.has(j.status)&&V&&isMutationMethod(V.formMethod))await ce(F,$,{submission:_extends$a({},V,{formAction:j.location}),preventScrollReset:N});else{let X=getLoadingNavigation($,D);await ce(F,$,{overrideNavigation:X,fetcherSubmission:M,preventScrollReset:N})}}async function fe(x,j,v,D,M){let U=await Promise.all([...v.map(L=>callLoaderOrAction("loader",M,L,j,a,r,i)),...D.map(L=>L.matches&&L.match&&L.controller?callLoaderOrAction("loader",createClientSideRequest(t.history,L.path,L.controller.signal),L.match,L.matches,a,r,i):{type:ResultType.error,error:getInternalRouterError(404,{pathname:L.path})})]),$=U.slice(0,v.length),F=U.slice(v.length);return await Promise.all([resolveDeferredResults(x,v,$,$.map(()=>M.signal),!1,d.loaderData),resolveDeferredResults(x,D.map(L=>L.match),F,D.map(L=>L.controller?L.controller.signal:null),!0)]),{results:U,loaderResults:$,fetcherResults:F}}function Se(){C=!0,I.push(...Ae()),re.forEach((x,j)=>{P.has(j)&&(Q.push(j),Ee(j))})}function pe(x,j,v){v===void 0&&(v={}),d.fetchers.set(x,j),B({fetchers:new Map(d.fetchers)},{flushSync:(v&&v.flushSync)===!0})}function ve(x,j,v,D){D===void 0&&(D={});let M=findNearestBoundary(d.matches,j);Te(x),B({errors:{[M.route.id]:v},fetchers:new Map(d.fetchers)},{flushSync:(D&&D.flushSync)===!0})}function Me(x){return c.v7_fetcherPersist&&(le.set(x,(le.get(x)||0)+1),ae.has(x)&&ae.delete(x)),d.fetchers.get(x)||IDLE_FETCHER}function Te(x){let j=d.fetchers.get(x);P.has(x)&&!(j&&j.state==="loading"&&oe.has(x))&&Ee(x),re.delete(x),oe.delete(x),ne.delete(x),ae.delete(x),d.fetchers.delete(x)}function Xe(x){if(c.v7_fetcherPersist){let j=(le.get(x)||0)-1;j<=0?(le.delete(x),ae.add(x)):le.set(x,j)}else Te(x);B({fetchers:new Map(d.fetchers)})}function Ee(x){let j=P.get(x);invariant(j,"Expected fetch controller: "+x),j.abort(),P.delete(x)}function Ve(x){for(let j of x){let v=Me(j),D=getDoneFetcher(v.data);d.fetchers.set(j,D)}}function He(){let x=[],j=!1;for(let v of ne){let D=d.fetchers.get(v);invariant(D,"Expected fetcher: "+v),D.state==="loading"&&(ne.delete(v),x.push(v),j=!0)}return Ve(x),j}function ze(x){let j=[];for(let[v,D]of oe)if(D<x){let M=d.fetchers.get(v);invariant(M,"Expected fetcher: "+v),M.state==="loading"&&(Ee(v),oe.delete(v),j.push(v))}return Ve(j),j.length>0}function Je(x,j){let v=d.blockers.get(x)||IDLE_BLOCKER;return Y.get(x)!==j&&Y.set(x,j),v}function Qe(x){d.blockers.delete(x),Y.delete(x)}function Le(x,j){let v=d.blockers.get(x)||IDLE_BLOCKER;invariant(v.state==="unblocked"&&j.state==="blocked"||v.state==="blocked"&&j.state==="blocked"||v.state==="blocked"&&j.state==="proceeding"||v.state==="blocked"&&j.state==="unblocked"||v.state==="proceeding"&&j.state==="unblocked","Invalid blocker state transition: "+v.state+" -> "+j.state);let D=new Map(d.blockers);D.set(x,j),B({blockers:D})}function Ke(x){let{currentLocation:j,nextLocation:v,historyAction:D}=x;if(Y.size===0)return;Y.size>1&&warning(!1,"A router only supports one blocker at a time");let M=Array.from(Y.entries()),[U,$]=M[M.length-1],F=d.blockers.get(U);if(!(F&&F.state==="proceeding")&&$({currentLocation:j,nextLocation:v,historyAction:D}))return U}function Ae(x){let j=[];return K.forEach((v,D)=>{(!x||x(D))&&(v.cancel(),j.push(D),K.delete(D))}),j}function Ze(x,j,v){if(m=x,p=j,E=v||null,!R&&d.navigation===IDLE_NAVIGATION){R=!0;let D=We(d.location,d.matches);D!=null&&B({restoreScrollPosition:D})}return()=>{m=null,p=null,E=null}}function Ge(x,j){return E&&E(x,j.map(D=>convertRouteMatchToUiMatch(D,d.loaderData)))||x.key}function Ye(x,j){if(m&&p){let v=Ge(x,j);m[v]=p()}}function We(x,j){if(m){let v=Ge(x,j),D=m[v];if(typeof D=="number")return D}return null}function et(x){a={},l=convertRoutesToDataRoutes(x,r,void 0,a)}return y={get basename(){return i},get state(){return d},get routes(){return o},get window(){return e},initialize:he,subscribe:xe,enableScrollRestoration:Ze,navigate:q,fetch:Fe,revalidate:te,createHref:x=>t.history.createHref(x),encodeLocation:x=>t.history.encodeLocation(x),getFetcher:Me,deleteFetcher:Xe,dispose:je,getBlocker:Je,deleteBlocker:Qe,_internalFetchControllers:P,_internalActiveDeferreds:K,_internalSetRoutes:et},y}function isSubmissionNavigation(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function normalizeTo(t,e,s,n,r,a,o){let l,i;if(a){l=[];for(let u of e)if(l.push(u),u.route.id===a){i=u;break}}else l=e,i=e[e.length-1];let c=resolveTo(r||".",getPathContributingMatches(l).map(u=>u.pathnameBase),stripBasename(t.pathname,s)||t.pathname,o==="path");return r==null&&(c.search=t.search,c.hash=t.hash),(r==null||r===""||r===".")&&i&&i.route.index&&!hasNakedIndexQuery(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n&&s!=="/"&&(c.pathname=c.pathname==="/"?s:joinPaths([s,c.pathname])),createPath(c)}function normalizeNavigateOptions(t,e,s,n){if(!n||!isSubmissionNavigation(n))return{path:s};if(n.formMethod&&!isValidMethod(n.formMethod))return{path:s,error:getInternalRouterError(405,{method:n.formMethod})};let r=()=>({path:s,error:getInternalRouterError(400,{type:"invalid-body"})}),a=n.formMethod||"get",o=t?a.toUpperCase():a.toLowerCase(),l=stripHashFromPath(s);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!isMutationMethod(o))return r();let m=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((E,p)=>{let[R,g]=p;return""+E+R+"="+g+`
`},""):String(n.body);return{path:s,submission:{formMethod:o,formAction:l,formEncType:n.formEncType,formData:void 0,json:void 0,text:m}}}else if(n.formEncType==="application/json"){if(!isMutationMethod(o))return r();try{let m=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:s,submission:{formMethod:o,formAction:l,formEncType:n.formEncType,formData:void 0,json:m,text:void 0}}}catch{return r()}}}invariant(typeof FormData=="function","FormData is not available in this environment");let i,c;if(n.formData)i=convertFormDataToSearchParams(n.formData),c=n.formData;else if(n.body instanceof FormData)i=convertFormDataToSearchParams(n.body),c=n.body;else if(n.body instanceof URLSearchParams)i=n.body,c=convertSearchParamsToFormData(i);else if(n.body==null)i=new URLSearchParams,c=new FormData;else try{i=new URLSearchParams(n.body),c=convertSearchParamsToFormData(i)}catch{return r()}let u={formMethod:o,formAction:l,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(isMutationMethod(u.formMethod))return{path:s,submission:u};let h=parsePath(s);return e&&h.search&&hasNakedIndexQuery(h.search)&&i.append("index",""),h.search="?"+i,{path:createPath(h),submission:u}}function getLoaderMatchesUntilBoundary(t,e){let s=t;if(e){let n=t.findIndex(r=>r.route.id===e);n>=0&&(s=t.slice(0,n))}return s}function getMatchesToLoad(t,e,s,n,r,a,o,l,i,c,u,h,m,E,p){let R=p?Object.values(p)[0]:E?Object.values(E)[0]:void 0,g=t.createURL(e.location),f=t.createURL(r),S=p?Object.keys(p)[0]:void 0,d=getLoaderMatchesUntilBoundary(s,S).filter((N,b)=>{if(N.route.lazy)return!0;if(N.route.loader==null)return!1;if(isNewLoader(e.loaderData,e.matches[b],N)||o.some(A=>A===N.route.id))return!0;let T=e.matches[b],k=N;return shouldRevalidateLoader(N,_extends$a({currentUrl:g,currentParams:T.params,nextUrl:f,nextParams:k.params},n,{actionResult:R,defaultShouldRevalidate:a||g.pathname+g.search===f.pathname+f.search||g.search!==f.search||isNewRouteInstance(T,k)}))}),w=[];return c.forEach((N,b)=>{if(!s.some(C=>C.route.id===N.routeId)||i.has(b))return;let T=matchRoutes(h,N.path,m);if(!T){w.push({key:b,routeId:N.routeId,path:N.path,matches:null,match:null,controller:null});return}let k=e.fetchers.get(b),A=getTargetMatch(T,N.path),_=!1;u.has(b)?_=!1:l.includes(b)?_=!0:k&&k.state!=="idle"&&k.data===void 0?_=a:_=shouldRevalidateLoader(A,_extends$a({currentUrl:g,currentParams:e.matches[e.matches.length-1].params,nextUrl:f,nextParams:s[s.length-1].params},n,{actionResult:R,defaultShouldRevalidate:a})),_&&w.push({key:b,routeId:N.routeId,path:N.path,matches:T,match:A,controller:new AbortController})}),[d,w]}function isNewLoader(t,e,s){let n=!e||s.route.id!==e.route.id,r=t[s.route.id]===void 0;return n||r}function isNewRouteInstance(t,e){let s=t.route.path;return t.pathname!==e.pathname||s!=null&&s.endsWith("*")&&t.params["*"]!==e.params["*"]}function shouldRevalidateLoader(t,e){if(t.route.shouldRevalidate){let s=t.route.shouldRevalidate(e);if(typeof s=="boolean")return s}return e.defaultShouldRevalidate}async function loadLazyRouteModule(t,e,s){if(!t.lazy)return;let n=await t.lazy();if(!t.lazy)return;let r=s[t.id];invariant(r,"No route found in manifest");let a={};for(let o in n){let i=r[o]!==void 0&&o!=="hasErrorBoundary";warning(!i,'Route "'+r.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!i&&!immutableRouteKeys.has(o)&&(a[o]=n[o])}Object.assign(r,a),Object.assign(r,_extends$a({},e(r),{lazy:void 0}))}async function callLoaderOrAction(t,e,s,n,r,a,o,l){l===void 0&&(l={});let i,c,u,h=p=>{let R,g=new Promise((f,S)=>R=S);return u=()=>R(),e.signal.addEventListener("abort",u),Promise.race([p({request:e,params:s.params,context:l.requestContext}),g])};try{let p=s.route[t];if(s.route.lazy)if(p){let R,g=await Promise.all([h(p).catch(f=>{R=f}),loadLazyRouteModule(s.route,a,r)]);if(R)throw R;c=g[0]}else if(await loadLazyRouteModule(s.route,a,r),p=s.route[t],p)c=await h(p);else if(t==="action"){let R=new URL(e.url),g=R.pathname+R.search;throw getInternalRouterError(405,{method:e.method,pathname:g,routeId:s.route.id})}else return{type:ResultType.data,data:void 0};else if(p)c=await h(p);else{let R=new URL(e.url),g=R.pathname+R.search;throw getInternalRouterError(404,{pathname:g})}invariant(c!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+s.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(p){i=ResultType.error,c=p}finally{u&&e.signal.removeEventListener("abort",u)}if(isResponse(c)){let p=c.status;if(redirectStatusCodes.has(p)){let f=c.headers.get("Location");if(invariant(f,"Redirects returned/thrown from loaders/actions must have a Location header"),!ABSOLUTE_URL_REGEX$1.test(f))f=normalizeTo(new URL(e.url),n.slice(0,n.indexOf(s)+1),o,!0,f);else if(!l.isStaticRequest){let S=new URL(e.url),y=f.startsWith("//")?new URL(S.protocol+f):new URL(f),d=stripBasename(y.pathname,o)!=null;y.origin===S.origin&&d&&(f=y.pathname+y.search+y.hash)}if(l.isStaticRequest)throw c.headers.set("Location",f),c;return{type:ResultType.redirect,status:p,location:f,revalidate:c.headers.get("X-Remix-Revalidate")!==null,reloadDocument:c.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:i===ResultType.error?ResultType.error:ResultType.data,response:c};let R,g=c.headers.get("Content-Type");return g&&/\bapplication\/json\b/.test(g)?R=await c.json():R=await c.text(),i===ResultType.error?{type:i,error:new ErrorResponseImpl(p,c.statusText,R),headers:c.headers}:{type:ResultType.data,data:R,statusCode:c.status,headers:c.headers}}if(i===ResultType.error)return{type:i,error:c};if(isDeferredData(c)){var m,E;return{type:ResultType.deferred,deferredData:c,statusCode:(m=c.init)==null?void 0:m.status,headers:((E=c.init)==null?void 0:E.headers)&&new Headers(c.init.headers)}}return{type:ResultType.data,data:c}}function createClientSideRequest(t,e,s,n){let r=t.createURL(stripHashFromPath(e)).toString(),a={signal:s};if(n&&isMutationMethod(n.formMethod)){let{formMethod:o,formEncType:l}=n;a.method=o.toUpperCase(),l==="application/json"?(a.headers=new Headers({"Content-Type":l}),a.body=JSON.stringify(n.json)):l==="text/plain"?a.body=n.text:l==="application/x-www-form-urlencoded"&&n.formData?a.body=convertFormDataToSearchParams(n.formData):a.body=n.formData}return new Request(r,a)}function convertFormDataToSearchParams(t){let e=new URLSearchParams;for(let[s,n]of t.entries())e.append(s,typeof n=="string"?n:n.name);return e}function convertSearchParamsToFormData(t){let e=new FormData;for(let[s,n]of t.entries())e.append(s,n);return e}function processRouteLoaderData(t,e,s,n,r){let a={},o=null,l,i=!1,c={};return s.forEach((u,h)=>{let m=e[h].route.id;if(invariant(!isRedirectResult(u),"Cannot handle redirect results in processLoaderData"),isErrorResult(u)){let E=findNearestBoundary(t,m),p=u.error;n&&(p=Object.values(n)[0],n=void 0),o=o||{},o[E.route.id]==null&&(o[E.route.id]=p),a[m]=void 0,i||(i=!0,l=isRouteErrorResponse(u.error)?u.error.status:500),u.headers&&(c[m]=u.headers)}else isDeferredResult(u)?(r.set(m,u.deferredData),a[m]=u.deferredData.data):a[m]=u.data,u.statusCode!=null&&u.statusCode!==200&&!i&&(l=u.statusCode),u.headers&&(c[m]=u.headers)}),n&&(o=n,a[Object.keys(n)[0]]=void 0),{loaderData:a,errors:o,statusCode:l||200,loaderHeaders:c}}function processLoaderData(t,e,s,n,r,a,o,l){let{loaderData:i,errors:c}=processRouteLoaderData(e,s,n,r,l);for(let u=0;u<a.length;u++){let{key:h,match:m,controller:E}=a[u];invariant(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let p=o[u];if(!(E&&E.signal.aborted))if(isErrorResult(p)){let R=findNearestBoundary(t.matches,m==null?void 0:m.route.id);c&&c[R.route.id]||(c=_extends$a({},c,{[R.route.id]:p.error})),t.fetchers.delete(h)}else if(isRedirectResult(p))invariant(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(p))invariant(!1,"Unhandled fetcher deferred data");else{let R=getDoneFetcher(p.data);t.fetchers.set(h,R)}}return{loaderData:i,errors:c}}function mergeLoaderData(t,e,s,n){let r=_extends$a({},e);for(let a of s){let o=a.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(r[o]=e[o]):t[o]!==void 0&&a.route.loader&&(r[o]=t[o]),n&&n.hasOwnProperty(o))break}return r}function findNearestBoundary(t,e){return(e?t.slice(0,t.findIndex(n=>n.route.id===e)+1):[...t]).reverse().find(n=>n.route.hasErrorBoundary===!0)||t[0]}function getShortCircuitMatches(t){let e=t.length===1?t[0]:t.find(s=>s.index||!s.path||s.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function getInternalRouterError(t,e){let{pathname:s,routeId:n,method:r,type:a}=e===void 0?{}:e,o="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(o="Bad Request",r&&s&&n?l="You made a "+r+' request to "'+s+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":a==="defer-action"?l="defer() is not supported in actions":a==="invalid-body"&&(l="Unable to encode submission body")):t===403?(o="Forbidden",l='Route "'+n+'" does not match URL "'+s+'"'):t===404?(o="Not Found",l='No route matches URL "'+s+'"'):t===405&&(o="Method Not Allowed",r&&s&&n?l="You made a "+r.toUpperCase()+' request to "'+s+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":r&&(l='Invalid request method "'+r.toUpperCase()+'"')),new ErrorResponseImpl(t||500,o,new Error(l),!0)}function findRedirect(t){for(let e=t.length-1;e>=0;e--){let s=t[e];if(isRedirectResult(s))return{result:s,idx:e}}}function stripHashFromPath(t){let e=typeof t=="string"?parsePath(t):t;return createPath(_extends$a({},e,{hash:""}))}function isHashChangeOnly(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function isDeferredResult(t){return t.type===ResultType.deferred}function isErrorResult(t){return t.type===ResultType.error}function isRedirectResult(t){return(t&&t.type)===ResultType.redirect}function isDeferredData(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function isResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function isValidMethod(t){return validRequestMethods.has(t.toLowerCase())}function isMutationMethod(t){return validMutationMethods.has(t.toLowerCase())}async function resolveDeferredResults(t,e,s,n,r,a){for(let o=0;o<s.length;o++){let l=s[o],i=e[o];if(!i)continue;let c=t.find(h=>h.route.id===i.route.id),u=c!=null&&!isNewRouteInstance(c,i)&&(a&&a[i.route.id])!==void 0;if(isDeferredResult(l)&&(r||u)){let h=n[o];invariant(h,"Expected an AbortSignal for revalidating fetcher deferred result"),await resolveDeferredData(l,h,r).then(m=>{m&&(s[o]=m||s[o])})}}}async function resolveDeferredData(t,e,s){if(s===void 0&&(s=!1),!await t.deferredData.resolveData(e)){if(s)try{return{type:ResultType.data,data:t.deferredData.unwrappedData}}catch(r){return{type:ResultType.error,error:r}}return{type:ResultType.data,data:t.deferredData.data}}}function hasNakedIndexQuery(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function getTargetMatch(t,e){let s=typeof e=="string"?parsePath(e).search:e.search;if(t[t.length-1].route.index&&hasNakedIndexQuery(s||""))return t[t.length-1];let n=getPathContributingMatches(t);return n[n.length-1]}function getSubmissionFromNavigation(t){let{formMethod:e,formAction:s,formEncType:n,text:r,formData:a,json:o}=t;if(!(!e||!s||!n)){if(r!=null)return{formMethod:e,formAction:s,formEncType:n,formData:void 0,json:void 0,text:r};if(a!=null)return{formMethod:e,formAction:s,formEncType:n,formData:a,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:s,formEncType:n,formData:void 0,json:o,text:void 0}}}function getLoadingNavigation(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function getLoadingFetcher(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function getSubmittingFetcher(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function getDoneFetcher(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function restoreAppliedTransitions(t,e){try{let s=t.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(s){let n=JSON.parse(s);for(let[r,a]of Object.entries(n||{}))a&&Array.isArray(a)&&e.set(r,new Set(a||[]))}}catch{}}function persistAppliedTransitions(t,e){if(e.size>0){let s={};for(let[n,r]of e)s[n]=[...r];try{t.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(s))}catch(n){warning(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},_extends$9.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(t,e){let{relative:s}=e===void 0?{}:e;useInRouterContext()||invariant(!1);let{basename:n,navigator:r}=reactExports.useContext(NavigationContext),{hash:a,pathname:o,search:l}=useResolvedPath(t,{relative:s}),i=o;return n!=="/"&&(i=o==="/"?n:joinPaths([n,o])),r.createHref({pathname:i,search:l,hash:a})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(t){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let t=reactExports.useContext(DataRouterContext),{basename:e,navigator:s}=reactExports.useContext(NavigationContext),{matches:n}=reactExports.useContext(RouteContext),{pathname:r}=useLocation(),a=JSON.stringify(getPathContributingMatches(n).map(i=>i.pathnameBase)),o=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{o.current=!0}),reactExports.useCallback(function(i,c){if(c===void 0&&(c={}),!o.current)return;if(typeof i=="number"){s.go(i);return}let u=resolveTo(i,JSON.parse(a),r,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:joinPaths([e,u.pathname])),(c.replace?s.replace:s.push)(u,c.state,c)},[e,s,a,r,t])}const OutletContext=reactExports.createContext(null);function useOutlet(t){let e=reactExports.useContext(RouteContext).outlet;return e&&reactExports.createElement(OutletContext.Provider,{value:t},e)}function useResolvedPath(t,e){let{relative:s}=e===void 0?{}:e,{matches:n}=reactExports.useContext(RouteContext),{pathname:r}=useLocation(),a=JSON.stringify(getPathContributingMatches(n).map(o=>o.pathnameBase));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(a),r,s==="path"),[t,a,r,s])}function useRoutesImpl(t,e,s){useInRouterContext()||invariant(!1);let{navigator:n}=reactExports.useContext(NavigationContext),{matches:r}=reactExports.useContext(RouteContext),a=r[r.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let i=useLocation(),c;if(e){var u;let R=typeof e=="string"?parsePath(e):e;l==="/"||(u=R.pathname)!=null&&u.startsWith(l)||invariant(!1),c=R}else c=i;let h=c.pathname||"/",m=l==="/"?h:h.slice(l.length)||"/",E=matchRoutes(t,{pathname:m}),p=_renderMatches(E&&E.map(R=>Object.assign({},R,{params:Object.assign({},o,R.params),pathname:joinPaths([l,n.encodeLocation?n.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?l:joinPaths([l,n.encodeLocation?n.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),r,s);return e&&p?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$9({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Action.Pop}},p):p}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),s?reactExports.createElement("pre",{style:r},s):null,a)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(t){let{routeContext:e,match:s,children:n}=t,r=reactExports.useContext(DataRouterContext);return r&&r.static&&r.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=s.route.id),reactExports.createElement(RouteContext.Provider,{value:e},n)}function _renderMatches(t,e,s){var n;if(e===void 0&&(e=[]),s===void 0&&(s=null),t==null){var r;if((r=s)!=null&&r.errors)t=s.matches;else return null}let a=t,o=(n=s)==null?void 0:n.errors;if(o!=null){let l=a.findIndex(i=>i.route.id&&(o==null?void 0:o[i.route.id]));l>=0||invariant(!1),a=a.slice(0,Math.min(a.length,l+1))}return a.reduceRight((l,i,c)=>{let u=i.route.id?o==null?void 0:o[i.route.id]:null,h=null;s&&(h=i.route.errorElement||defaultErrorElement);let m=e.concat(a.slice(0,c+1)),E=()=>{let p;return u?p=h:i.route.Component?p=reactExports.createElement(i.route.Component,null):i.route.element?p=i.route.element:p=l,reactExports.createElement(RenderedRoute,{match:i,routeContext:{outlet:l,matches:m,isDataRoute:s!=null},children:p})};return s&&(i.route.ErrorBoundary||i.route.errorElement||c===0)?reactExports.createElement(RenderErrorBoundary,{location:s.location,revalidation:s.revalidation,component:h,error:u,children:E(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):E()},null)}var DataRouterHook$1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(DataRouterHook$1||{}),DataRouterStateHook$1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(DataRouterStateHook$1||{});function useDataRouterContext$1(t){let e=reactExports.useContext(DataRouterContext);return e||invariant(!1),e}function useDataRouterState(t){let e=reactExports.useContext(DataRouterStateContext);return e||invariant(!1),e}function useRouteContext(t){let e=reactExports.useContext(RouteContext);return e||invariant(!1),e}function useCurrentRouteId(t){let e=useRouteContext(),s=e.matches[e.matches.length-1];return s.route.id||invariant(!1),s.route.id}function useLoaderData(){let t=useDataRouterState(DataRouterStateHook$1.UseLoaderData),e=useCurrentRouteId(DataRouterStateHook$1.UseLoaderData);if(t.errors&&t.errors[e]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+e+")");return}return t.loaderData[e]}function useRouteError(){var t;let e=reactExports.useContext(RouteErrorContext),s=useDataRouterState(DataRouterStateHook$1.UseRouteError),n=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return e||((t=s.errors)==null?void 0:t[n])}function useNavigateStable(){let{router:t}=useDataRouterContext$1(DataRouterHook$1.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),s=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{s.current=!0}),reactExports.useCallback(function(r,a){a===void 0&&(a={}),s.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,_extends$9({fromRouteId:e},a)))},[t,e])}function Outlet(t){return useOutlet(t.context)}function Route(t){invariant(!1)}function Router$1(t){let{basename:e="/",children:s=null,location:n,navigationType:r=Action.Pop,navigator:a,static:o=!1}=t;useInRouterContext()&&invariant(!1);let l=e.replace(/^\/*/,"/"),i=reactExports.useMemo(()=>({basename:l,navigator:a,static:o}),[l,a,o]);typeof n=="string"&&(n=parsePath(n));let{pathname:c="/",search:u="",hash:h="",state:m=null,key:E="default"}=n,p=reactExports.useMemo(()=>{let R=stripBasename(c,l);return R==null?null:{location:{pathname:R,search:u,hash:h,state:m,key:E},navigationType:r}},[l,c,u,h,m,E,r]);return p==null?null:reactExports.createElement(NavigationContext.Provider,{value:i},reactExports.createElement(LocationContext.Provider,{children:s,value:p}))}new Promise(()=>{});function createRoutesFromChildren(t,e){e===void 0&&(e=[]);let s=[];return reactExports.Children.forEach(t,(n,r)=>{if(!reactExports.isValidElement(n))return;let a=[...e,r];if(n.type===reactExports.Fragment){s.push.apply(s,createRoutesFromChildren(n.props.children,a));return}n.type!==Route&&invariant(!1),!n.props.index||!n.props.children||invariant(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=createRoutesFromChildren(n.props.children,a)),s.push(o)}),s}function mapRouteProperties(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:reactExports.createElement(t.Component),Component:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:reactExports.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.20.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},_extends$8.apply(this,arguments)}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var s={},n=Object.keys(t),r,a;for(a=0;a<n.length;a++)r=n[a],!(e.indexOf(r)>=0)&&(s[r]=t[r]);return s}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,e){return t.button===0&&(!e||e==="_self")&&!isModifiedEvent(t)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],_excluded2=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"];function createHashRouter(t,e){return createRouter({basename:e==null?void 0:e.basename,future:_extends$8({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:createHashHistory({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||parseHydrationData(),routes:t,mapRouteProperties,window:e==null?void 0:e.window}).initialize()}function parseHydrationData(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=_extends$8({},e,{errors:deserializeErrors(e.errors)})),e}function deserializeErrors(t){if(!t)return null;let e=Object.entries(t),s={};for(let[n,r]of e)if(r&&r.__type==="RouteErrorResponse")s[n]=new ErrorResponseImpl(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let a=window[r.__subType];if(typeof a=="function")try{let o=new a(r.message);o.stack="",s[n]=o}catch{}}if(s[n]==null){let a=new Error(r.message);a.stack="",s[n]=a}}else s[n]=r;return s}const ViewTransitionContext=reactExports.createContext({isTransitioning:!1}),FetchersContext=reactExports.createContext(new Map),START_TRANSITION="startTransition",startTransitionImpl=React[START_TRANSITION],FLUSH_SYNC="flushSync",flushSyncImpl=ReactDOM[FLUSH_SYNC];function startTransitionSafe(t){startTransitionImpl?startTransitionImpl(t):t()}function flushSyncSafe(t){flushSyncImpl?flushSyncImpl(t):t()}class Deferred{constructor(){this.status="pending",this.promise=new Promise((e,s)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",s(n))}})}}function RouterProvider(t){let{fallbackElement:e,router:s,future:n}=t,[r,a]=reactExports.useState(s.state),[o,l]=reactExports.useState(),[i,c]=reactExports.useState({isTransitioning:!1}),[u,h]=reactExports.useState(),[m,E]=reactExports.useState(),[p,R]=reactExports.useState(),g=reactExports.useRef(new Map),{v7_startTransition:f}=n||{},S=reactExports.useCallback(b=>{f?startTransitionSafe(b):b()},[f]),y=reactExports.useCallback((b,T)=>{let{deletedFetchers:k,unstable_flushSync:A,unstable_viewTransitionOpts:_}=T;k.forEach(I=>g.current.delete(I)),b.fetchers.forEach((I,Q)=>{I.data!==void 0&&g.current.set(Q,I.data)});let C=s.window==null||typeof s.window.document.startViewTransition!="function";if(!_||C){A?flushSyncSafe(()=>a(b)):S(()=>a(b));return}if(A){flushSyncSafe(()=>{m&&(u&&u.resolve(),m.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:_.currentLocation,nextLocation:_.nextLocation})});let I=s.window.document.startViewTransition(()=>{flushSyncSafe(()=>a(b))});I.finished.finally(()=>{flushSyncSafe(()=>{h(void 0),E(void 0),l(void 0),c({isTransitioning:!1})})}),flushSyncSafe(()=>E(I));return}m?(u&&u.resolve(),m.skipTransition(),R({state:b,currentLocation:_.currentLocation,nextLocation:_.nextLocation})):(l(b),c({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}))},[s.window,m,u,g,S]);reactExports.useLayoutEffect(()=>s.subscribe(y),[s,y]),reactExports.useEffect(()=>{i.isTransitioning&&!i.flushSync&&h(new Deferred)},[i]),reactExports.useEffect(()=>{if(u&&o&&s.window){let b=o,T=u.promise,k=s.window.document.startViewTransition(async()=>{S(()=>a(b)),await T});k.finished.finally(()=>{h(void 0),E(void 0),l(void 0),c({isTransitioning:!1})}),E(k)}},[S,o,u,s.window]),reactExports.useEffect(()=>{u&&o&&r.location.key===o.location.key&&u.resolve()},[u,m,r.location,o]),reactExports.useEffect(()=>{!i.isTransitioning&&p&&(l(p.state),c({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),R(void 0))},[i.isTransitioning,p]);let d=reactExports.useMemo(()=>({createHref:s.createHref,encodeLocation:s.encodeLocation,go:b=>s.navigate(b),push:(b,T,k)=>s.navigate(b,{state:T,preventScrollReset:k==null?void 0:k.preventScrollReset}),replace:(b,T,k)=>s.navigate(b,{replace:!0,state:T,preventScrollReset:k==null?void 0:k.preventScrollReset})}),[s]),w=s.basename||"/",N=reactExports.useMemo(()=>({router:s,navigator:d,static:!1,basename:w}),[s,d,w]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:N},reactExports.createElement(DataRouterStateContext.Provider,{value:r},reactExports.createElement(FetchersContext.Provider,{value:g.current},reactExports.createElement(ViewTransitionContext.Provider,{value:i},reactExports.createElement(Router$1,{basename:w,location:r.location,navigationType:r.historyAction,navigator:d},r.initialized?reactExports.createElement(DataRoutes,{routes:s.routes,state:r}):e))))),null)}function DataRoutes(t){let{routes:e,state:s}=t;return useRoutesImpl(e,void 0,s)}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function(e,s){let{onClick:n,relative:r,reloadDocument:a,replace:o,state:l,target:i,to:c,preventScrollReset:u,unstable_viewTransition:h}=e,m=_objectWithoutPropertiesLoose(e,_excluded),{basename:E}=reactExports.useContext(NavigationContext),p,R=!1;if(typeof c=="string"&&ABSOLUTE_URL_REGEX.test(c)&&(p=c,isBrowser))try{let y=new URL(window.location.href),d=c.startsWith("//")?new URL(y.protocol+c):new URL(c),w=stripBasename(d.pathname,E);d.origin===y.origin&&w!=null?c=w+d.search+d.hash:R=!0}catch{}let g=useHref(c,{relative:r}),f=useLinkClickHandler(c,{replace:o,state:l,target:i,preventScrollReset:u,relative:r,unstable_viewTransition:h});function S(y){n&&n(y),y.defaultPrevented||f(y)}return reactExports.createElement("a",_extends$8({},m,{href:p||g,onClick:R||a?n:S,ref:s,target:i}))}),NavLink=reactExports.forwardRef(function(e,s){let{"aria-current":n="page",caseSensitive:r=!1,className:a="",end:o=!1,style:l,to:i,unstable_viewTransition:c,children:u}=e,h=_objectWithoutPropertiesLoose(e,_excluded2),m=useResolvedPath(i,{relative:h.relative}),E=useLocation(),p=reactExports.useContext(DataRouterStateContext),{navigator:R}=reactExports.useContext(NavigationContext),g=p!=null&&useViewTransitionState(m)&&c===!0,f=R.encodeLocation?R.encodeLocation(m).pathname:m.pathname,S=E.pathname,y=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(S=S.toLowerCase(),y=y?y.toLowerCase():null,f=f.toLowerCase());const d=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let w=S===f||!o&&S.startsWith(f)&&S.charAt(d)==="/",N=y!=null&&(y===f||!o&&y.startsWith(f)&&y.charAt(f.length)==="/"),b={isActive:w,isPending:N,isTransitioning:g},T=w?n:void 0,k;typeof a=="function"?k=a(b):k=[a,w?"active":null,N?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let A=typeof l=="function"?l(b):l;return reactExports.createElement(Link$1,_extends$8({},h,{"aria-current":T,className:k,ref:s,style:A,to:i,unstable_viewTransition:c}),typeof u=="function"?u(b):u)});var DataRouterHook;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useDataRouterContext(t){let e=reactExports.useContext(DataRouterContext);return e||invariant(!1),e}function useLinkClickHandler(t,e){let{target:s,replace:n,state:r,preventScrollReset:a,relative:o,unstable_viewTransition:l}=e===void 0?{}:e,i=useNavigate(),c=useLocation(),u=useResolvedPath(t,{relative:o});return reactExports.useCallback(h=>{if(shouldProcessLinkClick(h,s)){h.preventDefault();let m=n!==void 0?n:createPath(c)===createPath(u);i(t,{replace:m,state:r,preventScrollReset:a,relative:o,unstable_viewTransition:l})}},[c,i,u,n,r,s,t,a,o,l])}function useViewTransitionState(t,e){e===void 0&&(e={});let s=reactExports.useContext(ViewTransitionContext);s==null&&invariant(!1);let{basename:n}=useDataRouterContext(DataRouterHook.useViewTransitionState),r=useResolvedPath(t,{relative:e.relative});if(!s.isTransitioning)return!1;let a=stripBasename(s.currentLocation.pathname,n)||s.currentLocation.pathname,o=stripBasename(s.nextLocation.pathname,n)||s.nextLocation.pathname;return matchPath(r.pathname,o)!=null||matchPath(r.pathname,a)!=null}const cls0="cls-0 bg-gray-50 dark:bg-slate-900",cls1="cls-1 sticky top-0 inset-x-0 z-20 bg-white border-y px-4 sm:px-6 md:px-8 lg:hidden dark:bg-gray-800 dark:border-gray-700",cls2="cls-2 flex items-center py-4",cls3="cls-3 text-gray-500 hover:text-gray-600",cls4="cls-4 sr-only",cls5="cls-5 w-5 h-5",cls6="cls-6 ms-3 flex items-center whitespace-nowrap",cls7="cls-7 flex items-center text-sm text-gray-800 dark:text-gray-400",cls8="cls-8 flex-shrink-0 mx-3 overflow-visible h-2.5 w-2.5 text-gray-400 dark:text-gray-600",cls9="cls-9 text-sm font-semibold text-gray-800 truncate dark:text-gray-400",cls10="cls-10 hs-overlay hs-overlay-open:translate-x-0 -translate-x-full transition-all duration-300 transform hidden fixed top-0 start-0 bottom-0 z-[60] w-64 bg-white border-e border-gray-200 pt-7 pb-10 overflow-y-auto lg:block lg:translate-x-0 lg:end-auto lg:bottom-0 [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-track]:bg-slate-700 dark:[&::-webkit-scrollbar-thumb]:bg-slate-500 dark:bg-gray-800 dark:border-gray-700",cls11="cls-11 px-6",cls12="cls-12 flex-none text-xl font-semibold dark:text-white",cls13="cls-13 hs-accordion-group p-6 w-full flex flex-col flex-wrap",cls14="cls-14 space-y-1.5",cls17="cls-17 hs-accordion",cls18="cls-18 hs-accordion-toggle w-full text-start flex items-center gap-x-3.5 py-2 px-2.5 hs-accordion-active:text-blue-600 hs-accordion-active:hover:bg-transparent text-sm text-slate-700 rounded-lg hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-900 dark:text-slate-400 dark:hover:text-slate-300 dark:hs-accordion-active:text-white dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",cls19="cls-19 hs-accordion-active:block ms-auto hidden w-4 h-4",cls20="cls-20 hs-accordion-active:hidden ms-auto block w-4 h-4",cls22="cls-22 hs-accordion-group ps-3 pt-2",cls24="cls-24 flex items-center gap-x-3.5 py-2 px-2.5 text-sm text-slate-700 rounded-lg hover:bg-gray-100 dark:bg-gray-800 dark:text-slate-400 dark:hover:text-slate-300 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",cls25="cls-25 hs-accordion-content w-full overflow-hidden transition-[height] duration-300 ps-2",cls28="cls-28 w-full pt-10 px-4 sm:px-6 md:px-8 lg:ps-72",niceScrollbarCls="[&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-track]:bg-slate-700 dark:[&::-webkit-scrollbar-thumb]:bg-slate-500",links={welcome:{title:"Welcome",path:"/welcome",iconCls:"bi bi-house",order:1,hidden:!0},courses:{title:"Courses",path:"/manager",iconCls:"bi bi-bookmark",order:2,hasChild:!0,useModel:!0,model:"Course",modelListMethod:"getList",displayField:"title",slugField:"slug",childRoutePath:"/manager/{SLUG_VALUE}",childIconCls:"fa fa-bookmark-o"},download:{title:"Download",path:"/download",iconCls:"bi bi-download",order:3,hidden:!0},settings:{title:"Settings",path:"/setting",iconCls:"bi bi-gear",order:4,hidden:!1,childItems:{"find-ds":{title:"findDS",path:"/tests/find-ds",iconCls:"bi bi-search",order:0}}},developers:{title:"Developers",path:"/developer",iconCls:"bi bi-gear",order:4,hidden:!1,hasChild:!0,childItems:{"dev-api":{title:"Dev Api",path:"/developer/dev-api",iconCls:"bi bi-gear",order:0},"native-client":{title:"Native Client",path:"/developer/native-client",iconCls:"bi bi-gear",order:0},"course-api-new":{title:"Course Api",path:"/tests/course-api",iconCls:"bi bi-gear",order:0,hidden:!0},"fetch-api":{title:"Fetch Api Test",path:"/developer/fetch-api",iconCls:"bi bi-gear",order:0,hidden:!1}}},database:{title:"Database Explorer",path:"/database",iconCls:"fa fa-database",order:5,hidden:0,hasChild:!0,childItems:{"table-manager":{title:"Table Manager",path:"/database/table-manager",iconCls:"fa fa-database",order:0},author:{title:"Author",path:"/database/author",iconCls:"fa fa-database",order:0},"exercise-file":{title:"ExerciseFile",path:"/database/exercise-file",iconCls:"fa fa-database",order:0},"stream-location":{title:"StreamLocation",path:"/database/stream-location",iconCls:"fa fa-database",order:0},transcript:{title:"Transcript",path:"/database/transcript",iconCls:"fa fa-database",order:0},"download-state":{title:"DownloadState",path:"/database/download-state",iconCls:"fa fa-database",order:0},"download-config":{title:"DownloadConfig",path:"/database/download-config",iconCls:"fa fa-database",order:0},section:{title:"Section",path:"/database/section",iconCls:"fa fa-database",order:0},toc:{title:"Toc",path:"/database/toc",iconCls:"fa fa-database",order:0},course:{title:"Course",path:"/database/course",iconCls:"fa fa-database",order:0},download:{title:"Download",path:"/database/download",iconCls:"fa fa-database",order:0},"dm-setup":{title:"DMSetup",path:"/database/dm-setup",iconCls:"fa fa-database",order:0},"dm-status":{title:"DMStatus",path:"/database/dm-status",iconCls:"fa fa-database",order:0},cookie:{title:"Cookie",path:"/database/cookie",iconCls:"fa fa-database",order:0}}},"bootstrap-icons":{title:"Bootstrap Icons",path:"/bootstrap-icons",iconCls:"bi bi-bootstrap",order:5,hidden:!0}},side_menu={links},MenuItem=({hasChild:t,title:e,path:s,icon:n,name:r,childrens:a,index:o})=>{const l="flex items-center gap-x-3.5 py-2 px-2.5 bg-gray-100 text-sm text-slate-700 rounded-md dark:bg-gray-900 dark:text-white",i="bg-gray-100 text-sm text-slate-700 rounded-md dark:bg-gray-900 dark:text-white",c=cls24+" hover:bg-gray-100  hover:bg-gray-100 dark:hover:bg-gray-700",u=({isActive:m,isPending:E})=>m?l:c,{pathname:h}=useLocation();return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:t?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("li",{id:`${r}-accordion`,className:`${cls17} `,children:[jsxRuntimeExports.jsxs("button",{type:"button",className:`${cls18} ${h.match(s)?i:""}`,children:[jsxRuntimeExports.jsx("i",{className:n}),e,jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:cls19,children:[" ",jsxRuntimeExports.jsx("path",{d:"m18 15-6-6-6 6",children:" "})," "]}),jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:cls20,children:[" ",jsxRuntimeExports.jsx("path",{d:"m6 9 6 6 6-6",children:" "})," "]})]}),jsxRuntimeExports.jsx("div",{id:`${r}-accordion-sub`,className:`${cls25}`,children:jsxRuntimeExports.jsx("ul",{className:cls22,children:Object.keys(a).map((m,E)=>{const p=a[m],R=p.childItems||{};return p.hidden?null:jsxRuntimeExports.jsx(MenuItem,{childrens:R,name:m,index:o,hasChild:p.hasChild,title:p.title,path:p.path,icon:p.iconCls},m)})})})]},r)}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsxs(NavLink,{to:s,className:u,children:[jsxRuntimeExports.jsx("i",{className:n}),e]})," "]},r)})})},Menu=({data:t,store:e,config:s})=>{const n=r=>{let a={};if(r.model){const o=r.model,l=e.get(o);if(l&&r.modelListMethod){const i=r.modelListMethod;try{const c=l[i]();for(const u of c){const h=u[r.displayField],m=u[r.slugField],E=r.childRoutePath.replace(/{SLUG_VALUE}/,m);a[m]={title:h,name:m,path:E,iconCls:r.iconCls}}}catch(c){console.error(c)}}}return a};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("ul",{className:cls14,children:Object.keys(t).map((r,a)=>{const o=t[r];let l=o.childItems||{};return o.hidden?null:((o.useModel||!1)&&(l=n(o),o.hasChild=Object.keys(l).length>0),jsxRuntimeExports.jsx(MenuItem,{childrens:l,name:r,index:a,hasChild:o.hasChild,title:o.title,path:o.path,icon:o.iconCls},a))})})})};class SideMenu extends reactExports.Component{constructor(e){super(e),this.state={sideMenuLinks:Object.assign({},side_menu.links),hideSidebar:!1}}reload(){this.setState({sideMenuLinks:Object.assign({},side_menu.links)})}render(){const{store:e,config:s}=this.props;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("nav",{"data-hs-accordion-always-open":"",className:cls13,children:jsxRuntimeExports.jsx(Menu,{data:this.state.sideMenuLinks,store:e,config:s})})})}}const Sidebar=({store:t,config:e})=>{const s=reactExports.useRef(null),n=r=>{console.log("SideBar.reloadSidebar()"),s.current&&s.current.reload()};return reactExports.useEffect(()=>{e.getUiConfig().applyReloadSidebar(r=>{n()},"sidebar")},[]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{id:"application-sidebar",className:cls10,children:[jsxRuntimeExports.jsx("div",{className:cls11,children:jsxRuntimeExports.jsx("a",{className:cls12,href:"#","aria-label":"Brand",children:jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("img",{src:appLogo})," ",jsxRuntimeExports.jsx("div",{className:"m-3",children:"LLFecther"})]})})}),jsxRuntimeExports.jsx(SideMenu,{store:t,config:e,ref:s})]})})},BreadcrumbItem=({title:t,slug:e})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[t," ",jsxRuntimeExports.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:cls8,children:jsxRuntimeExports.jsx("path",{d:"M5 1L10.6869 7.16086C10.8637 7.35239 10.8637 7.64761 10.6869 7.83914L5 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:" "})})," ",e]})}),Breadcrumb=({})=>{const t=useLocation(),{hash:e,pathname:s,search:n}=t,r=a=>{let o=s.split("/").filter(u=>u!=="");const[l,i]=o;let c="";return l=="manager"?c=jsxRuntimeExports.jsx(BreadcrumbItem,{title:"Download Manager",slug:i}):c=s,c};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("ol",{"aria-label":"Breadcrumb",className:cls6,children:[jsxRuntimeExports.jsxs("li",{className:cls7,children:["LLFetcher",jsxRuntimeExports.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:cls8,children:jsxRuntimeExports.jsx("path",{d:"M5 1L10.6869 7.16086C10.8637 7.35239 10.8637 7.64761 10.6869 7.83914L5 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",children:" "})})]}),jsxRuntimeExports.jsx("li",{"aria-current":"page",className:cls9,children:r()})]})," "]})},SidebarToggle=({})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:cls1,children:jsxRuntimeExports.jsxs("div",{className:cls2,children:[jsxRuntimeExports.jsxs("button",{type:"button","data-hs-overlay":"#application-sidebar","aria-controls":"application-sidebar","aria-label":"Toggle navigation",className:cls3,children:[jsxRuntimeExports.jsx("span",{className:cls4,children:" Toggle Navigation "}),jsxRuntimeExports.jsx("svg",{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",className:cls5,children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z",children:" "})})]}),jsxRuntimeExports.jsx(Breadcrumb,{})]})})}),ExampleContent=({})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:`${cls28} pb-2`,children:jsxRuntimeExports.jsx(Outlet,{})})}),Content=({})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ExampleContent,{})," "]});class DialogContent extends reactExports.Component{constructor(e){super(e),this.btnOpenModelRef=reactExports.createRef(null),this.state={message:"",title:"",mode:"alert"}}alert(e,s){this.setState({title:e,message:s,mode:"alert"}),this.btnOpenModelRef.current.click()}render(){const{message:e,title:s}=this.state;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{style:{display:"none"},type:"button",ref:this.btnOpenModelRef,className:"py-3 px-4 inline-flex justify-center items-center gap-2 rounded-lg border border-transparent font-semibold bg-white text-slate-800 hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all text-sm dark:bg-slate-800 dark:text-white dark:focus:ring-offset-gray-800","data-hs-overlay":"#hs-basic-modal",children:"Open modal"}),jsxRuntimeExports.jsx("div",{id:"hs-basic-modal",className:"hs-overlay hidden w-full h-full fixed top-0 left-0 z-[60] overflow-x-hidden overflow-y-auto",children:jsxRuntimeExports.jsx("div",{className:"hs-overlay-open:opacity-100 hs-overlay-open:duration-500 opacity-0 transition-all sm:max-w-lg sm:w-full m-3 sm:mx-auto",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-white border shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center py-3 px-4 border-b dark:border-gray-700",children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white",children:[s,"        "]}),jsxRuntimeExports.jsxs("button",{type:"button",className:"inline-flex flex-shrink-0 justify-center items-center h-8 w-8 rounded-md text-gray-500 hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 focus:ring-offset-white transition-all text-sm dark:focus:ring-gray-700 dark:focus:ring-offset-gray-800","data-hs-overlay":"#hs-basic-modal",children:[jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close"}),jsxRuntimeExports.jsx("svg",{className:"w-3.5 h-3.5",width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M0.258206 1.00652C0.351976 0.912791 0.479126 0.860131 0.611706 0.860131C0.744296 0.860131 0.871447 0.912791 0.965207 1.00652L3.61171 3.65302L6.25822 1.00652C6.30432 0.958771 6.35952 0.920671 6.42052 0.894471C6.48152 0.868271 6.54712 0.854471 6.61352 0.853901C6.67992 0.853321 6.74572 0.865971 6.80722 0.891111C6.86862 0.916251 6.92442 0.953381 6.97142 1.00032C7.01832 1.04727 7.05552 1.1031 7.08062 1.16454C7.10572 1.22599 7.11842 1.29183 7.11782 1.35822C7.11722 1.42461 7.10342 1.49022 7.07722 1.55122C7.05102 1.61222 7.01292 1.6674 6.96522 1.71352L4.31871 4.36002L6.96522 7.00648C7.05632 7.10078 7.10672 7.22708 7.10552 7.35818C7.10442 7.48928 7.05182 7.61468 6.95912 7.70738C6.86642 7.80018 6.74102 7.85268 6.60992 7.85388C6.47882 7.85498 6.35252 7.80458 6.25822 7.71348L3.61171 5.06702L0.965207 7.71348C0.870907 7.80458 0.744606 7.85498 0.613506 7.85388C0.482406 7.85268 0.357007 7.80018 0.264297 7.70738C0.171597 7.61468 0.119017 7.48928 0.117877 7.35818C0.116737 7.22708 0.167126 7.10078 0.258206 7.00648L2.90471 4.36002L0.258206 1.71352C0.164476 1.61976 0.111816 1.4926 0.111816 1.36002C0.111816 1.22744 0.164476 1.10028 0.258206 1.00652Z",fill:"currentColor"})})]})]}),jsxRuntimeExports.jsx("div",{className:"p-4 overflow-y-auto",children:jsxRuntimeExports.jsx("p",{className:"mt-1 text-gray-800 dark:text-gray-400",children:e})}),jsxRuntimeExports.jsx("div",{className:"flex justify-end items-center gap-x-2 py-3 px-4 border-t dark:border-gray-700",children:jsxRuntimeExports.jsx("button",{type:"button",className:"py-3 px-4 inline-flex justify-center items-center gap-2 rounded-md border font-medium bg-white text-gray-700 shadow-sm align-middle hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-blue-600 transition-all text-sm dark:bg-slate-900 dark:hover:bg-slate-800 dark:border-gray-700 dark:text-gray-400 dark:hover:text-white dark:focus:ring-offset-gray-800","data-hs-overlay":"#hs-basic-modal",children:"Close"})})]})})})]})}}const Template=({store:t,config:e})=>{const[s,n]=reactExports.useState(!1),r=reactExports.useRef(null);return reactExports.useEffect(()=>{e.getUiConfig().applyHiddenSidebarStatus(n,a=>{console.log(a),n(a)},"template")},[]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:cls0,children:[jsxRuntimeExports.jsx(DialogContent,{ref:r}),jsxRuntimeExports.jsx(SidebarToggle,{}),jsxRuntimeExports.jsx(Sidebar,{store:t,config:e}),jsxRuntimeExports.jsx(Content,{})]})})},slugify=t=>t.normalize("NFKD").replace(/[^\w\s-]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/^-+|-+$/g,""),slugToTitle=t=>{var e=t.split("-"),s=e.map(function(n){return n.charAt(0).toUpperCase()+n.slice(1)});return s.join(" ")},getNText=(t,e)=>{let s=t,n=e,r="";if(Array.isArray(e)){let a=n.length-1,o=0,l=s,i=!1;for(let c of n){let u=l.find(c);if(u.length===0||i)break;o>=a?u.length>0&&(r=u.text()):l=u,o+=1}}else{let a=s.find(n);a.length>0&&(r=a.text())}return r},getAuthors=async(t,e,s,n)=>{let r=e.getListByCourse(n);if(r.length==0){const[a,o]=getCourseXmlParentElement(t);let l=a.find("authors");l.length==0&&(l=a.find("star_authorsv2"));for(const i of l){let c=jQuery(i).text(),u=t.find(`entityUrn:contains('${c}')`);if(u=u.filter((h,m)=>jQuery(m).text().trim().match(/urn:li:learningApiAuthor:/)),u.length>0)for(const h of u){const m=jQuery(h),E=m.text().trim();if(E.length>0&&E==c){let p=m.parent(),R=getNText(p,"slug"),g=slugToTitle(R),f=getNText(p,["biographyV2","text"]),S=getNText(p,["shortBiographyV2","text"]),y=await e.create(g,R,f,S,n.id);y&&await s.addAuthorId(n.id,y.id),r.push(y)}}}}return r},getCourseInfo=async(t,e,s,n)=>{let r=s.getBySlug(e);if(r)return r.exerciseFiles=n.getListByCourseId(r.id),r;const[a,o]=getCourseXmlParentElement(t);if(a){let l=a.find("slug").text();console.log(`course slug found : ${l}`),r={url:`https://www.linkedin.com/learning/${e}`,slug:e,exerciseFiles:[],sourceCodeRepository:null,description:null,urn:o},r.title=a.find("title").text(),r.visibility=a.find("visibility").text();let i=a.find("viewerCounts");i.length>0&&(r.viewerCounts=parseInt(i.find("total").text())),r.description=a.find("description").text(),r.descriptionV2=a.find("descriptionV2").text(),r.descriptionV2&&(r.description=r.descriptionV2),a.find("duration").length>0&&(r.duration=parseInt(a.find("duration").text()));let u=a.find("dificulty");u.length>0&&(r.dificulty=u.find("difficultylevel").text());let h=a.find("descriptionV3");h.length>0&&(r.descriptionv3=h.text(),r.descriptionV3&&(r.description=r.descriptionV3));let m=a.find("sourceCodeRepository");if(m.length>0){const w=m.text();isValidUrl(w)&&(r.sourceCodeRepository=w)}let E=["sizeInBytes","name","url"],p=a.find("exerciseFiles"),R=[];if(p.length>0)for(const w of p){const N=jQuery(w);console.log(N.html());const b={};for(let T in E){const k=E[T];let A=N.find(k);if(A.length>0){const _=A.text().trim();k=="sizeInBytes"?b[k]=parseInt(_):b[k]=_}}R.push(b)}const{title:g,slug:f,sourceCodeRepository:S,description:y,urn:d}=r;if(r=await s.create(g,f,r.duration,S,y,d),r.exerciseFiles=[],R.length>0)for(let w in R)try{const N=R[w];if(N.name.length>0){const{sizeInBytes:b,name:T,url:k}=N,A=await n.create(T,k,b,r.id);r.exerciseFiles.push(A)}}catch(N){console.error(N)}return r}return null},getCourseSections=async(t,e,s,n)=>{let r=s.getListByCourseId(n);if(r.length>0)return r;let a=t.find("contents");a.length==0&&(a=t.find("contentsderived")),r=[];for(const o of a){const l=jQuery(o).text().trim();let i=e.find(`cachingKey:contains('${l}')`);if(i.length>0)for(const c of i){const u=jQuery(c);if(u.text().trim()==l){let m=u.parent(),E=m.find("title");if(E.length>0){const p=E.text(),R=slugify(p);let g={title:p,itemStars:[],slug:R},f=m.find("star_items");if(f.length==0&&(f=m.find("star_video")),f.length>0)for(const N of f){const b=jQuery(N).text().trim(),T="urn:li:learningApiTocItem:urn:li:learningApiAssessmen";b.match(T)||b.length>0&&g.itemStars.push(b)}const{title:S,itemStars:y,slug:d}=g,w=await s.create(S,d,n,y);r.push(w)}}}}return r},isValidUrl=t=>{var e=/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/;return e.test(t)},courseUrlFromSlug=t=>`https://www.linkedin.com/learning/${t}`,authorUrlFromSlug=t=>`https://www.linkedin.com/learning/instructors/${t}`,sanitizeKeys=t=>{if(Array.isArray(t))return t.map(s=>typeof s=="object"?sanitizeKeys(s):s);let e={};for(const s in t)if(t.hasOwnProperty(s)){let n=s.replace(/^\$/,"");n=n.replace(/^\@/,""),n=n.replace(/^\#/,""),n=n.replace(/^\*/,"star_"),n=/^\d/.test(n)?`child_element_${n}`:n,typeof t[s]=="object"?e[n]=sanitizeKeys(t[s]):e[n]=t[s]}return e},OBJtoXML=t=>{var n="";for(var e in t){if(n+="<"+e+">",Array.isArray(t[e]))for(var s of t[e])n+="</"+e+">",n+="<"+e+">",n+=OBJtoXML(new Object(s));else typeof t[e]=="object"&&typeof t[e]!="string"?n+=OBJtoXML(new Object(t[e])):n+=t[e];n+="</"+e+">"}var n=n.replace(/<\/?[0-9]{1,}>/g,"");return n},convertJsonToXml=t=>{const e=sanitizeKeys({schema:t});return OBJtoXML({root:e})},parseJsonSchema=t=>{jQuery.expr[":"].containsRegex=jQuery.expr.createPseudo(function(o){var l=new RegExp(o,"i");return function(i){return l.test(jQuery(i).text())}});let e=null;const s=jQuery(`<div>${t}</div>`);s.find('a:containsRegex("sign in")').length>0&&(e="ERR_NO_LOGIN");const r=s.find("code");let a=[];if(!e)for(let o in r){let l=r[o];try{l.id.match(/^bpr-guid/)&&a.push(JSON.parse(l.textContent))}catch{}}return[a,e]},getTranscripts=async(t,e,s,n)=>{let r=n.getListByTocIdAsObject(s.id);if(r)return console.log("transcripts_get_from_m_transcript"),r;let a=[];t&&(a=t.find("transcripts"));const o=["captionFormat","isAutogenerated","captionFile"];for(const l of a){const i=jQuery(l),c=i.find("locale");if(c.length>0){const u=c.find("country");if(u.length>0){let h=u.text().trim().toLowerCase();r||(r={}),r[h]={country:h};const m=c.find("lang");m.length>0&&(r[h].lang=m.text().trim());for(const y of o){const d=i.find(y);if(d.length>0){let w=d.text().trim();y==="isAutogenerated"&&(w=w==="true"?1:0),r[h][y]=w}}const E={lang:h,country:r[h].country,fmt:r[h].captionFormat,url:r[h].captionFile,autoGenerated:r[h].isAutogenerated},{country:p,fmt:R,url:g,autoGenerated:f}=E,S=await n.create(s.id,h,p,R,g,f);r[h]=S}}}return r},getStreamLocations=async(t,e,s)=>{let n=s.getListByTocId(e.id);if(n.length>0)return console.log("stream_locations_get_from_m_stream_location"),n;let r=[];t&&(r=t.find("progressiveStreams"));const a=["size","bitRate","width","height"];if(r.length>0)for(const o of r){const l=jQuery(o);let i=l.find("height");if(i.length>0){i=i.text().trim(),i==="0"&&(i="audio"),n||(n={}),n[i]={};const c=l.find("streamingLocations");if(c.length>0){const u=c.find("url");u.length>0&&(n[i].url=u.text().trim());const h=c.find("expiresAt");h.length>0&&(n[i].expiresAt=parseInt(h.text().trim())/1e3);for(const p of a){const R=c.find(p);R.length>0&&(n[i][p]=parseInt(R.text().trim()))}const m={fmt:i,url:n[i].url,expiresAt:n[i].expiresAt},E=await s.create(i,m.url,e.id,m.expiresAt);n[i]=E}}}return n},getCourseToc=async(t,e,s,n,r,a)=>{let o=s.getByItemStar(t);if(o)return o;let l=getTocXmlParentElement(t,e);if(!l)return null;o={streamLocations:null,transcripts:null};let i=l.find("slug");if(i.length>0){let f=i.text();o.slug=f,o.url=`https://www.linkedin.com/learning/${a}/${f}`}o.title=l.find("title").text(),o.visibility=l.find("visibility").text(),o.duration=parseInt(l.find("duration").text());let c=l.find("star_lyndaVideoViewingStatus").text().trim();c.length==0&&(c=l.find("star_interactionstatusv2").text().trim()),o.vStatusUrn=c;const{title:u,slug:h,url:m,duration:E,captionUrl:p,captionFmt:R}=o,g=await s.create(u,h,m,E,p,R,r.id,t,c);if(g){const{tocIds:f}=r;f.includes(g.id)||(f.push(g.id),await n.updateTocIds(r.id,f)),r.tocIds=f}return g},getTocXmlParentElement=(t,e)=>{if(!e)return null;let s=e.find(`cachingKey:contains('${t}')`),n=null;if(s.length>1)for(const r of s){const a=jQuery(r);let o=a.parent();if(a.text().trim()===t){let i=o.find(">type");if(i.length>0&&(i=i.text().trim(),i==="com.linkedin.learning.api.deco.content.Video"))return s=a.closest("included"),s}}if(console.log(s.html()),s.length>0){let a=s.parent().find("content");if(a.length>0)if(a=a.find("video"),a.length>0){const o=a.text().trim();let l=e.find(`entityUrn:contains('${o}')`);if(l.length>0)for(const i of l){const c=jQuery(i);c.text().trim()==o&&(n=c.closest("included"))}}else console.error(`could_not_find_video_urn: ${t}`);else console.error(`could_not_find_video_entity_urn : ${t}`)}else console.error(`could_not_find_toc_nd : ${t}`);return n},getCourseXmlParentElement=t=>{if(!t)return[null,null];let e=null,s=null,n=t.find("star_elements:contains('urn:li:learningApiCourse:')");if(n.length==0&&(n=t.find("entityUrn")),n.length>0){s=n.text();let r=t.find(`entityUrn:contains('${s}')`);for(const a of r)if(jQuery(a).text()==s){e=jQuery(a).closest("included");break}}return[e,s]},getVideoMetaNd=(t,e)=>{let s=null,n=e.find(`star_lyndaVideoViewingStatus:contains('${t}')`);e.find("status:contains('429')");const r=e.find("status"),a=[];for(const l of r)a.push(parseInt(jQuery(l).text()));n.length==0&&(console.error("A"),console.error(`could_not_find_v_status_lookup : ${t}`),t=t.replace("urn:li:lyndaVideoViewingStatus:",""),n=e.find(`trackingUrn:contains('${t}')`)),n.length==0&&(console.error("B"),console.error(`could_not_find_v_status_lookup : ${t}`),n=e.find(`star_interactionstatusv2:contains('${t}')`));let o=-1;if(n.length>0){let l=!1;for(const i of n){const c=jQuery(i).parent();if(s=c.find("presentation"),s.length==0&&(s=c.find("presentationDerived")),o=0,s.length>0&&(o+=1,s=s.find("videoPlay"),s.length>0&&(o+=1,s=s.find("videoPlayMetadata"),l=!0,a.push(200))),l)break}}return s||(console.error(`could_not_find_v_meta_data_nd_pos : ${o}`),console.log("Try another method")),[s,a]};class CourseApi{constructor(e){H(this,"store",null);H(this,"course",null);H(this,"sections",[]);H(this,"courseXmlDoc",null);H(this,"tocXmlDocs",{});H(this,"authors",[]);H(this,"mPrxCache",null);H(this,"courseXmlDocFetchStatus",0);H(this,"tocXmlDocFetchStatus",0);H(this,"lastCourseXmlDocCacheKey",null);H(this,"lastTocXmlDocCacheKey",null);this.store=e,this.mPrxCache=e.get("PrxCache")}informUnauthenticatedAccess(){alert("Please make sure you are logged in to LinkedIn Learning site !, This window will close in 10 second."),setTimeout(()=>{window.open("https://www.linkedin.com/learning/login?fromSignIn=true&trk=login-sign-in","_blank")},5e3),setTimeout(e=>{window.close()},1e4)}getCourseSlugFromUrl(e){const[s,n]=getCourseSlugFromUrl(e);return s}async getCourseInfo(e,s=!1){let n=null;return n||(n=await this.fetchCourseInfo(e,s)),n?this.course=n:this.store.get("PrxCache").unsetByKey(this.lastCourseXmlDocCacheKey),n}async fetchWithRetry(e){let s=!1,n=0,r=0,a=0,o={ok:!1,status:0,text:l=>""};for(;!s;){n>0&&console.log(`retry ${n}`),r>0&&(console.log(`wait for ${r} second`),setTimeout(()=>{},r*1e3));try{o=await fetch(e),a=o.status}catch(l){console.error(l)}if(a!=200?(n+=1,r+=5):(s=!0,r=0),n>3){console.log(`retry counts reached max : ${n}`),r=0;break}}return o}async getXmlDoc(e,s=!1,n=null){let r=null;const a=await this.mPrxCache.get(e);let o=null,l=0;if(!a.isEmpty())o=a.getCacheContent(),l=a.getStatusCode();else try{let i=await this.fetchWithRetry(e);l=i.status,i.ok&&(o=await i.text(),l==200&&this.mPrxCache.set(e,o,l))}catch(i){console.error(i)}if(n&&(this[n]=l),o){const[i,c]=parseJsonSchema(o);console.log(c),c?c=="ERR_NO_LOGIN"&&this.informUnauthenticatedAccess():r=jQuery(convertJsonToXml(i))}return[r,a.getKey()]}async getCourseXmlDoc(e,s=!1){let n=this.courseXmlDoc;if(!n){const[r,a]=await this.getXmlDoc(e,s,"courseXmlDocFetchStatus");this.lastCourseXmlDocCacheKey=a,n=r,this.courseXmlDoc=n}return n}async getTocXmlDoc(e,s,n=!1){let r=null;if(typeof this.tocXmlDocs[e]<"u"&&(r=this.tocXmlDocs[e]),!r){const[a,o]=await this.getXmlDoc(s,n,"tocXmlDocFetchStatus");this.lastTocXmlDocCacheKey=o,r=a,this.tocXmlDocs[e]=r}return r}async getAuthors(e){let s=[];if(this.course&&(s=this.authors,s.length>0&&(s=this.authors)),s.length==0){const n=courseUrlFromSlug(e),r=await this.getCourseXmlDoc(n);s=await getAuthors(r,this.store.get("Author"),this.store.get("Course"),this.course),this.authors=s}return s}async fetchCourseInfo(e,s=!1){let n=!s;const r=courseUrlFromSlug(e);let a=await this.getCourseXmlDoc(r,n);return await getCourseInfo(a,e,this.store.get("Course"),this.store.get("ExerciseFile"))}async getCourseSections(e){let s=null;const n=this.store.get("Section");if(this.course||(this.course=await this.fetchCourseInfo(e)),this.sections&&this.sections.length>0)return this.sections;let r=courseUrlFromSlug(e),a=await this.getCourseXmlDoc(r);if(a){const[o,l]=getCourseXmlParentElement(a);o?(s=await getCourseSections(o,a,n,this.course.id),this.sections=s):console.error("Could not get course xml parent element")}else console.error("Could not get course xml doc");return s}async getCourseTocs(e){const s=this.store.get("Toc"),n=this.store.get("Section");let r=null,a=this.sections;if(a.length==0&&(a=await this.getCourseSections(e)),a.length>0){r={};for(const o of a){let l=o.slug;if(r[l]=[],r[l].length==0){const i=courseUrlFromSlug(e);let c=await this.getCourseXmlDoc(i);if(c){const[u,h]=getCourseXmlParentElement(c);if(u){r[l]=[];for(const m of o.itemStars){let E=await getCourseToc(m,c,s,n,o,e);E&&r[l].push(E)}}else console.error("Could ! get course xml parent element")}else console.error("Could ! get course xml doc")}else console.log("toc[section_slug]s_get_from_m_toc")}}return r}async getStreamLocs(e,s=!1){const n=this.store.get("StreamLocation");let r=[],a=!1;s&&(await n.deleteByTocId(e.id),a=!0);const o=await this.getTocXmlDoc(e.slug,e.url,a);if(o){const[l,i]=getVideoMetaNd(e.vStatusUrn,o);l?r=await getStreamLocations(l,e,n):console.error("Could not get video metadata nd"),r.length==0&&this.store.get("PrxCache").unsetByKey(this.lastTocXmlDocCacheKey)}else console.error("Could not get toc xml doc");return r}async getTranscripts(e,s=!1){let n=null,r=!1;const a=this.store.get("Transcript");s&&(this.mTranscript.deleteByTocId(e.id),r=!0);const o=await this.getTocXmlDoc(e.slug,e.url,r);if(o){const[l,i]=getVideoMetaNd(e.vStatusUrn,o);l?n=await getTranscripts(l,o,e,a):console.error("Could not get video metadata nd"),n||this.store.get("PrxCache").unsetByKey(this.lastTocXmlDocCacheKey)}else console.error("Could not get toc xml doc");return n}}function isObject(t){return Object.prototype.toString.call(t)==="[object Object]"}function objectSize(t){return Array.isArray(t)?t.length:isObject(t)?Object.keys(t).length:0}function stringifyForCopying(t,e){if(typeof t=="string")return t;try{return JSON.stringify(t,(s,n)=>{switch(typeof n){case"bigint":return String(n)+"n";case"number":case"boolean":case"object":case"string":return n;default:return String(n)}},e)}catch(s){return`${s.name}: ${s.message}`||"JSON.stringify failed"}}function isCollapsed(t,e,s,n,r,a){if(a&&a.collapsed!==void 0)return!!a.collapsed;if(typeof n=="boolean")return n;if(typeof n=="number"&&e>n)return!0;const o=objectSize(t);if(typeof n=="function"){const l=safeCall(n,[{node:t,depth:e,indexOrName:s,size:o}]);if(typeof l=="boolean")return l}return!!(Array.isArray(t)&&o>r||isObject(t)&&o>r)}function ifDisplay(t,e,s){return typeof t=="boolean"?t:!!(typeof t=="number"&&e>t||t==="collapsed"&&s||t==="expanded"&&!s)}function safeCall(t,e){try{return t(...e)}catch(s){reportError(s)}}function editableAdd(t){if(t===!0||isObject(t)&&t.add===!0)return!0}function editableEdit(t){if(t===!0||isObject(t)&&t.edit===!0)return!0}function editableDelete(t){if(t===!0||isObject(t)&&t.delete===!0)return!0}function isReactComponent(t){return typeof t=="function"}function customAdd(t){return!t||t.add===void 0||!!t.add}function customEdit(t){return!t||t.edit===void 0||!!t.edit}function customDelete(t){return!t||t.delete===void 0||!!t.delete}function customCopy(t){return!t||t.enableClipboard===void 0||!!t.enableClipboard}function resolveEvalFailedNewValue(t,e){return t==="string"?e.trim().replace(/^\"([\s\S]+?)\"$/,"$1"):e}var _path$7;function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},_extends$7.apply(this,arguments)}var SvgAngleDown=function(e){return reactExports.createElement("svg",_extends$7({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"},e),_path$7||(_path$7=reactExports.createElement("path",{fill:"currentColor",d:"M12.473 5.806a.666.666 0 0 0-.946 0L8.473 8.86a.667.667 0 0 1-.946 0L4.473 5.806a.667.667 0 1 0-.946.94l3.06 3.06a2 2 0 0 0 2.826 0l3.06-3.06a.667.667 0 0 0 0-.94Z"})))},_path$6;function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},_extends$6.apply(this,arguments)}var SvgCopy=function(e){return reactExports.createElement("svg",_extends$6({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),_path$6||(_path$6=reactExports.createElement("path",{fill:"currentColor",d:"M17.542 2.5h-4.75a3.963 3.963 0 0 0-3.959 3.958v4.75a3.963 3.963 0 0 0 3.959 3.959h4.75a3.963 3.963 0 0 0 3.958-3.959v-4.75A3.963 3.963 0 0 0 17.542 2.5Zm2.375 8.708a2.378 2.378 0 0 1-2.375 2.375h-4.75a2.378 2.378 0 0 1-2.375-2.375v-4.75a2.378 2.378 0 0 1 2.375-2.375h4.75a2.378 2.378 0 0 1 2.375 2.375v4.75Zm-4.75 6.334a3.963 3.963 0 0 1-3.959 3.958h-4.75A3.963 3.963 0 0 1 2.5 17.542v-4.75a3.963 3.963 0 0 1 3.958-3.959.791.791 0 1 1 0 1.584 2.378 2.378 0 0 0-2.375 2.375v4.75a2.378 2.378 0 0 0 2.375 2.375h4.75a2.378 2.378 0 0 0 2.375-2.375.792.792 0 1 1 1.584 0Z"})))},_path$5,_path2$4;function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},_extends$5.apply(this,arguments)}var SvgCopied=function(e){return reactExports.createElement("svg",_extends$5({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),_path$5||(_path$5=reactExports.createElement("path",{fill:"currentColor",d:"M17.25 3H6.75A3.755 3.755 0 0 0 3 6.75v10.5A3.754 3.754 0 0 0 6.75 21h10.5A3.754 3.754 0 0 0 21 17.25V6.75A3.755 3.755 0 0 0 17.25 3Zm2.25 14.25a2.25 2.25 0 0 1-2.25 2.25H6.75a2.25 2.25 0 0 1-2.25-2.25V6.75A2.25 2.25 0 0 1 6.75 4.5h10.5a2.25 2.25 0 0 1 2.25 2.25v10.5Z"})),_path2$4||(_path2$4=reactExports.createElement("path",{fill:"#14C786",d:"M10.312 14.45 7.83 11.906a.625.625 0 0 0-.896 0 .659.659 0 0 0 0 .918l2.481 2.546a1.264 1.264 0 0 0 .896.381 1.237 1.237 0 0 0 .895-.38l5.858-6.011a.658.658 0 0 0 0-.919.625.625 0 0 0-.896 0l-5.857 6.01Z"})))};function CopyButton({node:t}){const[e,s]=reactExports.useState(!1);return e?jsxRuntimeExports.jsx(SvgCopied,{className:"json-view--copy",style:{display:"inline-block"}}):jsxRuntimeExports.jsx(SvgCopy,{onClick:n=>{const r=stringifyForCopying(t);n.stopPropagation(),navigator.clipboard.writeText(r),s(!0),setTimeout(()=>s(!1),3e3)},className:"json-view--copy"})}function NameValue({indexOrName:t,value:e,depth:s,parent:n,deleteHandle:r,editHandle:a}){return jsxRuntimeExports.jsxs("div",Object.assign({className:"json-view--pair"},{children:[jsxRuntimeExports.jsx("span",Object.assign({className:typeof t=="number"?"json-view--index":"json-view--property"},{children:t})),":"," ",jsxRuntimeExports.jsx(JsonNode,{node:e,depth:s+1,deleteHandle:r,editHandle:a,parent:n,indexOrName:t})]}))}var _path$4,_path2$3;function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},_extends$4.apply(this,arguments)}var SvgTrash=function(e){return reactExports.createElement("svg",_extends$4({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),_path$4||(_path$4=reactExports.createElement("path",{fill:"currentColor",d:"M18.75 6h-2.325a3.757 3.757 0 0 0-3.675-3h-1.5a3.757 3.757 0 0 0-3.675 3H5.25a.75.75 0 0 0 0 1.5H6v9.75A3.754 3.754 0 0 0 9.75 21h4.5A3.754 3.754 0 0 0 18 17.25V7.5h.75a.75.75 0 1 0 0-1.5Zm-7.5-1.5h1.5A2.255 2.255 0 0 1 14.872 6H9.128a2.255 2.255 0 0 1 2.122-1.5Zm5.25 12.75a2.25 2.25 0 0 1-2.25 2.25h-4.5a2.25 2.25 0 0 1-2.25-2.25V7.5h9v9.75Z"})),_path2$3||(_path2$3=reactExports.createElement("path",{fill:"#DA0000",d:"M10.5 16.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 1 0-1.5 0v4.5a.75.75 0 0 0 .75.75ZM13.5 16.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 1 0-1.5 0v4.5a.75.75 0 0 0 .75.75Z"})))},_path$3,_path2$2;function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},_extends$3.apply(this,arguments)}var SvgAddSquare=function(e){return reactExports.createElement("svg",_extends$3({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),_path$3||(_path$3=reactExports.createElement("path",{fill:"currentColor",d:"M21 6.75v10.5A3.754 3.754 0 0 1 17.25 21H6.75A3.754 3.754 0 0 1 3 17.25V6.75A3.754 3.754 0 0 1 6.75 3h10.5A3.754 3.754 0 0 1 21 6.75Zm-1.5 0c0-1.24-1.01-2.25-2.25-2.25H6.75C5.51 4.5 4.5 5.51 4.5 6.75v10.5c0 1.24 1.01 2.25 2.25 2.25h10.5c1.24 0 2.25-1.01 2.25-2.25V6.75Z"})),_path2$2||(_path2$2=reactExports.createElement("path",{fill:"#14C786",d:"M15 12.75a.75.75 0 1 0 0-1.5h-2.25V9a.75.75 0 1 0-1.5 0v2.25H9a.75.75 0 1 0 0 1.5h2.25V15a.75.75 0 1 0 1.5 0v-2.25H15Z"})))},_path$2,_path2$1;function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},_extends$2.apply(this,arguments)}var SvgDone=function(e){return reactExports.createElement("svg",_extends$2({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),_path$2||(_path$2=reactExports.createElement("path",{fill:"currentColor",d:"M12 3a9 9 0 1 0 9 9 9.01 9.01 0 0 0-9-9Zm0 16.5a7.5 7.5 0 1 1 7.5-7.5 7.509 7.509 0 0 1-7.5 7.5Z"})),_path2$1||(_path2$1=reactExports.createElement("path",{fill:"#14C786",d:"m10.85 13.96-1.986-2.036a.5.5 0 0 0-.716 0 .527.527 0 0 0 0 .735l1.985 2.036a1.01 1.01 0 0 0 .717.305.99.99 0 0 0 .716-.305l4.686-4.808a.526.526 0 0 0 0-.735.5.5 0 0 0-.716 0l-4.687 4.809Z"})))},_path$1,_path2;function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},_extends$1.apply(this,arguments)}var SvgCancel=function(e){return reactExports.createElement("svg",_extends$1({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),_path$1||(_path$1=reactExports.createElement("path",{fill:"#DA0000",d:"M15 9a.75.75 0 0 0-1.06 0L12 10.94 10.06 9A.75.75 0 0 0 9 10.06L10.94 12 9 13.94A.75.75 0 0 0 10.06 15L12 13.06 13.94 15A.75.75 0 0 0 15 13.94L13.06 12 15 10.06A.75.75 0 0 0 15 9Z"})),_path2||(_path2=reactExports.createElement("path",{fill:"currentColor",d:"M12 3a9 9 0 1 0 9 9 9.01 9.01 0 0 0-9-9Zm0 16.5a7.5 7.5 0 1 1 7.5-7.5 7.509 7.509 0 0 1-7.5 7.5Z"})))};function ObjectNode({node:t,depth:e,indexOrName:s,deleteHandle:n,customOptions:r}){const{collapsed:a,enableClipboard:o,collapseObjectsAfterLength:l,editable:i,onDelete:c,src:u,onAdd:h,onEdit:m,onChange:E,forceUpdate:p,displaySize:R}=reactExports.useContext(JsonViewContext),g=isObject(t),[f,S]=reactExports.useState(isCollapsed(t,e,s,a,l,r));reactExports.useEffect(()=>{S(isCollapsed(t,e,s,a,l,r))},[a,l]);const y=reactExports.useCallback((O,G,oe)=>{Array.isArray(t)?t[+O]=G:t&&(t[O]=G),m&&m({newValue:G,oldValue:oe,depth:e,src:u,indexOrName:O,parentType:g?"object":"array"}),E&&E({type:"edit",depth:e,src:u,indexOrName:O,parentType:g?"object":"array"}),p()},[t,m,E,p]),d=O=>{Array.isArray(t)?t.splice(+O,1):t&&delete t[O],p()},[w,N]=reactExports.useState(!1),b=()=>{N(!1),n&&n(s),c&&c({value:t,depth:e,src:u,indexOrName:s,parentType:g?"object":"array"}),E&&E({type:"delete",depth:e,src:u,indexOrName:s,parentType:g?"object":"array"})},[T,k]=reactExports.useState(!1),A=reactExports.useRef(null),_=()=>{var O;if(g){const G=(O=A.current)===null||O===void 0?void 0:O.value;G&&(t[G]=null,A.current&&(A.current.value=""),k(!1),h&&h({indexOrName:G,depth:e,src:u,parentType:"object"}),E&&E({type:"add",indexOrName:G,depth:e,src:u,parentType:"object"}))}else if(Array.isArray(t)){const G=t;G.push(null),h&&h({indexOrName:G.length-1,depth:e,src:u,parentType:"array"}),E&&E({type:"add",indexOrName:G.length-1,depth:e,src:u,parentType:"array"})}p()},C=O=>{O.key==="Enter"?(O.preventDefault(),_()):O.key==="Escape"&&Q()},I=w||T,Q=()=>{N(!1),k(!1)},P=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!f&&!I&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>S(!0)},{children:[ifDisplay(R,e,f)&&jsxRuntimeExports.jsxs("span",Object.assign({className:"jv-size"},{children:[objectSize(t)," Items"]})),jsxRuntimeExports.jsx(SvgAngleDown,{className:"jv-chevron"})]})),T&&g&&jsxRuntimeExports.jsx("input",{className:"json-view--input",placeholder:"property",ref:A,onKeyDown:C}),I&&jsxRuntimeExports.jsx(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:T?_:b}),I&&jsxRuntimeExports.jsx(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:Q}),!f&&!I&&o&&customCopy(r)&&jsxRuntimeExports.jsx(CopyButton,{node:t}),!f&&!I&&editableAdd(i)&&customAdd(r)&&jsxRuntimeExports.jsx(SvgAddSquare,{className:"json-view--edit",onClick:()=>{g?(k(!0),setTimeout(()=>{var O;return(O=A.current)===null||O===void 0?void 0:O.focus()})):_()}}),!f&&!I&&editableDelete(i)&&customDelete(r)&&n&&jsxRuntimeExports.jsx(SvgTrash,{className:"json-view--edit",onClick:()=>N(!0)})]});return Array.isArray(t)?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"["}),P,f?jsxRuntimeExports.jsx("button",Object.assign({onClick:()=>S(!1),className:"jv-button"},{children:"..."})):jsxRuntimeExports.jsx("div",Object.assign({className:"jv-indent"},{children:t.map((O,G)=>jsxRuntimeExports.jsx(NameValue,{indexOrName:G,value:O,depth:e,parent:t,deleteHandle:d,editHandle:y},String(s)+String(G)))})),jsxRuntimeExports.jsx("span",{children:"]"}),f&&ifDisplay(R,e,f)&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>S(!1),className:"jv-size"},{children:[objectSize(t)," Items"]}))]}):g?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"{"}),P,f?jsxRuntimeExports.jsx("button",Object.assign({onClick:()=>S(!1),className:"jv-button"},{children:"..."})):jsxRuntimeExports.jsx("div",Object.assign({className:"jv-indent"},{children:Object.entries(t).map(([O,G])=>jsxRuntimeExports.jsx(NameValue,{indexOrName:O,value:G,depth:e,parent:t,deleteHandle:d,editHandle:y},String(s)+String(O)))})),jsxRuntimeExports.jsx("span",{children:"}"}),f&&ifDisplay(R,e,f)&&jsxRuntimeExports.jsxs("span",Object.assign({onClick:()=>S(!1),className:"jv-size"},{children:[objectSize(t)," Items"]}))]}):null}const LongString=React$1.forwardRef(({str:t,className:e,ctrlClick:s},n)=>{let{collapseStringMode:r,collapseStringsAfterLength:a}=reactExports.useContext(JsonViewContext);const[o,l]=reactExports.useState(!0);a=a>0?a:0;const i=t.replace(/\s+/g," "),c=u=>{(u.ctrlKey||u.metaKey)&&s?s(u):l(!o)};if(t.length<=a)return jsxRuntimeExports.jsxs("span",Object.assign({className:e,onClick:s},{children:['"',t,'"']}));if(r==="address")return t.length<=10?jsxRuntimeExports.jsxs("span",Object.assign({className:e,onClick:s},{children:['"',t,'"']})):jsxRuntimeExports.jsxs("span",Object.assign({onClick:c,className:e+" cursor-pointer"},{children:['"',o?i.slice(0,6)+"..."+i.slice(-4):t,'"']}));if(r==="directly")return jsxRuntimeExports.jsxs("span",Object.assign({onClick:c,className:e+" cursor-pointer"},{children:['"',o?i.slice(0,a)+"...":t,'"']}));if(r==="word"){let u=a,h=a+1,m=i,E=1;for(;;){if(/\W/.test(t[u])){m=t.slice(0,u);break}if(/\W/.test(t[h])){m=t.slice(0,h);break}if(E===6){m=t.slice(0,a);break}E++,u--,h++}return jsxRuntimeExports.jsxs("span",Object.assign({onClick:c,className:e+" cursor-pointer"},{children:['"',o?m+"...":t,'"']}))}return jsxRuntimeExports.jsxs("span",Object.assign({className:e},{children:['"',t,'"']}))});var _path;function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},_extends.apply(this,arguments)}var SvgEdit=function(e){return reactExports.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),_path||(_path=reactExports.createElement("path",{fill:"currentColor",d:"M17.25 3H6.75A3.754 3.754 0 0 0 3 6.75v10.5A3.754 3.754 0 0 0 6.75 21h10.5A3.754 3.754 0 0 0 21 17.25V6.75A3.754 3.754 0 0 0 17.25 3Zm2.25 14.25c0 1.24-1.01 2.25-2.25 2.25H6.75c-1.24 0-2.25-1.01-2.25-2.25V6.75c0-1.24 1.01-2.25 2.25-2.25h10.5c1.24 0 2.25 1.01 2.25 2.25v10.5Zm-6.09-9.466-5.031 5.03a2.981 2.981 0 0 0-.879 2.121v1.19c0 .415.336.75.75.75h1.19c.8 0 1.554-.312 2.12-.879l5.03-5.03a2.252 2.252 0 0 0 0-3.182c-.85-.85-2.331-.85-3.18 0Zm-2.91 7.151c-.28.28-.666.44-1.06.44H9v-.44c0-.4.156-.777.44-1.06l3.187-3.188 1.06 1.061-3.187 3.188Zm5.03-5.03-.782.783-1.06-1.061.782-.782a.766.766 0 0 1 1.06 0 .75.75 0 0 1 0 1.06Z"})))};function JsonNode({node,depth,deleteHandle:_deleteHandle,indexOrName,parent,editHandle}){const{collapseStringsAfterLength,enableClipboard,editable,src,onDelete,onChange,customizeNode}=reactExports.useContext(JsonViewContext);let customReturn;if(typeof customizeNode=="function"&&(customReturn=safeCall(customizeNode,[{node,depth,indexOrName}])),customReturn){if(reactExports.isValidElement(customReturn))return customReturn;if(isReactComponent(customReturn)){const t=customReturn;return jsxRuntimeExports.jsx(t,{node,depth,indexOrName})}}if(Array.isArray(node)||isObject(node))return jsxRuntimeExports.jsx(ObjectNode,{node,depth,indexOrName,deleteHandle:_deleteHandle,customOptions:typeof customReturn=="object"?customReturn:void 0});{const type=typeof node,[editing,setEditing]=reactExports.useState(!1),[deleting,setDeleting]=reactExports.useState(!1),valueRef=reactExports.useRef(null),edit=()=>{setEditing(!0),setTimeout(()=>{var t,e;(t=window.getSelection())===null||t===void 0||t.selectAllChildren(valueRef.current),(e=valueRef.current)===null||e===void 0||e.focus()})},done=reactExports.useCallback(()=>{const newValue=valueRef.current.innerText;try{const evalValue=eval(newValue);editHandle&&editHandle(indexOrName,evalValue,node)}catch(t){const e=resolveEvalFailedNewValue(type,newValue);editHandle&&editHandle(indexOrName,e,node)}setEditing(!1)},[editHandle]),cancel=()=>{setEditing(!1),setDeleting(!1)},deleteHandle=()=>{setDeleting(!1),_deleteHandle&&_deleteHandle(indexOrName),onDelete&&onDelete({value:node,depth,src,indexOrName,parentType:Array.isArray(parent)?"array":"object"}),onChange&&onChange({depth,src,indexOrName,parentType:Array.isArray(parent)?"array":"object",type:"delete"})},handleKeyDown=reactExports.useCallback(t=>{t.key==="Enter"?(t.preventDefault(),done()):t.key==="Escape"&&cancel()},[done]),isEditing=editing||deleting,ctrlClick=!isEditing&&editableEdit(editable)&&customEdit(customReturn)&&editHandle?t=>{(t.ctrlKey||t.metaKey)&&edit()}:void 0,Icons=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[isEditing&&jsxRuntimeExports.jsx(SvgDone,{className:"json-view--edit",style:{display:"inline-block"},onClick:deleting?deleteHandle:done}),isEditing&&jsxRuntimeExports.jsx(SvgCancel,{className:"json-view--edit",style:{display:"inline-block"},onClick:cancel}),!isEditing&&enableClipboard&&customCopy(customReturn)&&jsxRuntimeExports.jsx(CopyButton,{node}),!isEditing&&editableEdit(editable)&&customEdit(customReturn)&&editHandle&&jsxRuntimeExports.jsx(SvgEdit,{className:"json-view--edit",onClick:edit}),!isEditing&&editableDelete(editable)&&customDelete(customReturn)&&_deleteHandle&&jsxRuntimeExports.jsx(SvgTrash,{className:"json-view--edit",onClick:()=>setDeleting(!0)})]});let className="json-view--string";switch(typeof(customReturn==null?void 0:customReturn.className)=="string"&&(className+=" "+customReturn.className),type){case"number":case"bigint":className="json-view--number";break;case"boolean":className="json-view--boolean";break;case"object":className="json-view--null";break}deleting&&(className+=" json-view--deleting");let displayValue=String(node);type==="bigint"&&(displayValue+="n");const EditingElement=reactExports.useMemo(()=>jsxRuntimeExports.jsx("span",{contentEditable:!0,className,dangerouslySetInnerHTML:{__html:type==="string"?`"${displayValue}"`:displayValue},ref:valueRef,onKeyDown:handleKeyDown}),[displayValue,type,handleKeyDown]);return type==="string"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[editing?EditingElement:node.length>collapseStringsAfterLength?jsxRuntimeExports.jsx(LongString,{str:node,ref:valueRef,className,ctrlClick}):jsxRuntimeExports.jsxs("span",Object.assign({className,onClick:ctrlClick},{children:['"',displayValue,'"']})),Icons]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[editing?EditingElement:jsxRuntimeExports.jsx("span",Object.assign({className,onClick:ctrlClick},{children:displayValue})),Icons]})}}const JsonViewContext=reactExports.createContext({src:void 0,collapseStringsAfterLength:99,collapseStringMode:"directly",collapseObjectsAfterLength:20,collapsed:!1,enableClipboard:!0,editable:!1,onEdit:void 0,onDelete:void 0,onAdd:void 0,onChange:void 0,forceUpdate:()=>{},customizeNode:void 0,displaySize:void 0});function JsonView({src:t,collapseStringsAfterLength:e=99,collapseStringMode:s="directly",collapseObjectsAfterLength:n=99,collapsed:r,enableClipboard:a=!0,editable:o=!1,onEdit:l,onDelete:i,onAdd:c,onChange:u,dark:h=!1,theme:m="default",customizeNode:E,displaySize:p}){const[R,g]=reactExports.useState(0),f=reactExports.useCallback(()=>g(S=>++S),[]);return jsxRuntimeExports.jsx(JsonViewContext.Provider,Object.assign({value:{src:t,collapseStringsAfterLength:e,collapseStringMode:s,collapseObjectsAfterLength:n,collapsed:r,enableClipboard:a,editable:o,onEdit:l,onDelete:i,onAdd:c,onChange:u,forceUpdate:f,customizeNode:E,displaySize:p}},{children:jsxRuntimeExports.jsx("code",Object.assign({className:"json-view"+(h?" dark":"")+(m&&m!=="default"?" json-view_"+m:"")},{children:jsxRuntimeExports.jsx(JsonNode,{node:t,depth:1})}))}))}class CustomToast extends reactExports.Component{constructor(e){super(e);const{toast:s}=e;this.state={toast:s,clockTimeout:0}}setHidden(e){const{toast:s}=this.state;s.hidden=e,this.setState({toast:s})}setClockTimeout(e){let{clockTimeout:s}=this.state;s=e,this.setState({clockTimeout:s})}render(){const{toast:e,clockTimeout:s}=this.state,{t:n,hidden:r}=e,a=r?"hidden":"";if(n=="normal")return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:`my-1 max-w-xs bg-white border border-gray-200 rounded-xl shadow-lg dark:bg-gray-800 dark:border-gray-700 ${a}`,role:"alert",children:jsxRuntimeExports.jsxs("div",{className:"flex p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("svg",{className:"flex-shrink-0 h-4 w-4 text-blue-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"})})}),jsxRuntimeExports.jsx("div",{className:"ms-3",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400",children:["(",s,")",e.message]})})]})})});if(n=="success")return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:`my-1 max-w-xs bg-white border border-gray-200 rounded-xl shadow-lg dark:bg-gray-800 dark:border-gray-700 ${a}`,role:"alert",children:jsxRuntimeExports.jsxs("div",{className:"flex p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("svg",{className:"flex-shrink-0 h-4 w-4 text-teal-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})})}),jsxRuntimeExports.jsx("div",{className:"ms-3",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400",children:["(",s,")",e.message]})})]})})});if(n=="error")return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:`my-1 max-w-xs bg-white border border-gray-200 rounded-xl shadow-lg dark:bg-gray-800 dark:border-gray-700 ${a}`,role:"alert",children:jsxRuntimeExports.jsxs("div",{className:"flex p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("svg",{className:"flex-shrink-0 h-4 w-4 text-red-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"})})}),jsxRuntimeExports.jsx("div",{className:"ms-3",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400",children:["(",s,")",e.message]})})]})})});if(n=="warning")return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:`my-1 max-w-xs bg-white border border-gray-200 rounded-xl shadow-lg dark:bg-gray-800 dark:border-gray-700 ${a}`,role:"alert",children:jsxRuntimeExports.jsxs("div",{className:"flex p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("svg",{className:"flex-shrink-0 h-4 w-4 text-yellow-500 mt-0.5",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:jsxRuntimeExports.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"})})}),jsxRuntimeExports.jsx("div",{className:"ms-3",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400",children:["(",s,")",e.message]})})]})})});if(n=="closable")return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{id:"dismiss-toast",className:`my-1 hs-removing:translate-x-5 hs-removing:opacity-0 transition duration-300 max-w-xs bg-white border border-gray-200 rounded-xl shadow-lg dark:bg-gray-800 dark:border-gray-700 ${a}`,role:"alert",children:jsxRuntimeExports.jsxs("div",{className:"flex p-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400",children:["(",s,")",e.message]}),jsxRuntimeExports.jsx("div",{className:"ms-auto",children:jsxRuntimeExports.jsxs("button",{type:"button",className:"inline-flex flex-shrink-0 justify-center items-center h-5 w-5 rounded-lg text-gray-800 opacity-50 hover:opacity-100 focus:outline-none focus:opacity-100 dark:text-white","data-hs-remove-element":"#dismiss-toast",children:[jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close"}),jsxRuntimeExports.jsxs("svg",{className:"flex-shrink-0 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("path",{d:"M18 6 6 18"}),jsxRuntimeExports.jsx("path",{d:"m6 6 12 12"})]})]})})]})})})}}class Toast extends reactExports.Component{constructor(e){super(e),this.state={toastList:[],toasts:""},this.toastTimeout=10,this.toastRefs=[]}add(e,s="normal"){const n={message:e,t:s,iv:null,clock:0,hidden:!1},{toastList:r}=this.state;r.push(n);const a=[];let o=0;for(const l of r){const i=this.createToast(l,o++);a.push(i)}this.setState({toastList:r,toasts:a},l=>{r.map((i,c)=>{setTimeout(u=>this.hideToastByTimeout(c),1e3)})})}checkUnusedToast(){const{toastList:e}=this.state;let s=0;for(const n of e)n.hidden&&(s+=1);s==e.length&&(this.setState({toastList:[],toasts:"..."}),this.toastRefs=[])}createToast(e,s){return e.hidden?"":(this.toastRefs[s]=reactExports.createRef(null),jsxRuntimeExports.jsx(CustomToast,{ref:this.toastRefs[s],toast:e},s))}hideToast(e){const{toastList:s,toasts:n}=this.state;s[e].hidden=!0,clearInterval(s[e].iv);const r=this.toastRefs[e].current;r&&(r.setHidden(!0),this.checkUnusedToast()),this.setState({toastList:s})}hideToastByTimeout(e){const{toastList:s}=this.state;if(!s[e].iv){const n=setInterval(()=>{s[e].clock+=1;const r=this.toastRefs[e].current;if(r){const a=this.toastTimeout-s[e].clock;r.setClockTimeout(a)}this.setState({toastList:s}),s[e].clock==this.toastTimeout&&this.hideToast(e)},1e3);s[e].iv=n,this.setState({toastList:s})}}clearToastTimer(){const{toastList:e}=this.state;e.map(s=>{clearInterval(s.iv)})}componentDidMount(){this.clearToastTimer()}render(){const{toasts:e}=this.state;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"fixed top-0 right-4 m-4",children:e})})}}async function loader$3({params:t}){const{ctl:e,slug:s}=t;return{ctl:e,slug:s}}class FetchStateInfo extends reactExports.Component{constructor(e){super(e),this.state={runLevel:0,statusCode:0,loading:!1}}resetState(){this.setState({runLevel:0,statusCode:0,loading:!1})}setMessage(e){this.setState({message:e})}setStatusCode(e){this.setState({statusCode:e})}setLoading(e){this.setState({loading:e})}setRunLevel(e){this.setState({runLevel:e})}render(){const{runLevel:e,statusCode:s,loading:n}=this.state,{onRetry:r,onFetch:a,name:o}=this.props,l=o.toLowerCase().replace(/\W/g,"-");let i="fa fa-check",c=`Fetch ${o} success`,u=!1,h=!1;return e==0?(i="fa fa-globe",c=`Fetch ${o}`):n?(c=`Fetching ${o} `,i="fa fa-spin fa-spinner"):s!=200?(i="fa fa-exclamation-triangle",c=`Fetch ${o} failed`,u=!0,h=!1):h=!0,jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:`flex items-center w-full ${u?"text-red-200":""} ${h?"text-green-200":""}`,children:[jsxRuntimeExports.jsx("div",{className:"p-2",children:jsxRuntimeExports.jsx("i",{className:i})}),jsxRuntimeExports.jsx("div",{className:"p-2",children:s}),jsxRuntimeExports.jsx("div",{className:"p-2",children:c}),jsxRuntimeExports.jsxs("div",{className:"p-2",children:[u?jsxRuntimeExports.jsx(Button,{className:l,onClick:m=>r(m),caption:"Retry",icon:"fa fa-refresh"}):"",e==0?jsxRuntimeExports.jsx(Button,{className:l,onClick:m=>a(m),caption:"Fetch",icon:"fa fa-download"}):""]})]})})}}const AddCoursePage=({slug:t,store:e,config:s,onOk:n})=>{const[r,a]=reactExports.useState(null),[o,l]=reactExports.useState(null),[i,c]=reactExports.useState(null),[u,h]=reactExports.useState(null),[m,E]=reactExports.useState(null),[p,R]=reactExports.useState(null),[g,f]=reactExports.useState(null),S=reactExports.useRef(null),y=reactExports.useRef(null),d=reactExports.useRef(null);let w=null;const N=new CourseApi(e),b=(C,I)=>{S.current.add(C,I)},T=async()=>{let C=!1,I=null;if(u&&m){for(const Q of u){if(C)break;const P=m[Q.slug];for(const O of P){if(C)break;I=O,C=!0}}if(I){b("try to fetch StreamLoc Trans Once","normal"),d.current.setRunLevel(1),d.current.setLoading(!0);const Q=await N.getStreamLocs(I);d.current.setStatusCode(N.tocXmlDocFetchStatus),Q?(R(Q),b(`Fetch stream locations [${Object.keys(Q).join(",")}]`,"success")):(b(`Failed to fetch stream locations toc : ${I.title}`,"error"),d.current.setStatusCode(-1));const P=await N.getTranscripts(I);P?(f(P),b(`Fetch transcripts [ ${Object.keys(P).join(", ")} ]`,"success")):(b(`Failed to fetch transcripts toc : ${I.title}`,"error"),d.current.setStatusCode(-1)),d.current.setLoading(!1)}}},k=async C=>{e.get("Course"),e.get("Author"),e.get("Section"),e.get("Toc"),e.get("StreamLocation"),e.get("Transcript"),e.get("ExerciseFile");let I=null;y.current.setRunLevel(1),y.current.setLoading(!0),I||(I=await N.getCourseInfo(C,!0),y.current.setStatusCode(N.courseXmlDocFetchStatus));const Q=courseUrlFromSlug(C);if(I){s.getUiConfig().reloadSidebar();try{a(N.courseXmlDoc.html())}catch(oe){console.warn(oe)}b("Fetch course OK","success"),l(I);const P=await N.getAuthors(C);P.length>0?(b("Fetch course authors ok","success"),c(P)):b(`Failed to fetch course authors course : ${I.title}`,"error");const O=await N.getCourseSections(C);O?(b(`Fetch course sections ok ${O.length}`,"success"),h(O)):b(`Failed to fetch course sections course : ${I.title}`,"error");const G=await N.getCourseTocs(C);G?(b("Fetch course tocs ok ","success"),E(G),A()):b(`Failed to fetch course tocs course : ${I.title}`,"error")}else b(`Failed to fetch course slug : ${Q}`,"error"),y.current.setStatusCode(-1);y.current.setLoading(!1)},A=()=>{window.location.hash=`/manager/${t}`},_=()=>{setTimeout(()=>{jQuery("button.course-info").click()},1e3)};return reactExports.useEffect(()=>{t&&t!=w&&(l(null),c(null),h(null),E(null),R(null),f(null),d.current&&d.current.resetState(),y.current&&y.current.resetState(),_(),w=t)},[t]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["add : ",t,jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsx(Toast,{ref:S})}),jsxRuntimeExports.jsx(FetchStateInfo,{ref:y,name:"Course Info",onFetch:C=>k(t),onRetry:C=>k(t)}),o?jsxRuntimeExports.jsx("div",{className:"w-full my-2 p-4 rounded-md border bg-gray-200",children:jsxRuntimeExports.jsx(JsonView,{src:o})}):"",i?jsxRuntimeExports.jsx("div",{className:"w-full my-2 p-4 rounded-md border bg-gray-200",children:jsxRuntimeExports.jsx(JsonView,{src:i})}):"",u?jsxRuntimeExports.jsx("div",{className:"w-full my-2 p-4 rounded-md border bg-gray-200",children:jsxRuntimeExports.jsx(JsonView,{src:u})}):"",m?jsxRuntimeExports.jsx("div",{className:"w-full my-2 p-4 rounded-md border bg-gray-200",children:jsxRuntimeExports.jsx(JsonView,{src:m})}):"",u&&m?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FetchStateInfo,{ref:d,name:"Course Config",onFetch:C=>T(),onRetry:C=>T()}),p?jsxRuntimeExports.jsx("div",{className:"w-full my-2 p-4 rounded-md border bg-gray-200",children:jsxRuntimeExports.jsx(JsonView,{src:p})}):"",g?jsxRuntimeExports.jsx("div",{className:"w-full my-2 p-4 rounded-md border bg-gray-200",children:jsxRuntimeExports.jsx(JsonView,{src:g})}):""]}):""]})},CoursePage=({store:t,config:e})=>{const{ctl:s,slug:n}=useLoaderData(),[r,a]=reactExports.useState(""),o=async(l,i)=>{a({add:jsxRuntimeExports.jsx(AddCoursePage,{config:e,slug:i,store:t,onOk:u=>u})}[l])};return reactExports.useEffect(()=>{s&&n&&o(s,n)},[s,n]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:r})},QueueInfo=({clearStatusBar:t,logStatusBar:e,selectedFmt:s,store:n,queueFinished:r,queueStarted:a=!1,currentIndex:o=-1,message:l="No message to display"})=>(reactExports.useEffect(()=>{e("default",l)},[l]),""),QueueItemToolbar=({clearStatusBar:t,logStatusBar:e,startQueueItem:s,loading:n,dlStatus:r,finished:a,interupted:o,vIndex:l,toc:i,resetQueueItem:c})=>{const[u,h]=r,m=parseInt(u)+parseInt(h),E=m==0?"download":m!=4?"refresh":"check";let p=m==0?!1:m==4;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"queue-item-toolbar",children:a?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{className:"dark:hover:text-red-600",onMouseOut:R=>t(),onMouseOver:R=>e("QueueItemToolbar.resetQueueItem",`Reset ${i.title}`),onClick:R=>c(l),caption:"",disabled:!1,loading:n,icon:"fa fa-trash"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:o?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{onMouseOut:R=>t(),onMouseOver:R=>e("QueueItemToolbar.startQueue",`Resume ${i.title}`),onClick:R=>s(l),caption:"",disabled:p,loading:n,icon:"fa fa-refresh"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{onMouseOut:R=>t(),onMouseOver:R=>e("QueueItemToolbar.startQueue",`Download ${i.title}`),onClick:R=>s(l),caption:"",disabled:p,loading:n,icon:`fa fa-${E}`})})})})})};class InputDisplay extends reactExports.Component{constructor(e){super(e);const{value:s}=e;this.state={value:s}}setValue(e){this.setState({value:e})}render(){const{value:e}=this.state;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"w-30 mx-2",children:e})})}}const DLStatus=({type:t,status:e})=>jsxRuntimeExports.jsx("div",{className:"",children:e==2?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("i",{className:"fa fa-check text-green-500"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e==1?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("i",{className:"fa fa-spin fa-spinner"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e==-1?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("i",{className:"fa fa-exclamation-circle text-red-500"})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:""})})})});class QueueItem extends reactExports.Component{constructor(e){super(e),this.captionStatusRefs={},this.videoStatusRefs={};const{sections:s,tocs:n,store:r,course:a}=e;this.mDMStatus=r.get("DMStatus"),this.state={loadings:{},dlcaptionStatus:{},dlvideoStatus:{},dmstatusList:{}},s.map((o,l)=>{n[o.slug].map((c,u)=>{const h=this.createRefKey(l,u);this.captionStatusRefs[h]=reactExports.createRef(null),this.videoStatusRefs[h]=reactExports.createRef(null),this.state.loadings[h]=!1,this.state.dlvideoStatus[h]=0,this.state.dlcaptionStatus[h]=0;const m=[l,u];let E=this.getDMStatus(l,u);E||(console.log("creating default dmstatus"),E=this.mDMStatus.createDefaultRow(a.id,m)),this.state.dmstatusList[h]=E})})}getStatusRef(e){const[s,n]=e,r=this.createRefKey(s,n),a=this.captionStatusRefs[r],o=this.videoStatusRefs[r];return{captionRef:a,videoRef:o}}createRefKey(e,s){return`ref_${e}${s}`}setDlStatusMeta(e,s,n=0){const[r,a]=e;console.log(`setDlStatusMeta([${r},${a},${s}])`);const o=this.createRefKey(r,a),{dmstatusList:l}=this.state,i=l[o];i.metaStatus=s,n&&(i.dlMetaRetryCount=n),this.setState({dmstatusList:l})}setLoading(e,s){const[n,r]=e,{loadings:a}=this.state,o=Object.assign({},a),l=this.createRefKey(n,r);o[l]=s,this.setState({loadings:o}),console.log(`QueueItem.setLoading([${n},${r},${s}])`)}setDlStatus(e,s,n,r=0){const[a,o]=s;console.log(`setDlStatus([${a},${o},'${e}',${n}])`);const l=this.createRefKey(a,o),i=e=="caption"?"captionStatus":"videoStatus",c=e=="caption"?"dlCaptionRetryCount":"dlVideoRetryCount",{dmstatusList:u}=this.state,h=u[l];h[i]=n,r&&(h[c]=r);let m=0;e=="caption"?m=parseInt(h.videoStatus)+parseInt(h[i]):m=parseInt(h.captionStatus)+parseInt(h[i]),m==4?(h.finished=!0,h.interupted=!1):h.interupted=!0,this.setState({dmstatusList:u})}getDMStatus(e,s){const{course:n}=this.props,r=`${e}${s}`;return this.mDMStatus.getByCourseId(n.id,r)}checkDmStatusFinished(){const{dmstatusList:e}=this.state;let s=!0;for(let n in e){const r=e[n];if(!r.finished){console.log(r),s=!1;break}}return s}async updateDmStatusRow(e,s){const n={metaStatus:0,videoStatus:0,captionStatus:0,dlCaptionRetryCount:0,dlVideoRetryCount:0,finished:!1,videoSz:0,captionSz:0,interupted:!1};return await this.mDMStatus.updateByCourseId(e,s,n)}async clearDMStatus(){const{captionStatusRefs:e,videoStatusRefs:s}=this,{sections:n,tocs:r,course:a}=this.props,{dmstatusList:o,loadings:l}=this.state;for(let i=0;i<n.length;i++){const c=n[i],u=r[c.slug];for(let h=0;h<u.length;h++){u[h];const m=this.createRefKey(i,h),E=[i,h];e[m].current.setValue("n.a"),s[m].current.setValue("n.a"),o[m]=await this.updateDmStatusRow(a.id,E),l[m]=!1}}this.setState({dmstatusList:o,loadings:l})}async clearDMStatusByIndex(e,s){const{captionStatusRefs:n,videoStatusRefs:r}=this,{sections:a,tocs:o,course:l}=this.props,{dmstatusList:i,loadings:c}=this.state,u=a[e];o[u.slug][s];const m=this.createRefKey(e,s),E=[e,s];n[m].current.setValue("n.a"),r[m].current.setValue("n.a"),i[m]=await this.updateDmStatusRow(l.id,E),c[m]=!1,this.setState({dmstatusList:i,loadings:c})}render(){const{dmsetup:e,sections:s,tocs:n,startQueueItem:r,logStatusBar:a,clearStatusBar:o,resetQueueItem:l}=this.props,{captionStatusRefs:i,videoStatusRefs:c}=this,{loadings:u,dlvideoStatus:h,dlcaptionStatus:m,dmstatusList:E}=this.state,{enableFilenameIndex:p}=e,R="px-1 py-1 whitespace-nowrap text-sm font-medium";let g="",f="",S="",y=0,d=R,w=R;return E?s.map((N,b)=>n[N.slug].map((T,k)=>{y+=1;const A=this.createRefKey(b,k),_=[b,k],C=E[A];let I="",Q="n.a",P="n.a",O=[C.captionStatus,C.videoStatus];return C.videoSz>0&&(Q=formatBytes(C.videoSz)),C.captionSz>0&&(P=formatBytes(C.captionSz)),C.finished?(g=R+d,f=g,S=g):C.interupted?(g=R+w,C.videoStatus==2?f=d:f=w,C.captionStatus==2?S=d:S=w):(g=R+" text-gray-800  dark:text-gray-200 ",S=g,f=g),jsxRuntimeExports.jsxs("tr",{className:I,children:[jsxRuntimeExports.jsxs("td",{className:g,children:[" ",y]}),jsxRuntimeExports.jsxs("td",{className:g,children:[" ",jsxRuntimeExports.jsx("div",{className:"cursor-pointer",onMouseOut:G=>o(),onMouseOver:G=>a("QueueItem.toc.title",T.title),children:p?`${formatLeadingZeros(y)}-${T.title}`:T.title})]}),jsxRuntimeExports.jsxs("td",{className:S,children:[" ",jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("i",{className:"mt-1 fa fa-file-text-o"})," ",jsxRuntimeExports.jsx(InputDisplay,{value:P,ref:i[A]})," ",jsxRuntimeExports.jsx(DLStatus,{status:C.captionStatus})]})]}),jsxRuntimeExports.jsxs("td",{className:f,children:[" ",jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("i",{className:"mt-1 fa fa-file-video-o"})," ",jsxRuntimeExports.jsx(InputDisplay,{value:Q,ref:c[A]})," ",jsxRuntimeExports.jsx(DLStatus,{status:C.videoStatus})]})]}),jsxRuntimeExports.jsxs("td",{className:g,children:[" ",jsxRuntimeExports.jsx(QueueItemToolbar,{toc:T,logStatusBar:a,clearStatusBar:o,vIndex:_,resetQueueItem:l,startQueueItem:r,loading:u[A],dlStatus:O,finished:C.finished,interupted:C.interupted})]})]},`${A}`)})):jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:5,children:jsxRuntimeExports.jsx("i",{className:"fa fa-spin fa-spinner"})})})}}const QueueTable=({refreshTable:t,dmsetup:e,clearStatusBar:s,logStatusBar:n,startQueueItem:r,store:a,course:o,sections:l,tocs:i,queueItemRef:c,resetQueueItem:u})=>{const h="px-1 py-1 text-left text-xs font-medium text-gray-500 uppercase",[m,E]=reactExports.useState(Object.assign([],l));return reactExports.useEffect(()=>{setTimeout(p=>E(Object.assign([],l)),512)},[e]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"queue-table border rounded-xl shadow-sm p-6 dark:bg-gray-800 dark:border-gray-700",children:jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:jsxRuntimeExports.jsx("div",{className:`overflow-x-auto sm:-mx-6 lg:-mx-8 ${niceScrollbarCls}`,children:jsxRuntimeExports.jsx("div",{className:"inline-block min-w-full py-2 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsx("div",{className:"overflow-hidden",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[jsxRuntimeExports.jsxs("thead",{children:[jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:h,rowSpan:2,children:"No"}),jsxRuntimeExports.jsx("th",{className:h,rowSpan:2,children:"Title"}),jsxRuntimeExports.jsx("th",{className:h,colSpan:"2",children:"Status"}),jsxRuntimeExports.jsx("th",{className:h,rowSpan:2,children:"Action"})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:h,children:"Subtitle/Transcript"}),jsxRuntimeExports.jsx("th",{className:h,children:"Media"})]})]}),jsxRuntimeExports.jsx("tbody",{children:jsxRuntimeExports.jsx(QueueItem,{dmsetup:e,clearStatusBar:s,logStatusBar:n,resetQueueItem:u,startQueueItem:r,store:a,ref:c,course:o,sections:m,tocs:i})})]})})})})})})})},objectToString=Object.prototype.toString,isError=t=>objectToString.call(t)==="[object Error]",errorMessages=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed"]);function isNetworkError(t){return t&&isError(t)&&t.name==="TypeError"&&typeof t.message=="string"?t.message==="Load failed"?t.stack===void 0:errorMessages.has(t.message):!1}class ProgressBar extends reactExports.Component{constructor(e){super(e),this.state={progress:0,message:"Initializing..."}}setProgress(e,s=null){let{message:n}=this.state;s&&(n=s),this.setState({progress:e,message:n})}setMessage(e){this.setState({message:e})}render(){const e="cls-0 mb-2 flex justify-between items-center",s="cls-1 text-sm font-semibold text-gray-800 dark:text-white",n="cls-2 text-sm text-gray-800 dark:text-white",r="cls-3 flex w-full h-2 bg-gray-200 rounded-full overflow-hidden dark:bg-gray-700",a="cls-4 flex flex-col justify-center rounded-full overflow-hidden bg-blue-600 text-xs text-white text-center whitespace-nowrap transition duration-500 dark:bg-blue-500",{progress:o,message:l}=this.state,i={stl0:{width:`${o}%`}},{className:c}=this.props;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:c,children:[jsxRuntimeExports.jsxs("div",{className:e,children:[jsxRuntimeExports.jsxs("h3",{className:s,children:[" ",l," "]}),jsxRuntimeExports.jsxs("span",{className:n,children:[" ",o,"% "]})]}),jsxRuntimeExports.jsx("div",{role:"progressbar","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100",className:r,children:jsxRuntimeExports.jsx("div",{className:a,style:i.stl0,children:" "})})]})})}}const ERROR_NOT_SETUP_QUEUE="You must run setup queue first",FETCH_FAILED_MAX_COUNT=3;async function fetchDownloadReal(t,e,s,n,r,a){return new Promise((o,l)=>{fetch(t).then(i=>{if(console.log(i),i.status!=200){l({status:i.status,blob:null});return}const c=i.headers.get("content-encoding");let u=i.headers.get(c?"x-file-size":"content-length");i.headers.get("content-type"),u===null&&(u=0);const h=parseInt(u,10);let m=0;return new Response(new ReadableStream({start(E){let p=new Date;const R=i.body.getReader();g();function g(){R.read().then(({done:f,value:S})=>{if(f){E.close();return}m+=S.byteLength;const y=S.byteLength;n(m,h,r,p,y,a),p=new Date,E.enqueue(S),g()}).catch(f=>{console.error(f),E.error(f)})}}}))}).then(async i=>{let c={status:500,blob:null};try{c={status:i.status,blob:await i.blob()}}catch{}return c}).then(i=>{i.status?o(i):l(i)}).catch(i=>{l({status:500,blob:null}),console.error(i)})})}async function fetchDownload(t,e,s,n,r,a){try{return await fetchDownloadReal(t,e,s,n,r,a)}catch(o){return isNetworkError(o)&&alert("Network error. Please check your internet connection."),o}return{status:500,blob:null}}class QueueMan extends reactExports.Component{constructor(e){super(e),this.state={infoMessage:"",dlRunning:!1,dlMeta:null,currentIndex:null,queueRunning:!1,queueFinished:!1,totalIndex:0,progressIndex:0};const{store:s}=e;this.mDMStatus=s.get("DMStatus"),this.mDMSetup=s.get("DMSetup"),this.queueItemRef=reactExports.createRef(null),this.progressBarRef=reactExports.createRef(null)}async fetchDlItem(e,s,n,r="",a="",o="",l=""){let i=o,c;if(s=="caption"?c=r:(c=a,i=l),c){let u=`Downloading ${i}`;this.setState({infoMessage:u});let h=1;const{course:m}=this.props,E=m.id;n.setDlStatus(s,e,h),await this.mDMStatus.setDlStatus(E,s,e,h),await timeout(5);const p=await fetchDownload(c,i,null,(f,S,y,d,w,N)=>{this.onDlProgress(f,S,y,d,w,N)},e,s),R=p.blob,g=p.status;p.status==200?h=2:h=-1,n.setDlStatus(s,e,h),await this.mDMStatus.setDlStatus(E,s,e,h),this.setState({infoMessage:`Download ${i} ${h==-1?"Failed":"Success"}`}),g==200&&await this.downloadFileFromBlob(R,i)}else alert(`${s} url is empty`)}async downloadFileFromBlob(e,s){try{const n=document.createElement("a"),r=window.URL.createObjectURL(e);n.download=s,n.href=r,n.click()}catch(n){console.error(n),alert(`HTTP ERROR: ${n.toString()}`)}}async fetchDlQueueItem(e,s,n,r="single"){console.log(`fetchDlQueueItem runing in ${r} mode`,s,n),this.props;const a=this.props.queueStarted,[o,l]=this.getCourseTocSlug(e),{selectedFmt:i}=this.props,c=this.queueItemRef.current,{captionStatus:u,videoStatus:h,finished:m,interupted:E}=this.getDmStatus(e);if(r){let p=!1;if(r=="single"?a||(p=!0):a&&(p=!0),!p){let R=r=="single"?"Cant download this item in single mode because Queue is running":"Cant download this item in queue mode because Queue is not running";return alert(R),null}if(p){const R=`${l}-${i}`,g=`${R}.mp4`,f=`${R}.vtt`;let S,y;m?this.setState({infoMessage:`${e} skipped`}):E?(u!=2?S=await this.fetchDlItem(e,"caption",c,s,n,f,g):confirm(`${f} already downloaded do you wanna redownload again ${f}?`)?S=await this.fetchDlItem(e,"caption",c,s,n,f,g):this.setState({infoMessage:`${f} Skipped`}),h!=2?y=await this.fetchDlItem(e,"video",c,s,n,f,g):confirm(`${g} already downloaded do you wanna redownload again ${g}?`)?y=await this.fetchDlItem(e,"video",c,s,n,f,g):this.setState({infoMessage:`${g}  skipped`})):(S=await this.fetchDlItem(e,"caption",c,s,n,f,g),y=await this.fetchDlItem(e,"video",c,s,n,f,g)),console.log(S,y)}}}getCourseTocSlug(e){const{course:s,tocs:n,sections:r}=this.props,[a,o]=e,l=r[a].slug,i=n[l][o];return[s.slug,i.slug]}async fetchDlMeta(e){console.log("Fetching dlMeta");const{store:s,course:n,sections:r,tocs:a}=this.props,o=new CourseApi(s);this.getCourseTocSlug(e);const l=this.mDMSetup.getByCourseId(n.id),{selectedFmt:i,selectedTrans:c}=l,[u,h]=e,E=r[u].slug,p=a[E][h],R=await o.getStreamLocs(p),g=await o.getTranscripts(p);await s.get("PrxCache").unset(p.url);let S=null,y=null,d=!1;if(l){const w=R.filter(N=>N.fmt==i);w.length>0?(S=w[0],d=!0):R.length>0&&(S=R[0],d=!0),typeof g[c]<"u"?(y=g[c],d=!0):typeof g.us<"u"&&(y=g.us,d=!0)}return[d,S,y]}async resetQueueItem(e){const[s,n]=e;console.log(`resetQueueItem  ${e}`);const{queueItemRef:r}=this,{course:a,tocs:o,sections:l}=this.props,i=r.current,c=a.id;let u=this.mDMStatus.getByCourseId(c,e);if(u){console.log(u);const h=l[s],m=o[h.slug][n];confirm(`Reset download state for toc : "${m.title}"?`)&&await i.clearDMStatusByIndex(s,n)}this.setState({totalIndex:0,progressIndex:0})}async startQueueItem(e,s="single"){console.log(`startQueueItem staterted ${e}`);const{queueItemRef:n}=this,{course:r,selectedFmt:a}=this.props,o=n.current,l=r.id;let i=this.mDMStatus.getByCourseId(l,e);i||(i=await this.mDMStatus.setDlStatusMeta(l,e,0));{let c=!1;if(i.dlMetaRetryCount<=FETCH_FAILED_MAX_COUNT){o.setLoading(e,!0);for(let u=i.dlMetaRetryCount;u<=FETCH_FAILED_MAX_COUNT;u++){u>0&&console.log(`retry fetchMeta ${u}`);const[h,m,E]=await this.fetchDlMeta(e);c=h;const p=h?2:-1;let R=!1;if(c){let g=null;try{g=E.url}catch(S){console.warn(S)}let f=null;try{f=m.url}catch(S){console.error(S)}await this.fetchDlQueueItem(e,g,f,s),R=!0}else{if(console.log(errorMsg),errorMsg=="ERR_NO_LOGIN"){alert("You must login to linkedin learning website");break}R=!0}if(o.setDlStatusMeta(e,p,u),await this.mDMStatus.setDlStatusMeta(l,e,p,u),R)break}o.setLoading(e,!1)}else console.log("fetchDlMeta reach max  FETCH_FAILED_MAX_COUNT")}}getDmStatus(e){const{course:s}=this.props,n=this.mDMStatus.getByCourseId(s.id,e);let r=0,a=0,o=!1,l=!1;return n&&(r=n.captionStatus,a=n.videoStatus,o=n.finished,l=n.interupted),{captionStatus:r,videoStatus:a,finished:o,interupted:l}}async fetchDl(){const e=this.state.currentIndex;await this.startQueueItem(e,"queue")}async fetchDl_deprecated(){const{queueItemRef:e}=this,{currentIndex:s}=this.state,{course:n}=this.props,r=e.current,a=this.mDMStatus.getByCourseId(n.id,s);let o;o=await this.fetchDlMeta(a),console.log(o);let l=0,i=0,c=!1,u=!1;a&&(l=a.captionStatus,i=a.videoStatus,c=a.finished,u=a.interupted),r&&(c?this.setState({infoMessage:`${s} skipped`}):(r.setLoading(s,!0),u?(l!=2?await this.fetchDlItem("caption",r):this.setState({infoMessage:`${s} caption skipped`}),i!=2?await this.fetchDlItem("video",r):this.setState({infoMessage:`${s} video skipped`})):(await this.fetchDlItem("caption",r),await this.fetchDlItem("video",r)),r.setLoading(s,!1)))}async onDlProgress(e,s,n,r,a,o){const{queueItemRef:l}=this,{course:i}=this.props;if(l.current){const c=l.current;if(n){formatBytes(calculateSpeed(a,r,new Date));const{captionRef:u,videoRef:h}=c.getStatusRef(n);o=="caption"?u.current.setValue(`${formatBytes(e)}`):o=="video"&&h.current.setValue(`${formatBytes(e)}`),await this.mDMStatus.setDlSize(i.id,o,n,e)}}}async onQueueComplete(){const e=this.queueItemRef.current,{stopDownloadQueue:s,setQueueFinished:n,setQueueResume:r}=this.props;if(e.checkDmStatusFinished())n(!0),this.setState({totalIndex:0,progressIndex:0});else{console.log("queue stil have unfinished item");const o=this.getProgressIndexFromDb();this.setState({currentIndex:[0,0],progressIndex:o}),r(!0)}s()}async triggerFetchDl(){let{queueRunning:e,totalIndex:s,progressIndex:n}=this.state,r="triggerFetchDl called";if(console.log(r),this.setProgress(null,r),!e){r="Queue stoped",console.log(r),this.setProgress(null,r),this.setState({dlRunning:!1});return}const a=this.getNextIndex();let[o,l]=a;if(o===null&&l===null){r=`${o}, ${l} Queue Complete`,console.log(r),this.setProgress(null,r),this.onQueueComplete();return}if(o==-1&&l==-1){r=`${o}, ${l} Queue Interupted`,console.log(r),this.setProgress(null,r),this.setState({dlRunning:!1}),stopDownloadQueue();return}o>=0&&l>=0&&(r=`Processing ${o}, ${l} ${n+1} of ${s}`,n++,console.log(r),this.setProgress(null,r),this.setState({progressIndex:n,dlRunning:!0,currentIndex:a},async()=>{await this.fetchDl(),e&&this.triggerFetchDl()}))}getProgressIndexFromDb(){const{course:e}=this.props,s=this.mDMStatus.getListByCourseId(e.id);let n=0;return s.map((r,a)=>{r.finished&&n++}),n}getQueueProgress(){let{totalIndex:e,progressIndex:s}=this.state;if(e==0){const{sections:r,tocs:a}=this.props;r.map((o,l)=>{const i=a[o.slug];e+=i.length}),this.setState({totalIndex:e})}return Math.ceil(s/e*100)}setProgress(e,s){e==null&&(e=this.getQueueProgress()),this.progressBarRef.current&&this.progressBarRef.current.setProgress(e,s)}triggerQueue(e){this.props;const{dlMeta:s}=this.state,n=`QueueMan triggered ${e}`;console.log(n),this.setProgress(null,n);const r=e;this.setState({queueRunning:r},()=>{e&&(s||this.triggerFetchDl())})}async triggerResetQueue(){const{resetDownloadQueue:e}=this.props;await this.queueItemRef.current.clearDMStatus(),this.setState({currentIndex:null},()=>{e(!1)})}getNextIndex(){const{currentIndex:e}=this.state,{sections:s,tocs:n}=this.props;let r=null;if(!e)return r=[0,0],r;if(e.length==2){let[a,o]=e;const l=s[a].slug,i=s.length-1,c=n[l].length-1;if(o<c)return o=o+1,[a,o];if(o>=c)return a<i?(a=a+1,o=0,[a,o]):[null,null]}return[-1,-1]}render(){const{infoMessage:e,currentIndex:s,progressIndex:n}=this.state,{refreshTable:r,clearStatusBar:a,logStatusBar:o,selectedFmt:l,queueStarted:i,sections:c,course:u,tocs:h,store:m,alreadySetup:E,queueFinished:p,dmsetup:R}=this.props;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"queueman mb-12 mt-2",children:jsxRuntimeExports.jsx("div",{className:"queue-man-container",children:E?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[n>0?jsxRuntimeExports.jsx("div",{className:"p4 mb-4",children:jsxRuntimeExports.jsx(ProgressBar,{className:"w-[400px]",ref:this.progressBarRef})}):null,jsxRuntimeExports.jsx(QueueInfo,{clearStatusBar:a,logStatusBar:o,selectedFmt:l,queueFinished:p,message:e,queueStarted:i,currentIndex:s}),jsxRuntimeExports.jsx(QueueTable,{refreshTable:r,dmsetup:R,clearStatusBar:a,logStatusBar:o,resetQueueItem:g=>this.resetQueueItem(g),startQueueItem:g=>this.startQueueItem(g),queueItemRef:this.queueItemRef,course:u,sections:c,tocs:h,store:m})]}):ERROR_NOT_SETUP_QUEUE})})})}}class DropdownMenu extends reactExports.Component{constructor(e){super(e),this.state={}}onSelectItem(e,s,n){const{onSelect:r}=this.props;r(s,n),e.preventDefault()}componentWillReceiveProps(){setTimeout(()=>{HSStaticMethods.autoInit()},1e3)}render(){const e=crc32(new Date().getTime().toString()).toString(16),{label:s,data:n,labelIcon:r,itemIcon:a,captionSuffix:o="",className:l}=this.props,i="cursor-pointer flex items-center gap-x-3.5 py-2 px-3 rounded-lg text-sm text-gray-800 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-300 dark:focus:bg-gray-700";return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:l+" hs-dropdown relative inline-flex  ",children:[jsxRuntimeExports.jsxs("button",{id:`hs-dropdown-${e}`,type:"button",className:"hs-dropdown-toggle py-3 px-4 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600",children:[jsxRuntimeExports.jsx("i",{className:r}),s,jsxRuntimeExports.jsx("svg",{className:"hs-dropdown-open:rotate-180 w-4 h-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:jsxRuntimeExports.jsx("path",{d:"m6 9 6 6 6-6"})})]}),jsxRuntimeExports.jsx("div",{className:"hs-dropdown-menu transition-[opacity,margin] duration hs-dropdown-open:opacity-100 opacity-0 hidden min-w-[15rem] bg-white shadow-md rounded-lg p-2 mt-2 dark:bg-gray-800 dark:border dark:border-gray-700 dark:divide-gray-700 after:h-4 after:absolute after:-bottom-4 after:start-0 after:w-full before:h-4 before:absolute before:-top-4 before:start-0 before:w-full","aria-labelledby":`hs-dropdown-${e}`,children:n.map((c,u)=>{let h=c,m=a,E=`${c}${o}`;return typeof c=="object"&&c!==null&&(h=c.value,E=`${c.text}${o}`,typeof c.icon=="string"&&(m=c.icon)),jsxRuntimeExports.jsxs("a",{className:i,onClick:p=>this.onSelectItem(p,h,E),children:[jsxRuntimeExports.jsx("i",{className:m}),E]},u)})})]})})}}const ToolbarMan=({selectedFmt:t,course:e,sections:s,tocs:n,clearStatusBar:r,logStatusBar:a,queueResume:o,queueFinished:l,dmsetup:i,queueManRef:c,alreadySetup:u,setAlreadySetup:h,reconfigureSetup:m,setRunSetup:E,runSetup:p,setReconfigureSetup:R,queueStarted:g=!1,startDownloadQueue:f,stopDownloadQueue:S})=>{console.log(`queueResume:${o}`);const y=async C=>{f(),console.log("startQueue"),console.log(c),c.current.triggerQueue(!0)},d=async()=>{S(),console.log("stopQueue"),c.current.triggerQueue(!1)},w=async()=>{R(!0),console.log("reconfigure")},N=async()=>{console.log("onResetQueue"),confirm("Are you sure want to reset Queue ?")&&c.current.triggerResetQueue()},b=async()=>{const{sourceRepo:C}=i;window.open(C,"_blank")},T=async C=>{window.open(C,"_blank")},k=async()=>{const Q={slug:e.slug,fmt:t,sections:s,tocs:n};createDownloadFile("playlist",Q)},A=async()=>{const{exerciseFiles:C}=i,P={slug:e.slug,fmt:t,sections:s,tocs:n,exerciseFiles:C};createDownloadFile("shell_script",P)},_=async()=>{const{exerciseFiles:C}=i,P={slug:e.slug,fmt:t,sections:s,tocs:n,exerciseFiles:C};createDownloadFile("batch_script",P)};return reactExports.useEffect(()=>{console.log(i)},[i]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"toolbar-man pr-2 pt-4 pb-1",children:jsxRuntimeExports.jsx("div",{className:"toolbar-man-container",children:jsxRuntimeExports.jsx("div",{className:"flex gap-2 flex-wrap",children:u?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[m?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:l?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{onMouseOut:C=>r(),onMouseOver:C=>a("ToolbarMan","Reset Current Queue"),className:"",caption:"Reset Queue",icon:"fa fa-refresh",onClick:C=>N()})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{onMouseOut:C=>r(),onMouseOver:C=>a("ToolbarMan",`${o?"Resume Queue":"Start Queue"}`),loading:g,className:"",disabled:g,caption:o?"Resume":"Start Queue",icon:"fa fa-play",onClick:C=>y()}),g?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{onMouseOut:C=>r(),onMouseOver:C=>a("ToolbarMan","Stop Current Queue"),disabled:!g,caption:"Stop Queue",icon:"fa fa-square",onClick:C=>d()})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{onMouseOut:C=>r(),onMouseOver:C=>a("ToolbarMan","Reconfigure Queue Setup"),caption:"Reconfigure",icon:"fa fa-cog",onClick:C=>w()})})]})}),i&&!m?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[i.exerciseFiles&&i.exerciseFiles.length>0?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(DropdownMenu,{className:"",data:i.exerciseFiles.map(C=>({value:C.url,text:C.name})),onSelect:C=>T(C),label:"Exercise Files",itemIcon:"fa fa-file-archive-o",labelIcon:"fa fa-folder-o"})}):"",i.sourceRepo?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{onClick:C=>b(),className:"",label:"Source Repo:",title:i.sourceRepo,caption:"Source Repo",icon:"fa fa-file-archive-o"})}):"",jsxRuntimeExports.jsx(Button,{onClick:C=>k(),className:"",caption:"Playlist.m3u",icon:"bi bi-collection-play"}),jsxRuntimeExports.jsx(Button,{onClick:C=>A(),className:"",caption:"Helper.sh",icon:"bi bi-terminal-fill"}),jsxRuntimeExports.jsx(Button,{onClick:C=>_(),className:"",caption:"Helper.cmd",icon:"bi bi-terminal"})]}):""]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:p?"":jsxRuntimeExports.jsx(Button,{onMouseOut:C=>r(),onMouseOver:C=>a("ToolbarMan","Run Setup Queue"),onClick:C=>E(!0),icon:"fa fa-cog",caption:"Run Setup Queue"})})})})})})};class StatusbarMan extends reactExports.Component{constructor(){super(...arguments);H(this,"state",{message:"",mode:0,t:"default",customMessage:""})}setMessage(s,n){this.setState({message:s,mode:n})}log(s,n){this.setState({t:s}),s=="QueueItem.toc.title"&&this.setState({customMessage:n}),s=="default"&&this.setState({message:n}),s=="QueueItemToolbar.startQueue"||s=="ToolbarMan",this.setState({customMessage:n})}clear(){this.setState({t:"default",message:"Enjoy"})}render(){this.props;const{message:s,mode:n,t:r,customMessage:a}=this.state;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"statusbar-man fixed bottom-0 w-full -mx-8 bg-white dark:bg-gray-800 dark:text-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"status-bar-man-container rounded  p-2.5",children:[r=="default"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:n===0?jsxRuntimeExports.jsxs("div",{className:"success text-green-600",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-check"})," ",jsxRuntimeExports.jsx("span",{children:s})]}):n===1?jsxRuntimeExports.jsxs("div",{className:"warning text-orange-600",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-exclamation-triangle"})," ",jsxRuntimeExports.jsx("span",{children:s})]}):n==2?jsxRuntimeExports.jsxs("div",{className:"error text-red-600",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-times-circle"})," ",jsxRuntimeExports.jsx("span",{children:s})]}):jsxRuntimeExports.jsxs("div",{className:"custom-mode text-custom-mode",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-times-circle"})," ",jsxRuntimeExports.jsx("span",{children:s})]})}):"",r=="QueueItem.toc.title"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"success text-green-600",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-bookmark"})," ",jsxRuntimeExports.jsx("span",{children:a})]})}):"",r=="QueueItemToolbar.startQueue"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"success text-green-600",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-download"})," ",jsxRuntimeExports.jsx("span",{children:a})]})}):"",r=="QueueItemToolbar.resetQueueItem"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"success text-red-600",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-trash"})," ",jsxRuntimeExports.jsx("span",{children:a})]})}):"",r=="ToolbarMan"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"success text-green-600",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-arrow-right"})," ",jsxRuntimeExports.jsx("span",{children:a})]})}):"",r=="QueueSetup"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"success text-green-600",children:[jsxRuntimeExports.jsx("i",{className:"fa fa-cog"})," ",jsxRuntimeExports.jsx("span",{children:a})]})}):""]})})})}}const CourseAuthors=({authors:t})=>t?jsxRuntimeExports.jsxs("div",{className:"flex text-lg",children:[jsxRuntimeExports.jsx("span",{className:"italic mr-1 ",children:"By"}),t.map((e,s)=>jsxRuntimeExports.jsxs("h4",{children:[" ",jsxRuntimeExports.jsxs("a",{className:"",href:authorUrlFromSlug(e.slug),target:"_blank",children:[e.name," ",jsxRuntimeExports.jsx("i",{className:"fa fa-external-link"})]})," ",s<t.length-1?", ":""]},s))]}):"",require$$0=[{code:"AD",name:"Andorra"},{code:"AE",name:"United Arab Emirates"},{code:"AF",name:"Afghanistan"},{code:"AG",name:"Antigua and Barbuda"},{code:"AI",name:"Anguilla"},{code:"AL",name:"Albania"},{code:"AM",name:"Armenia"},{code:"AO",name:"Angola"},{code:"AQ",name:"Antarctica"},{code:"AR",name:"Argentina"},{code:"AS",name:"American Samoa"},{code:"AT",name:"Austria"},{code:"AU",name:"Australia"},{code:"AW",name:"Aruba"},{code:"AX",name:"Åland Islands"},{code:"AZ",name:"Azerbaijan"},{code:"BA",name:"Bosnia and Herzegovina"},{code:"BB",name:"Barbados"},{code:"BD",name:"Bangladesh"},{code:"BE",name:"Belgium"},{code:"BF",name:"Burkina Faso"},{code:"BG",name:"Bulgaria"},{code:"BH",name:"Bahrain"},{code:"BI",name:"Burundi"},{code:"BJ",name:"Benin"},{code:"BL",name:"Saint Barthélemy"},{code:"BM",name:"Bermuda"},{code:"BN",name:"Brunei Darussalam"},{code:"BO",name:"Bolivia, Plurinational State of"},{code:"BQ",name:"Bonaire, Sint Eustatius and Saba"},{code:"BR",name:"Brazil"},{code:"BS",name:"Bahamas"},{code:"BT",name:"Bhutan"},{code:"BV",name:"Bouvet Island"},{code:"BW",name:"Botswana"},{code:"BY",name:"Belarus"},{code:"BZ",name:"Belize"},{code:"CA",name:"Canada"},{code:"CC",name:"Cocos (Keeling) Islands"},{code:"CD",name:"Congo, Democratic Republic of the"},{code:"CF",name:"Central African Republic"},{code:"CG",name:"Congo"},{code:"CH",name:"Switzerland"},{code:"CI",name:"Côte d'Ivoire"},{code:"CK",name:"Cook Islands"},{code:"CL",name:"Chile"},{code:"CM",name:"Cameroon"},{code:"CN",name:"China"},{code:"CO",name:"Colombia"},{code:"CR",name:"Costa Rica"},{code:"CU",name:"Cuba"},{code:"CV",name:"Cabo Verde"},{code:"CW",name:"Curaçao"},{code:"CX",name:"Christmas Island"},{code:"CY",name:"Cyprus"},{code:"CZ",name:"Czechia"},{code:"DE",name:"Germany"},{code:"DJ",name:"Djibouti"},{code:"DK",name:"Denmark"},{code:"DM",name:"Dominica"},{code:"DO",name:"Dominican Republic"},{code:"DZ",name:"Algeria"},{code:"EC",name:"Ecuador"},{code:"EE",name:"Estonia"},{code:"EG",name:"Egypt"},{code:"EH",name:"Western Sahara"},{code:"ER",name:"Eritrea"},{code:"ES",name:"Spain"},{code:"ET",name:"Ethiopia"},{code:"FI",name:"Finland"},{code:"FJ",name:"Fiji"},{code:"FK",name:"Falkland Islands (Malvinas)"},{code:"FM",name:"Micronesia, Federated States of"},{code:"FO",name:"Faroe Islands"},{code:"FR",name:"France"},{code:"GA",name:"Gabon"},{code:"GB",name:"United Kingdom of Great Britain and Northern Ireland"},{code:"GD",name:"Grenada"},{code:"GE",name:"Georgia"},{code:"GF",name:"French Guiana"},{code:"GG",name:"Guernsey"},{code:"GH",name:"Ghana"},{code:"GI",name:"Gibraltar"},{code:"GL",name:"Greenland"},{code:"GM",name:"Gambia"},{code:"GN",name:"Guinea"},{code:"GP",name:"Guadeloupe"},{code:"GQ",name:"Equatorial Guinea"},{code:"GR",name:"Greece"},{code:"GS",name:"South Georgia and the South Sandwich Islands"},{code:"GT",name:"Guatemala"},{code:"GU",name:"Guam"},{code:"GW",name:"Guinea-Bissau"},{code:"GY",name:"Guyana"},{code:"HK",name:"Hong Kong"},{code:"HM",name:"Heard Island and McDonald Islands"},{code:"HN",name:"Honduras"},{code:"HR",name:"Croatia"},{code:"HT",name:"Haiti"},{code:"HU",name:"Hungary"},{code:"ID",name:"Indonesia"},{code:"IE",name:"Ireland"},{code:"IL",name:"Israel"},{code:"IM",name:"Isle of Man"},{code:"IN",name:"India"},{code:"IO",name:"British Indian Ocean Territory"},{code:"IQ",name:"Iraq"},{code:"IR",name:"Iran, Islamic Republic of"},{code:"IS",name:"Iceland"},{code:"IT",name:"Italy"},{code:"JE",name:"Jersey"},{code:"JM",name:"Jamaica"},{code:"JO",name:"Jordan"},{code:"JP",name:"Japan"},{code:"KE",name:"Kenya"},{code:"KG",name:"Kyrgyzstan"},{code:"KH",name:"Cambodia"},{code:"KI",name:"Kiribati"},{code:"KM",name:"Comoros"},{code:"KN",name:"Saint Kitts and Nevis"},{code:"KP",name:"Korea, Democratic People's Republic of"},{code:"KR",name:"Korea, Republic of"},{code:"KW",name:"Kuwait"},{code:"KY",name:"Cayman Islands"},{code:"KZ",name:"Kazakhstan"},{code:"LA",name:"Lao People's Democratic Republic"},{code:"LB",name:"Lebanon"},{code:"LC",name:"Saint Lucia"},{code:"LI",name:"Liechtenstein"},{code:"LK",name:"Sri Lanka"},{code:"LR",name:"Liberia"},{code:"LS",name:"Lesotho"},{code:"LT",name:"Lithuania"},{code:"LU",name:"Luxembourg"},{code:"LV",name:"Latvia"},{code:"LY",name:"Libya"},{code:"MA",name:"Morocco"},{code:"MC",name:"Monaco"},{code:"MD",name:"Moldova, Republic of"},{code:"ME",name:"Montenegro"},{code:"MF",name:"Saint Martin, (French part)"},{code:"MG",name:"Madagascar"},{code:"MH",name:"Marshall Islands"},{code:"MK",name:"North Macedonia"},{code:"ML",name:"Mali"},{code:"MM",name:"Myanmar"},{code:"MN",name:"Mongolia"},{code:"MO",name:"Macao"},{code:"MP",name:"Northern Mariana Islands"},{code:"MQ",name:"Martinique"},{code:"MR",name:"Mauritania"},{code:"MS",name:"Montserrat"},{code:"MT",name:"Malta"},{code:"MU",name:"Mauritius"},{code:"MV",name:"Maldives"},{code:"MW",name:"Malawi"},{code:"MX",name:"Mexico"},{code:"MY",name:"Malaysia"},{code:"MZ",name:"Mozambique"},{code:"NA",name:"Namibia"},{code:"NC",name:"New Caledonia"},{code:"NE",name:"Niger"},{code:"NF",name:"Norfolk Island"},{code:"NG",name:"Nigeria"},{code:"NI",name:"Nicaragua"},{code:"NL",name:"Netherlands"},{code:"NO",name:"Norway"},{code:"NP",name:"Nepal"},{code:"NR",name:"Nauru"},{code:"NU",name:"Niue"},{code:"NZ",name:"New Zealand"},{code:"OM",name:"Oman"},{code:"PA",name:"Panama"},{code:"PE",name:"Peru"},{code:"PF",name:"French Polynesia"},{code:"PG",name:"Papua New Guinea"},{code:"PH",name:"Philippines"},{code:"PK",name:"Pakistan"},{code:"PL",name:"Poland"},{code:"PM",name:"Saint Pierre and Miquelon"},{code:"PN",name:"Pitcairn"},{code:"PR",name:"Puerto Rico"},{code:"PS",name:"Palestine, State of"},{code:"PT",name:"Portugal"},{code:"PW",name:"Palau"},{code:"PY",name:"Paraguay"},{code:"QA",name:"Qatar"},{code:"RE",name:"Réunion"},{code:"RO",name:"Romania"},{code:"RS",name:"Serbia"},{code:"RU",name:"Russian Federation"},{code:"RW",name:"Rwanda"},{code:"SA",name:"Saudi Arabia"},{code:"SB",name:"Solomon Islands"},{code:"SC",name:"Seychelles"},{code:"SD",name:"Sudan"},{code:"SE",name:"Sweden"},{code:"SG",name:"Singapore"},{code:"SH",name:"Saint Helena, Ascension and Tristan da Cunha"},{code:"SI",name:"Slovenia"},{code:"SJ",name:"Svalbard and Jan Mayen"},{code:"SK",name:"Slovakia"},{code:"SL",name:"Sierra Leone"},{code:"SM",name:"San Marino"},{code:"SN",name:"Senegal"},{code:"SO",name:"Somalia"},{code:"SR",name:"Suriname"},{code:"SS",name:"South Sudan"},{code:"ST",name:"Sao Tome and Principe"},{code:"SV",name:"El Salvador"},{code:"SX",name:"Sint Maarten, (Dutch part)"},{code:"SY",name:"Syrian Arab Republic"},{code:"SZ",name:"Eswatini"},{code:"TC",name:"Turks and Caicos Islands"},{code:"TD",name:"Chad"},{code:"TF",name:"French Southern Territories"},{code:"TG",name:"Togo"},{code:"TH",name:"Thailand"},{code:"TJ",name:"Tajikistan"},{code:"TK",name:"Tokelau"},{code:"TL",name:"Timor-Leste"},{code:"TM",name:"Turkmenistan"},{code:"TN",name:"Tunisia"},{code:"TO",name:"Tonga"},{code:"TR",name:"Türkiye"},{code:"TT",name:"Trinidad and Tobago"},{code:"TV",name:"Tuvalu"},{code:"TW",name:"Taiwan, Province of China"},{code:"TZ",name:"Tanzania, United Republic of"},{code:"UA",name:"Ukraine"},{code:"UG",name:"Uganda"},{code:"UM",name:"United States Minor Outlying Islands"},{code:"US",name:"United States of America"},{code:"UY",name:"Uruguay"},{code:"UZ",name:"Uzbekistan"},{code:"VA",name:"Holy See"},{code:"VC",name:"Saint Vincent and the Grenadines"},{code:"VE",name:"Venezuela, Bolivarian Republic of"},{code:"VG",name:"Virgin Islands, British"},{code:"VI",name:"Virgin Islands, U.S."},{code:"VN",name:"Viet Nam"},{code:"VU",name:"Vanuatu"},{code:"WF",name:"Wallis and Futuna"},{code:"WS",name:"Samoa"},{code:"YE",name:"Yemen"},{code:"YT",name:"Mayotte"},{code:"ZA",name:"South Africa"},{code:"ZM",name:"Zambia"},{code:"ZW",name:"Zimbabwe"}];var data=require$$0,nameMap={},codeMap={};data.forEach(mapCodeAndName);function mapCodeAndName(t){nameMap[t.name.toLowerCase()]=t.code,codeMap[t.code.toLowerCase()]=t.name}var getName=function t(e){return codeMap[e.toLowerCase()]};const CourseInfo=({store:t,course:e,authors:s,selectedFmt:n,selectedTrans:r})=>{const a=(c,u=null)=>{if(typeof c=="string"&&c.match(/^select/i))return"";if(!u)return c;if(c.match(/^\d/i))return c+"p"},o=a(r).toUpperCase(),l=getName(o),i=`https://purecatamphetamine.github.io/country-flag-icons/3x2/${o}.svg`;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"course-info",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("h4",{className:"text-2xl",children:[jsxRuntimeExports.jsx("i",{className:"bi bi-bookmark"})," ",e.title]})}),jsxRuntimeExports.jsx("div",{className:"p-2",children:jsxRuntimeExports.jsx("a",{className:"",href:courseUrlFromSlug(e.slug),target:"_blank",children:jsxRuntimeExports.jsx("i",{className:"fa fa-external-link"})})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(CourseAuthors,{authors:s})}),jsxRuntimeExports.jsx("div",{className:"pl-2",children:a(n,"fmt")}),jsxRuntimeExports.jsx("div",{className:"pl-2",children:o?jsxRuntimeExports.jsx("img",{title:l,className:"w-[24px]",src:i,alt:l}):""})]})]})})};class CheckBox extends reactExports.Component{constructor(){super(...arguments);H(this,"ckRef",reactExports.createRef(null))}onCheckChange(s){const{onChange:n}=this.props;setTimeout(r=>{console.log(this.ckRef.current.checked),n(this.ckRef.current.checked)},256)}componentDidMount(){this.ckRef.current&&(this.ckRef.current.checked=this.props.checked)}render(){const{id:s,checked:n,label:r}=this.props;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("input",{ref:this.ckRef,onClick:a=>this.onCheckChange(a),type:"checkbox",className:"shrink-0 mt-0.5 border-gray-200 rounded text-blue-600 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-gray-800 dark:border-gray-700 dark:checked:bg-blue-500 dark:checked:border-blue-500 dark:focus:ring-offset-gray-800",id:s}),jsxRuntimeExports.jsx("label",{htmlFor:"hs-default-checkbox",className:"text-sm text-gray-500 ms-3 dark:text-gray-400",children:r})]})})}}const QueueSetup=({toast:t,setRefreshTable:e,logStatusBar:s,clearStatusBar:n,availableFmt:r,setAvailableFmt:a,availableTrans:o,setAvailableTrans:l,selectedFmt:i,setSelectedFmt:c,selectedTrans:u,setSelectedTrans:h,selectFmt:m,selectTrans:E,dmsetup:p,setDmsetup:R,store:g,course:f,sections:S,tocs:y,alreadySetup:d,setAlreadySetup:w,displaySetupUi:N,reconfigureSetup:b=!1,setReconfigureSetup:T,runSetup:k,setRunSetup:A})=>{const[_,C]=reactExports.useState(!1),[I,Q]=reactExports.useState(!1),P=g.get("DMSetup"),O=async K=>{if(p){const{availableFmt:W,availableTrans:q,enableFilenameIndex:te}=p;a(W),l(q),Q(te);return}C(!0),a([]),l([]);const Y=new CourseApi(g),de=await Y.getCourseInfo(f.slug),he=await Y.getCourseTocs(f.slug);let je=!1,xe,B;if(he){const W=Object.keys(he);if(W.length>0){const q=W.shift(),te=he[q];te.length>0&&(xe=te.shift(),B=xe.slug,xe&&(je=!0))}else{const q="tocKeys is empty";t.add(q,"error"),console.error()}}if(je){console.log(B);const W=await Y.getStreamLocs(xe);let q=W.filter(fe=>fe!==null).map(fe=>fe.fmt);console.log(W),console.log(q);const te=await Y.getTranscripts(xe);await g.get("PrxCache").unset(xe.url);const Ne=Object.keys(te).map(fe=>{const Se=te[fe].lang.toUpperCase(),pe=getName(Se),ve=te[fe].autoGenerated?" - Auto Translated":"",Me=`(${Se}) ${pe} ${ve}`;return{value:fe,text:Me}});console.log(te),console.log(Ne);const ke=de.exerciseFiles;console.log(ke);const Fe=de.sourceCodeRepository,Pe=1,$e=!1;a(q),l(Ne);const ye=await P.create(de.id,q,i,Ne,u,Fe,ke,Pe,$e,I);R(ye)}else{const W="Operation Canceled : Could not get first TOC in first Course Section";t.add(W,"error")}C(!1)};reactExports.useEffect(()=>{if(p){const K=p.availableFmt,Y=p.selectedFmt,de=p.availableTrans,he=p.selectedTrans,je=p.enableFilenameIndex;Y&&c(Y),he&&h(he),je!==null&&Q(je),a(K),l(de)}else c("Select Media Format"),h("Select Transcript Language")},[p]);const G=async()=>{if(confirm("Are you sure want to finish setup")){const K={status:2,selectedFmt:i,selectedTrans:u,enableFilenameIndex:I},Y=await P.updateByCourseId(f.id,K);R(Y),b&&T(!1),w(!0),e(new Date().getTime())}},oe=async()=>{b?T(!1):A(!1)};r&&r.length;let ne=!1,re=!1,le=!1,ae=!1;return r&&(ae=r.length>0),ae||(b||k)&&(re=!0),d?b&&(ne=!0):k&&(ne=!0),re||(le=!0),reactExports.useEffect(()=>{},[ne,r,o]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ne?jsxRuntimeExports.jsxs("div",{className:"queue-setup w-[600px] border rounded-xl shadow-sm p-6 dark:bg-gray-800 dark:border-gray-700",children:[re?jsxRuntimeExports.jsx("div",{className:"flex p-2 px-2",children:jsxRuntimeExports.jsx(Button,{onMouseOut:K=>n(),onMouseOver:K=>s("QueueSetup","Click to retrieve available video format or size"),loading:_,icon:"fa fa-cog",onClick:K=>O(),caption:"Get Available Media Format & Transcripts"})}):"",le?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex  items-center p-2 px-2",children:[jsxRuntimeExports.jsx("div",{className:"w-[150px]",children:jsxRuntimeExports.jsx("label",{className:"font-bold",children:"Select Format"})}),jsxRuntimeExports.jsx("div",{className:"flex-grow",children:jsxRuntimeExports.jsx(AdvancedSelect,{onMouseOut:K=>n(),onMouseOver:K=>s("QueueSetup","Select video size or format"),data:r,label:"Select Media Format",selected:i,onSelect:K=>c(K),captionSuffix:"p"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center p-2 px-2",children:[jsxRuntimeExports.jsx("div",{className:"w-[150px]",children:jsxRuntimeExports.jsx("label",{className:"font-bold",children:"Select Transcript Lang"})}),jsxRuntimeExports.jsx("div",{className:"flex-grow",children:jsxRuntimeExports.jsx(AdvancedSelect,{onMouseOut:K=>n(),label:"Select Transcript Language",onMouseOver:K=>s("QueueSetup","Select transcript lang"),data:o,selected:u,onSelect:K=>h(K)})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center p-2 px-2",children:[jsxRuntimeExports.jsx("div",{className:"w-[150px]",children:jsxRuntimeExports.jsx("label",{className:"font-bold",children:"Enable Filename Index"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(CheckBox,{label:"",checked:I,onChange:K=>Q(K)})})]}),jsxRuntimeExports.jsxs("div",{className:"flex p-2 gap-2",children:[jsxRuntimeExports.jsx(Button,{onMouseOut:K=>n(),onMouseOver:K=>s("QueueSetup","Cancel this setup and back to main queue"),caption:"Cancel",icon:"fa fa-times",onClick:K=>oe()}),jsxRuntimeExports.jsx(Button,{onMouseOut:K=>n(),onMouseOver:K=>s("QueueSetup","Finish this setup and back to main queue"),disabled:i==m||u==E,icon:"fa fa-save",onClick:K=>G(),caption:"Finish Setup"})]})]}):""]}):""})};async function loader$2({params:t}){const{slug:e}=t;return{slug:e}}const delay=makeDelay(7e3),DownloadManager=({store:t})=>{const e=reactExports.useRef(null),s=reactExports.useRef(null),n=reactExports.useRef(null),{slug:r}=useLoaderData(),[a,o]=reactExports.useState(null),[l,i]=reactExports.useState(!1),[c,u]=reactExports.useState(!1),[h,m]=reactExports.useState(!1),[E,p]=reactExports.useState(!1),[R,g]=reactExports.useState(null),[f,S]=reactExports.useState(!1),y=t.get("DMSetup"),[d,w]=reactExports.useState(!1),[N,b]=reactExports.useState(!1),[T,k]=reactExports.useState(!1),A="Select Media Format",_="Select Transcript Language",[C,I]=reactExports.useState([]),[Q,P]=reactExports.useState(A),[O,G]=reactExports.useState([]),[oe,ne]=reactExports.useState(_),re=(B,W)=>{e.current.add(B,W)},le=async(B,W,q,te,ce)=>{n.current.log(B,W)},ae=async()=>{delay(()=>{n.current.clear()})},K=async()=>{o(null),i(!1),u(!1),g(null),k(!1),b(!1),m(!1),I([]),P(A);const B=await t.mCourse.getCoursePageData(r);await t.mCourse.setLastSlug(r),o(B),g(null);const{course:W}=B,q=y.getByCourseId(W.id);document.title=`${W.title} - LLFetcher Download Manager`,q&&(console.log(q),g(q),q.status==2&&u(!0),q.finished&&b(!0))},Y=async()=>{w(!1)},de=async()=>{w(!0)},he=async()=>{b(!1),k(!1);const B=!1;R.finished=B,g(R);const{course:W}=a;await y.updateByCourseId(W.id,{finished:B})},je=B=>{console.log(B),B&&K()};reactExports.useEffect(()=>{je(r)},[r]);const xe=B=>{console.log(B);const W=async q=>{const ce=await y.updateByCourseId(q.id,{finished:!0});ce.finished=!0,g(ce)};if(B){console.log(`Updating dmsetup.finished to ${B}`);const{course:q}=a;W(q)}};if(reactExports.useEffect(()=>{xe(N)},[N]),a){console.log(a);const{course:B,authors:W,sections:q,tocs:te}=a;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"download-manager",children:[jsxRuntimeExports.jsx(Toast,{ref:e}),jsxRuntimeExports.jsx(CourseInfo,{store:t,course:B,authors:W,selectedFmt:Q,selectTrans:_,selectedTrans:oe}),jsxRuntimeExports.jsx(ToolbarMan,{alreadySetup:c,toast:re,setAlreadySetup:u,reconfigureSetup:h,setReconfigureSetup:m,setRunSetup:i,runSetup:l,course:B,sections:q,tocs:te,dmsetup:R,setAvailableFmt:I,setDmsetup:g,selectedFmt:Q,setSelectedFmt:P,queueStarted:d,startDownloadQueue:de,stopDownloadQueue:Y,queueFinished:N,setQueueFinished:b,queueManRef:s,queueResume:T,logStatusBar:le,clearStatusBar:ae}),jsxRuntimeExports.jsx(QueueSetup,{alreadySetup:c,toast:re,setRefreshTable:S,setAlreadySetup:u,reconfigureSetup:h,setReconfigureSetup:m,displaySetupUi:E,runSetup:l,setRunSetup:i,course:B,sections:q,tocs:te,store:t,dmsetup:R,setDmsetup:g,availableFmt:C,setAvailableFmt:I,selectedFmt:Q,availableTrans:O,setAvailableTrans:G,selectedTrans:oe,setSelectedFmt:P,setSelectedTrans:ne,selectFmt:A,selectTrans:_,logStatusBar:le,clearStatusBar:ae}),jsxRuntimeExports.jsx(QueueMan,{alreadySetup:c,toast:re,dmsetup:R,refreshTable:f,reconfigureSetup:h,course:B,sections:q,tocs:te,store:t,queueStarted:d,stopDownloadQueue:Y,queueFinished:N,setQueueFinished:b,resetDownloadQueue:he,ref:s,setQueueResume:k,selectedFmt:Q,logStatusBar:le,clearStatusBar:ae}),jsxRuntimeExports.jsx(StatusbarMan,{store:t,toast:re,course:B,alreadySetup:c,reconfigureSetup:h,ref:n})]})})}else return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("i",{className:"fa fa-spin fa-spinner"})})},SettingPage=()=>{reactExports.useRef(null);const t=async()=>{let e;[e]=await window.showOpenFilePicker(),console.log(e);const n=await(await e.getFile()).text();console.log(n)};return reactExports.useEffect(()=>{},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-full p-4",children:jsxRuntimeExports.jsx(AdvancedSelect,{data:[{value:"test",text:"Hello"}],label:"Choose"})}),jsxRuntimeExports.jsxs("div",{className:"w-full p-4",children:["Setting Page",jsxRuntimeExports.jsx("button",{id:"testBtn",onClick:t,children:"Open File"})]})]})};class DBEditorGeneric extends React$1.Component{constructor(s){super(s);H(this,"inputRef",null);H(this,"item",null);H(this,"type",null);H(this,"field",null);H(this,"value",null);H(this,"oldValue",null);H(this,"gridAction",null);this.item=s.item,this.value=s.value,this.field=s.field,this.inputRef=React$1.createRef(null),s.item&&(this.oldValue=this.value,this.state={value:this.value,editMode:!1})}editRow(){this.setState({editMode:!0}),this.constructor.name=="DBEditorString"&&setTimeout(()=>{jQuery(this.inputRef.current).trigger("focus")},500)}serializeObj(){}async saveRow(){this.cancelRow()}cancelRow(s){this.setState({editMode:!1}),this.gridAction&&this.gridAction.setState({editMode:!1})}setGridAction(s){this.gridAction=s}}class DBEditorBoolean extends DBEditorGeneric{constructor(e){super(e),this.state.isChecked=JSON.parse(this.value)}onCk_clicked(e){this.setState({isChecked:e.target.checked})}onChange(e){const s=e.target.checked;this.setState({value:s})}cancelRow(e){if(e){const s=this.oldValue;this.setState({value:s}),this.setState({isChecked:s})}super.cancelRow()}render(){if(this.item)return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[this.state.editMode?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("input",{type:"checkbox",className:"checkbox -mt-1 mr-1",onChange:e=>{this.onChange(e)},onClick:e=>this.onCk_clicked(e),checked:this.state.isChecked})}):"",jsxRuntimeExports.jsxs("span",{children:[" ",this.state.isChecked?"Yes":"No"]})]})}}const inputCls="py-3 px-4 block w-full border-gray-200 rounded-md text-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-slate-900 dark:border-gray-700 dark:text-gray-400";class DBEditorInteger extends DBEditorGeneric{constructor(e){super(e)}render(){if(this.item)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:this.state.editMode?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("input",{className:inputCls,type:"number",ref:this.inputRef,defaultValue:this.state.value,onKeyUp:e=>this.onKeyUp(e),onChange:e=>this.onChange(e)})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:this.state.value})})}}class DBEditorObject extends DBEditorGeneric{constructor(e){super(e)}render(){if(this.item)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:this.state.value})}}class DBEditorString extends DBEditorGeneric{constructor(e){super(e)}onKeyUp(e){e.keyCode==13?this.saveRow():e.keyCode==27&&this.cancelRow(!0)}onChange(e){const s=e.target.value;this.setState({value:s})}cancelRow(e){if(e){const s=this.oldValue;this.setState({value:s})}super.cancelRow()}render(){if(this.item)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:this.state.editMode?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("input",{className:inputCls,type:"text",ref:this.inputRef,defaultValue:this.state.value,onKeyUp:e=>this.onKeyUp(e),onChange:e=>this.onChange(e)})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:this.state.value})})}}function Pager({limit:t,total_pages:e,page:s,gotoPage:n,path:r="",onRefresh:a}){const o="pager",[l,i]=reactExports.useState(!1);s=parseInt(s),e=parseInt(e),t=parseInt(t);const c=m=>!e||m>e?!1:m>1,u=m=>!e||m>e?!1:m<e,h=()=>{const m=[];for(let E=0;E<e;E++)m.push(E+1);return m};return jsxRuntimeExports.jsxs("nav",{className:"flex items-center place-content-center space-x-2",children:[c(s)?jsxRuntimeExports.jsxs(Link$1,{className:"text-gray-500 hover:text-blue-600 p-4 inline-flex items-center gap-2 rounded-md",to:`${r}/page/${s-1}`,children:[jsxRuntimeExports.jsx("span",{"aria-hidden":"true",children:"«"}),jsxRuntimeExports.jsx("span",{children:"Sebelum"})]},`${o}-min-1`):"",h().map((m,E)=>m==s?jsxRuntimeExports.jsx(Link$1,{className:"w-10 h-10 bg-blue-500 text-white p-4 inline-flex items-center text-sm font-medium rounded-full","aria-current":"page",to:`${r}/page/${m}`,children:m},`${o}-num-${E}`):jsxRuntimeExports.jsx(Link$1,{to:`${r}/page/${m}`,className:"w-10 h-10 text-gray-500 hover:text-blue-600 p-4 inline-flex items-center text-sm font-medium rounded-full",children:m},`${o}-num-${E}`)),u(s)?jsxRuntimeExports.jsxs(Link$1,{className:"text-gray-500 hover:text-blue-600 p-4 inline-flex items-center gap-2 rounded-md",to:`${r}/page/${s+1}`,children:[jsxRuntimeExports.jsx("span",{children:"Selanjutnya"}),jsxRuntimeExports.jsx("span",{"aria-hidden":"true",children:"»"})]},`${o}-plus-1`):"",typeof a=="function"?jsxRuntimeExports.jsx("button",{className:"btn-blue pl-[14px] rounded-full "+(l?"animate-spin":""),onClick:m=>a(m,i),children:jsxRuntimeExports.jsx("i",{className:"bi bi-arrow-repeat"})},`${o}-refresh-1`):""]},o)}const GridItemEmpty=({spanCls:t,limit:e,options:s})=>{const n=s.fields.length+2,r=[0];return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:r.map((a,o)=>jsxRuntimeExports.jsx("tr",{className:"",children:jsxRuntimeExports.jsx("td",{colSpan:n,children:jsxRuntimeExports.jsx("span",{className:"",children:"No records"})})},o))})};class GridActions extends React$1.Component{constructor(e){super(e),this.state={editMode:!1}}getLinkButton(e){e&&e.current&&console.log(e.current.getLinkButton())}render(){const{options:e,item:s,index:n,linkCls:r}=this.props;if(e.enableEdit)return e.callbackActions&&e.callbackActions.edit?e.callbackActions.edit(s,n,e,r,this):jsxRuntimeExports.jsxs(Link,{className:r,to:typeof e.editUrl=="function"?e.editUrl(s):e.editUrl,children:[jsxRuntimeExports.jsx("i",{className:"bi bi-pencil-square"})," Edit"]})}}class GridItems extends React$1.Component{constructor(s){super(s);H(this,"spanCls","my-2 h-8 block bg-gray-200 rounded-full dark:bg-gray-700");H(this,"tdCls","px-6 py-4 text-sm font-medium text-gray-800 dark:text-gray-200");H(this,"tdCls2","px-6 py-4 whitespace-nowrap text-right text-sm font-medium");H(this,"trCls","odd:bg-white even:bg-gray-100 hover:bg-gray-100 dark:odd:bg-gray-800 dark:even:bg-gray-700 dark:hover:bg-gray-700");H(this,"linkCls","text-blue-500 hover:text-blue-700");H(this,"editorFactory",()=>{console.log("dummy editorFactory")})}recordNumber(s){const{page:n,limit:r}=this.props,a=parseInt(s)+1,o=parseInt(n)-1,l=parseInt(r||5);return a+o*l}parseCustomAction(s){const{options:n}=this.props;if(n.actions&&n.actions.edit)return n.actions.edit(s)}render(){const{empty:s,records:n,page:r,limit:a,options:o}=this.props;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:s?jsxRuntimeExports.jsx(GridItemEmpty,{options:o,spanCls:this.spanCls,limit:a}):n.map((l,i)=>jsxRuntimeExports.jsxs("tr",{className:this.trCls,children:[jsxRuntimeExports.jsx("td",{className:this.tdCls,children:this.recordNumber(i)}),o.fields.map((c,u)=>{let h=l[c];try{h=typeof h=="object"?JSON.stringify(h):h.toString()}catch{}let m=h;if(o.callbackFields&&o.callbackFields[c]&&(m=o.callbackFields[c](c,h,l,i)),o.useAutoEditor){let E="string";try{o.editors[u]}catch{}m=o.editorFactory(E,c,h,l,i,u)}return jsxRuntimeExports.jsx("td",{className:this.tdCls+" truncate ...",children:m},u)}),jsxRuntimeExports.jsx("td",{className:this.tdCls2,children:jsxRuntimeExports.jsx(GridActions,{options:o,index:i,item:l,linkCls:this.linkCls})})]},i))})}}const GridHeaders=({options:t})=>{const e="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",s=t.numberWidthCls||"",n=t.actionWidthCls||"";return jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{scope:"col",className:`${s} ${e}`,children:"No"}),t.headers.map((r,a)=>{const o=t.widthCls[a]||"";return jsxRuntimeExports.jsx("th",{scope:"col",className:`${o} ${e}`,children:r},a)}),jsxRuntimeExports.jsx("th",{scope:"col",className:`${n} ${e}`,children:"Action"})]})};class GridTable extends React$1.Component{constructor(e){super(e),this.state={records:this.props.records}}async componentWillReceiveProps(e){const s=e.records;this.setState({records:[]},n=>{this.setState({records:s})})}render(){const{page:e,limit:s,options:n,context:r}=this.props,{records:a}=this.state,o="min-w-full divide-y divide-gray-200 dark:divide-gray-700",l=a?!(a.length>0):!1;return jsxRuntimeExports.jsxs("table",{className:o,children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsx(GridHeaders,{options:n})}),jsxRuntimeExports.jsx("tbody",{children:jsxRuntimeExports.jsx(GridItems,{empty:l,context:r,records:a,page:e,limit:s,options:n})})]})}}class Grid extends React$1.Component{constructor(e){super(e)}render(){return jsxRuntimeExports.jsx(GridTable,{...this.props,context:this})}}const tables={section:{headers:["Course","Slug","Title","TOC IDS","Item Stars"],fields:["courseId","slug","title","tocIds","itemStars"],model:"Section",listMethod:"getList"},"stream-location":{headers:["Toc ID","Fmt","Url","Expires At"],fields:["tocId","fmt","url","expiresAt"],model:"StreamLocation",listMethod:"getList"},"exercise-file":{headers:["Course ID","File Name","Url","Size in Bytes"],fields:["courseId","name","url","size"],model:"ExerciseFile",listMethod:"getList"},author:{headers:["Name","Slug","Biography","Short Biography","Course IDS"],fields:["name","slug","biography","shortBiography","courseIds"],model:"Author",listMethod:"getList"},transcript:{headers:["TocID","Lang","Country","Fmt","Url","Auto Generated"],fields:["tocId","lang","country","fmt","url","autoGenerated"],model:"Transcript",listMethod:"getList"},toc:{headers:["Section ID","Title","Slug","URL","DURATION","STREAMLOCS IDs","Item Star","V Status Urn"],fields:["sectionId","title","slug","url","duration","streamLocationIds","itemStar","vStatusUrn"],model:"Toc",listMethod:"getList"},course:{headers:["Title","Slug","Author IDS","Urn"],fields:["title","slug","authorIds","urn"],model:"Course",listMethod:"getList"},download:{headers:["Filename","Status"],fields:["filename","status"],model:"Download",listMethod:"getList"},"download-state":{headers:["courseId","Status"],fields:["course","status"],model:"DownloadState",listMethod:"getListWithCourse"},"download-config":{headers:["courseId","fmtList","selectedFmtList"],fields:["course","fmtList","selectedFmtList"],model:"DownloadConfig",listMethod:"getListWithCourse"},"dm-setup":{headers:["Course","Enable Filename Index","Status","Finished","Available Fmt","Selected Fmt","Selected Trans","Exercise Files","Source Repo","Available Trans"],fields:["course","enableFilenameIndex","status","finished","availableFmt","selectedFmt","selectedTrans","exerciseFiles","sourceRepo","availableTrans"],model:"DMSetup",editors:["string","boolean","integer","string","string","string","string"],listMethod:"getListWithCourse"},"dm-status":{headers:["Course","VIndex","Meta Status","Video Status","Caption Status","Video Size","Caption Size","Dt Meta Start","Dt Video Start","Dt Caption Start","Dt Meta End","Dt Video End","Dt Caption End","Dl Meta Retry Count","Dl Video Retry Count","Dl Caption Retry Count","Finished","Interupted","Last Error"],fields:["course","vIndex","metaStatus","videoStatus","captionStatus","videoSz","captionSz","dtMetaStart","dtVideoStart","dtCaptionStart","dtMetaEnd","dtVideoEnd","dtCaptionEnd","dlMetaRetryCount","dlVideoRetryCount","dlCaptionRetryCount","finished","interupted","lastError"],model:"DMStatus",listMethod:"getListWithCourse"},cookie:{headers:["Path","Content","Save Date"],fields:["path","content","dtSaved"],model:"Cookie",listMethod:"getAll"}},config$1={tables},DBExplorer=({store:t,table:e,page:s})=>{const[n,r]=reactExports.useState(null),[a,o]=reactExports.useState(null),[l,i]=reactExports.useState("");reactExports.useState([]);const c=[],[u,h]=reactExports.useState({records:[],limit:5,page:1,total_pages:0,total_records:0,order_by:"key",order_dir:"asc"}),m=async y=>{const d=Object.assign({},u);y=y??1,d.page=y,d.limit=u.limit??5,d.records=[],h(null),console.log(n);try{d.records=n[a.listMethod](),h(d),console.log(d)}catch(w){console.error(w)}};reactExports.useEffect(()=>{if(n){const y=s??1;console.log(y),m(y)}else i("No Model Set")},[s,n]),reactExports.useEffect(()=>{if(e){r(null),o(null);const y=config$1.tables[e];if(y){const d=y.model,w=t.get(d);console.log(y,d,w),o(y),r(w)}else i(`No config set for ${e} table`)}},[e]);const E=async(y,d)=>{d(!0),await m(u.page),d(!1)},p=(y,d,w,N,b,T)=>{c[`${b}-${T}-${d}`]||(c[`${b}-${T}-${d}`]=React$1.createRef(null));const k=c[`${b}-${T}-${d}`];return{boolean:jsxRuntimeExports.jsx(DBEditorBoolean,{item:N,field:d,value:w,ref:k}),string:jsxRuntimeExports.jsx(DBEditorString,{item:N,field:d,value:w,ref:k}),object:jsxRuntimeExports.jsx(DBEditorObject,{item:N,field:d,value:w,ref:k}),integer:jsxRuntimeExports.jsx(DBEditorInteger,{item:N,field:d,value:w,ref:k})}[y]},R=async(y,d,w,N,b)=>{w.fields.map((T,k)=>{c[`${d}-${k}-${T}`].current.cancelRow()}),b.setState({editMode:!1})},g=async(y,d,w,N,b)=>{w.fields.map((k,A)=>{const _=c[`${d}-${A}-${k}`].current;_.state.editMode?_.saveRow():_.editRow()});const T=b.state.editMode;b.setState({editMode:!T})},f={numberWidthCls:"",actionWidthCls:"",widthCls:["3/8","5/8"],headers:["Setting","Value"],fields:["key","value"],enableEdit:!0,callbackFields:{},useAutoEditor:!0,callbackActions:{edit:(y,d,w,N,b)=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[" ",jsxRuntimeExports.jsxs("button",{className:N,onClick:T=>g(y,d,w,N,b),children:[jsxRuntimeExports.jsx("i",{className:"bi bi-pencil-square"})," ",b.state.editMode?"Save":"Edit"]}),b.state.editMode?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("button",{className:"ml-2 "+N,onClick:T=>R(y,d,w,N,b),children:[jsxRuntimeExports.jsx("i",{className:"bi bi-x-circle"})," Cancel"]})}):""]})}},S="border mb-2 rounded-xl shadow-sm p-6 dark:bg-gray-800 dark:border-gray-700";return n?(f.headers=a.headers,f.fields=a.fields,f.editors=a.editors,f.editorFactory=p,jsxRuntimeExports.jsx("div",{className:S,children:jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:jsxRuntimeExports.jsx("div",{className:"-m-1.5 overflow-x-auto [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300 dark:[&::-webkit-scrollbar-track]:bg-slate-700 dark:[&::-webkit-scrollbar-thumb]:bg-slate-500",children:jsxRuntimeExports.jsxs("div",{className:"p-1.5 min-w-full inline-block align-middle",children:[jsxRuntimeExports.jsx("div",{className:"overflow-hidden",children:jsxRuntimeExports.jsx(Grid,{options:f,records:u.records,page:u.page,limit:u.limit})}),jsxRuntimeExports.jsx("div",{className:"pager-container mt-3",children:jsxRuntimeExports.jsx(Pager,{path:"/DBerences/tts-server",page:u.page,total_pages:u.total_pages,limit:u.limit,onRefresh:E})})]})})})})):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:l})},availables=["PrxCache","Transcript","App","Author","Course","Download","DownloadConfig","DownloadState","ExerciseFile","Section","StreamLocation","Toc","Message","DMSetup","DMStatus","Cookie"],schema={availables},DBTableManager=({store:t,config:e})=>{const[s,n]=reactExports.useState({records:[],limit:5,page:1,total_pages:0,total_records:0,order_by:"key",order_dir:"asc"}),[r,a]=reactExports.useState([]),[o,l]=reactExports.useState(0),i=f=>f,c=async(f,S)=>{if(confirm(`The ${f.table} table is going droped, are you sure want to reinit ?`)){console.log(`Reinitit ${f.table} table`);let y=Object.assign([],r);y[S]=!0,a(y);const d=t.get(f.table);d&&(f.table=="PrxCache"?await d.clearAll():await d.truncate()),y=Object.assign([],r),y[S]=!1,a(y),h(),p(),e.getUiConfig().reloadSidebar()}console.log(f)},u={numberWidthCls:"",actionWidthCls:"",widthCls:["1/4","3/4"],headers:["Table","Desc","Size","Counts"],fields:["table","desc","size","counts"],enableEdit:!0,callbackFields:{},callbackActions:{edit:(f,S,y,d,w)=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Button,{loading:r[S],icon:"fa fa-trash",caption:"Truncate",onClick:N=>c(f,S)})})}},h=async()=>{const f=await t.getStorageSize();l(f)},m=async f=>{let S=0;if(f=="PrxCache")S=await t.get("PrxCache").getCounts();else{const d=t.get(f).table;S=t.getCounts(d)}return S},E=async f=>{let S=0;if(f=="PrxCache")S=await t.get("PrxCache").getSize();else{const d=t.get(f).table;S=await t.getStorageSize(d)}return formatBytes(S)},p=async()=>{const f=Object.assign({},s);n(null),a([]);const S=[];for(const d of schema.availables){const w="",N=await E(d),b=await m(d),T={table:d,desc:w,size:N,counts:b};S.push(T)}const y=schema.availables.map(d=>!1);a(y),f.records=S,n(f),h()};reactExports.useEffect(()=>{p()},[]);const R=async()=>{let f=document.createElement("a");const S="db.json";let y={records:{}};t.availables.map(N=>{y.records[N]={},t.get(N).getAll().map(b=>{y.records[N][b.id]=b})});let d=JSON.stringify(y);const w=window.URL.createObjectURL(new Blob([d]));f.download=S,f.href=w,f.click()},g="db-table-manager border mb-2 rounded-xl shadow-sm p-6 dark:bg-gray-800 dark:border-gray-700";return jsxRuntimeExports.jsxs("div",{className:g,children:[jsxRuntimeExports.jsx("div",{className:"explorer-toolbar",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:f=>R(),caption:"Export to json",icon:"fa fa-file-text"}),jsxRuntimeExports.jsx(Button,{onClick:f=>f,icon:"fa fa-save",caption:"Storage Size : "+formatBytes(o)})]})}),jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:jsxRuntimeExports.jsx("div",{className:"-m-1.5 overflow-x-auto",children:jsxRuntimeExports.jsxs("div",{className:"p-1.5 min-w-full inline-block align-middle",children:[jsxRuntimeExports.jsx("div",{className:"overflow-hidden",children:s?jsxRuntimeExports.jsx(Grid,{options:u,records:s.records,page:s.page,limit:s.limit}):""}),jsxRuntimeExports.jsx("div",{className:"pager-container mt-3",children:s?jsxRuntimeExports.jsx(Pager,{path:"/database",page:s.page,total_pages:s.total_pages,limit:s.limit,onRefresh:i}):""})]})})})]})};async function loader$1({params:t}){const{table:e,page:s}=t;return{table:e,page:s}}const DatabasePage=({store:t,config:e})=>{const{table:s,page:n}=useLoaderData();let r=s?"explorer":"manager";return s=="table-manager"&&(r="manager"),jsxRuntimeExports.jsxs("div",{className:"database-page",children:[r==="explorer"?jsxRuntimeExports.jsx(DBExplorer,{store:t,table:s,page:n}):"",r==="manager"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(DBTableManager,{store:t,config:e})}):""]})},FetchApi=(t,e)=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:"Fetch API"});async function loader({params:t}){const{table:e,page:s}=t;return{table:e,page:s}}const DeveloperPage=({store:t,config:e})=>{const{table:s,page:n}=useLoaderData();return n=="fetch-api"?jsxRuntimeExports.jsx(FetchApi,{store:t,config:e}):jsxRuntimeExports.jsx("div",{className:"developer-page"})};function ErrorPage(){const t=useRouteError();console.error(t);const e=s=>{if(s)return s.toString().split("").map((n,r)=>jsxRuntimeExports.jsx("i",{className:`bi bi-${n}-square`},r))};return jsxRuntimeExports.jsxs("div",{id:"error-page",className:"dark:text-slate-500 p-4 text-center",children:[jsxRuntimeExports.jsx("h1",{children:"Oops!"}),jsxRuntimeExports.jsx("p",{children:"Sorry, an unexpected error has occurred."}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("i",{children:t.statusText||t.message})}),jsxRuntimeExports.jsx("p",{children:e(t.status)})]})}function Router({config:t,store:e}){const s=createHashRouter(createRoutesFromChildren(jsxRuntimeExports.jsxs(Route,{path:"/",errorElement:jsxRuntimeExports.jsx(ErrorPage,{}),element:jsxRuntimeExports.jsx(Template,{config:t,store:e}),children:[jsxRuntimeExports.jsx(Route,{path:"/course",element:jsxRuntimeExports.jsx(CoursePage,{store:e}),loader:loader$3}),jsxRuntimeExports.jsx(Route,{path:"/course/:ctl/:slug",element:jsxRuntimeExports.jsx(CoursePage,{store:e,config:t}),loader:loader$3}),jsxRuntimeExports.jsx(Route,{path:"/manager/:slug",element:jsxRuntimeExports.jsx(DownloadManager,{store:e}),loader:loader$2}),jsxRuntimeExports.jsx(Route,{path:"/setting",element:jsxRuntimeExports.jsx(SettingPage,{store:e})}),jsxRuntimeExports.jsx(Route,{path:"/database",element:jsxRuntimeExports.jsx(DatabasePage,{store:e,config:t}),loader:loader$1}),jsxRuntimeExports.jsx(Route,{path:"/database/:table",element:jsxRuntimeExports.jsx(DatabasePage,{store:e,config:t}),loader:loader$1}),jsxRuntimeExports.jsx(Route,{path:"/database/:table/:page",element:jsxRuntimeExports.jsx(DatabasePage,{store:e}),loader:loader$1}),jsxRuntimeExports.jsx(Route,{path:"/database",element:jsxRuntimeExports.jsx(DatabasePage,{store:e})}),jsxRuntimeExports.jsx(Route,{path:"/developer",element:jsxRuntimeExports.jsx(DeveloperPage,{store:e,config:t}),loader}),jsxRuntimeExports.jsx(Route,{path:"/developer/:page",element:jsxRuntimeExports.jsx(DeveloperPage,{store:e,config:t}),loader})]})));return jsxRuntimeExports.jsx(RouterProvider,{router:s})}class LsConfig{constructor(e){H(this,"config_key",null);H(this,"data",null);this.config_key=e,this.init()}init(){this.config_key||(config_key=`ls_config_${v4()}`),this.getData()}setConfigKey(e){this.config_key=e}getData(e){try{this.data=JSON.parse(localStorage[this.config_key])}catch{this.data||(this.data={})}return e?this.data[e]?this.data[e]:null:this.data}setData(e,s){this.data[e]=s,localStorage[this.config_key]=JSON.stringify(this.data)}}class UiConfig extends LsConfig{constructor(){super("uiTtsConfig");H(this,"defaultTheme","default-theme.css");H(this,"hiddenSidebar_callback_keys",[]);H(this,"reloadSidebar_callback_keys",[]);this.setData("defaultTheme",this.defaultTheme)}reloadSidebar(){jQuery("#root").trigger("reloadSidebar")}setHiddenSidebarStatus(s=!0){const n=jQuery("#root");n.prop("hideSidebar",s),n.trigger("hideSidebar"),this.setData("hideSidebar",s)}getHiddenSidebarStatus(){return this.getData("hideSidebar")}applyHiddenSidebarStatus(s,n,r){if(s(this.getHiddenSidebarStatus()),typeof n=="function"&&!this.hiddenSidebar_callback_keys.includes(r)){const a=jQuery("#root");a.on("hideSidebar",()=>{n(a.prop("hideSidebar"))}),this.hiddenSidebar_callback_keys.push(r)}}applyReloadSidebar(s,n){typeof s=="function"&&(this.reloadSidebar_callback_keys.includes(n)||(jQuery("#root").on("reloadSidebar",()=>{console.log(this.reloadSidebar_callback_keys),s()}),this.reloadSidebar_callback_keys.push(n)))}}const Re=class Re{constructor(){H(this,"mode","development");H(this,"uiConfig",null);this.uiConfig=new UiConfig}static getInstance(){return Re.instance instanceof Re||(Re.instance=Re.factory()),Re.instance}static factory(){return new Re}getUiConfig(){return this.uiConfig}};H(Re,"instance",null);let AppConfig=Re;window.alert=function(t){console.log("Custom alert:",t);const{dialogContentRef:e}=window;e.current.alert("Alert",t)};console.log("option-main.jsx");const store=Store.getInstance(),config=AppConfig.getInstance();store.ready(()=>{client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React$1.StrictMode,{children:jsxRuntimeExports.jsx(Router,{store,config})}))});
